{
  "$schema": "https://json.schemastore.org/claude-code-settings.json",
  "permissions": {
    "allow": [
      "Bash(for file in src/renderer/hooks/use*Logic.ts)",
      "Bash(do if [ -f \"$file\" ])",
      "Bash(then echo \"=== $file ===\")",
      "Bash(timeout 70 npm test:*)",
      "Bash(if [ -f jest-after-infrastructure-fixes.json ])",
      "Bash(then node -e \"const r=require(''./jest-after-infrastructure-fixes.json''); console.log(''=== AFTER INFRASTRUCTURE FIXES ===''); console.log(''Tests Passing:'', r.numPassedTests, ''/'', r.numTotalTests, ''('' + ((r.numPassedTests/r.numTotalTests)*100).toFixed(1) + ''%)''); console.log(''Tests Failing:'', r.numFailedTests); console.log(''Tests Skipped:'', r.numPendingTests + r.numTodoTests); console.log(''''); console.log(''Suites Passing:'', r.numPassedTestSuites, ''/'', r.numTotalTestSuites); console.log(''Suites Failing:'', r.numFailedTestSuites); console.log(''''); console.log(''Improvement from baseline (1,636):'', ''+'' + (r.numPassedTests - 1636) + '' tests'');\")",
      "Bash(else echo 'Results file not found')",
      "Bash(for file in src/renderer/hooks/useActiveDirectoryDiscoveryLogic.ts src/renderer/hooks/useApplicationDiscoveryLogic.ts src/renderer/hooks/useAzureDiscoveryLogic.ts src/renderer/hooks/useDomainDiscoveryLogic.ts src/renderer/hooks/useFileSystemDiscoveryLogic.ts)",
      "Bash(do echo \"=== $file ===\")",
      "Bash(python:*)",
      "Bash(for file in src/renderer/views/discovery/*DiscoveryView.tsx)",
      "Bash(if ! grep -q 'data-cy=\"\"start-discovery-btn\"\"' \"$file\")",
      "Bash(then echo \"MISSING start-discovery-btn: $basename\")",
      "Bash(if ! grep -q 'data-cy=\"\"export-results-btn\"\"' \"$file\")",
      "Bash(then echo \"MISSING export-results-btn: $basename\")",
      "Bash(xargs ls:*)",
      "Bash(if [ -f jest-phase5-final.json ])",
      "Bash(then node -e \"const r=require(''./jest-phase5-final.json''); console.log(''=== PHASE 5 FINAL RESULTS ===''); console.log(''Tests Passing:'', r.numPassedTests, ''/'', r.numTotalTests, ''('' + ((r.numPassedTests/r.numTotalTests)*100).toFixed(1) + ''%)''); console.log(''Tests Failing:'', r.numFailedTests); console.log(''Suites Passing:'', r.numPassedTestSuites, ''/'', r.numTotalTestSuites); console.log(''''); console.log(''Progress from baseline (1,636):'', ''+'' + (r.numPassedTests - 1636), ''tests''); console.log(''Progress to 95% target (2,937):'', ((r.numPassedTests/2937)*100).toFixed(1) + ''%''); console.log(''Tests remaining to target:'', 2937 - r.numPassedTests);\")",
      "Bash(for file in jest-phase4-results.json jest-after-null-safety.json jest-phase5-final.json)",
      "Bash(then echo \"$file:\")",
      "Bash(npm test:*)",
      "Bash(node -e:*)",
      "Bash(timeout 180 npm test:*)",
      "Bash(git add:*)",
      "Bash(git commit -m \"$(cat <<''EOF''\nTest Coverage Improvement: Foundation Work (+9 tests, comprehensive analysis)\n\nSummary:\n- Baseline: 1,715/3,136 tests (54.7%)\n- Current: 1,724/3,136 tests (55.0%)\n- Improvement: +9 tests (+0.5%), +3 test suites\n- Remaining to 95%: 1,256 tests\n\nChanges:\n\n1. Fixed Async Hook Tests (Priority 1 COMPLETED)\n   - useAWSDiscoveryLogic.test.ts: Fixed config object tests, async patterns\n   - useAzureDiscoveryLogic.test.ts: Fixed mock setup, cancel discovery, waitFor patterns\n   - Impact: Reduced failures from 9 to 6 in affected files\n\n2. Standardized Mock Data (Priority 2 COMPLETED)\n   - universalDiscoveryMocks.ts: Added 130+ mock fields\n     * 60+ filtered collections (filteredUsers, filteredGroups, filteredDevices, etc.)\n     * 40+ unfiltered collections (users, groups, devices, etc.)\n     * 30+ column definitions (userColumns, groupColumns, etc.)\n     * WebServer-specific fields (filteredServers, filteredSites, filteredBindings, etc.)\n     * Connection/validation functions (testConnection, validateCredentials, etc.)\n     * Export functions (exportToJSON, exportToPDF, exportToHTML)\n   - Impact: Prevents 360+ \"Cannot read property 'length'\" errors across 102 view tests\n\n3. Comprehensive Documentation Created\n   - TEST-COVERAGE-IMPROVEMENT-REPORT.md: Detailed error analysis, ROI ranking, automation strategies\n   - FINAL-EXECUTION-SUMMARY.md: Session results and recommendations\n   - bulk-async-test-fix.js: Automation tool for async pattern fixes\n   - Jest test result snapshots (baseline, after fixes)\n\nKey Findings:\n- 180 tests blocked by missing data-cy attributes (18% of failures) - requires component file changes\n- 70 tests blocked by text content mismatches (7% of failures)\n- 150+ tests blocked by component logic errors (15%+ of failures)\n- Path to 95%: 31-48 hours systematic work with automation\n\nInfrastructure Improvements:\n✓ Universal mock prevents null errors across all view tests\n✓ Async testing patterns established\n✓ Error pattern analysis identifies high-ROI fixes\n✓ Null safety patterns documented\n\nNext Steps (Highest ROI):\n1. Bulk add data-cy attributes (+180 tests, 2-3 hours)\n2. Fix text content mismatches (+70 tests, 1-2 hours)\n3. Apply async waitFor patterns (+50 tests, 2-3 hours)\n\nGenerated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(node add-missing-data-cy.js:*)",
      "Bash(node add-data-testid-to-existing.js:*)",
      "Bash(npx tsc:*)",
      "Bash(git checkout:*)",
      "Bash(node fix-test-mock-mismatches.js:*)",
      "Bash(git commit:*)"
    ],
    "deny": [],
    "ask": [],
    "defaultMode": "acceptEdits",
    "additionalDirectories": [
      "C:\\enterprisediscovery",
      "D:\\d\\Scripts\\UserMandA-1",
      "C:\\discoverydata\\ljpops\\Raw",
      "C:\\discoverydata\\ljpops\\Logs",
      "D:\\d D:\\Scripts\\UserMandA",
      "C:\\EnterpriseDiscovery",
      "D:\\d\\Scripts",
      "D:\\c\\enterprisediscovery",
      "D:\\c\\discoverydata\\ljpops",
      "C:\\",
      "D:\\c\\DiscoveryData\\ljpops\\Logs",
      "D:\\",
      "D:\\d\\Scripts\\UserMandA\\GUI",
      "D:\\c\\EnterpriseDiscovery",
      "D:\\c"
    ]
  }
}
