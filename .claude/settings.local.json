{
  "$schema": "https://json.schemastore.org/claude-code-settings.json",
  "permissions": {
    "allow": [
      "Bash(mkdir:*)",
      "Bash(powershell:*)",
      "Bash(cat:*)",
      "Bash(ls:*)",
      "Bash(./Launch-MandADiscoverySuite.bat)",
      "Bash(start MandADiscoverySuite.exe)",
      "Bash(dotnet build:*)",
      "Bash(start .binReleasenet6.0-windowsMandADiscoverySuite.exe)",
      "Bash(dotnet run:*)",
      "Bash(taskkill:*)",
      "Bash(start:*)",
      "Bash(./MandADiscoverySuite.exe)",
      "Bash(tasklist)",
      "Bash(dotnet clean:*)",
      "Bash(rmdir:*)",
      "Bash(cmd /c:*)",
      "Bash(rm:*)",
      "Bash(cp:*)",
      "Bash(./Build-GUI.ps1)",
      "Bash(Start-Process \"C:\\EnterpriseDiscovery\\bin\\Release\\MandADiscoverySuite.exe\" -WindowStyle Normal)",
      "Bash(.MandADiscoverySuite.exe)",
      "Bash(Start-Process .MandADiscoverySuite.exe)",
      "Bash(cmd.exe /c Launch-MandADiscoverySuite.bat)",
      "Bash(git rm:*)",
      "Bash(del nul)",
      "Bash(pwsh:*)",
      "Bash(timeout:*)",
      "Bash(.Build-GUI.ps1)",
      "Bash(.Launch-MandADiscoverySuite.bat)",
      "Bash(if exist \"GUI\\bin\" rmdir /s /q \"GUI\\bin\")",
      "Bash(if exist \"GUI\\obj\" rmdir /s /q \"GUI\\obj\")",
      "Bash(grep:*)",
      "Bash(sed:*)",
      "Bash(Start-Process \"D:\\Scripts\\UserMandA\\GUI\\bin\\Release\\net6.0-windows\\MandADiscoverySuite.exe\" -WindowStyle Normal)",
      "Bash(./GUI/bin/Release/net6.0-windows/MandADiscoverySuite.exe)",
      "Bash(dir:*)",
      "Bash(\"./GUI/bin/Release/net6.0-windows/MandADiscoverySuite.exe\")",
      "Bash(./GUI/Build-GUI.ps1)",
      "Bash(Start-Process \"C:\\enterprisediscovery\\bin\\net6.0-windows\\MandADiscoverySuite.exe\" -WindowStyle Normal)",
      "Bash(findstr:*)",
      "Bash(find:*)",
      "Bash(git add:*)",
      "Bash(xcopy:*)",
      "Bash(cmd.exe /c robocopy \"D:\\Scripts\\UserMandA\\Modules\" \"C:\\enterprisediscovery\\Modules\" /E /XO)",
      "Bash(robocopy:*)",
      "Bash(if exist \"C:\\enterprisediscovery\\Modules\" rmdir /s /q \"C:\\enterprisediscovery\\Modules\")",
      "Bash(.GUIBuild-GUI.ps1)",
      "Bash(copy:*)",
      "Bash(rg:*)",
      "Bash(Start-Process \"dotnet\" -ArgumentList \"run\" -PassThru)",
      "Bash(Test-Path \"C:\\DiscoveryData\\ljpops\\Credentials\\discoverycredentials.config\")",
      "Bash(Test-Path \"C:\\enterprisediscovery\\Modules\")",
      "Bash(for file in *Discovery.psm1)",
      "Bash(do if ! grep -q \"Start-DiscoveryModule\" \"$file\")",
      "Bash(then echo \"$file\")",
      "Bash(fi)",
      "Bash(done)",
      "Bash(Start-Process \"C:\\EnterpriseDiscovery\\MandADiscoverySuite.exe\" -WindowStyle Normal)",
      "Bash(git checkout:*)",
      "Bash(for module in *.psm1)",
      "Bash(do if grep -q \"Start-DiscoveryModule\" \"$module\")",
      "Bash(then echo \"✅ Framework: $module\")",
      "Bash(else echo \"❌ Needs mapping: $module\")",
      "Bash(Start-Process \"GUI/bin/Release/net6.0-windows/MandADiscoverySuite.exe\" -WindowStyle Normal)",
      "Bash(Start-Process \"bin\\Release\\net6.0-windows\\MandADiscoverySuite.exe\" -WindowStyle Normal)",
      "Bash(./bin/Release/net6.0-windows/MandADiscoverySuite.exe)",
      "Bash(copy:*)",
      "Bash(mv:*)",
      "Bash(pwsh:*)",
      "Bash(.Build-GUI.ps1)",
      "Bash(dir \"C:\\EnterpriseDiscovery\\Scripts\\DiscoveryModuleLauncher.ps1\")",
      "Bash(find:*)",
      "Bash(diff:*)",
      "Bash(dotnet restore:*)",
      "Bash(csc:*)",
      "Bash(Test-Path \"C:\\EnterpriseDiscovery\\Modules\\Discovery\\AzureDiscovery.psm1\")",
      "Bash(Test-Path \"D:\\Scripts\\UserMandA\\GUI\\Configuration\\ModuleRegistry.json\")",
      "Bash(\"C:\\EnterpriseDiscovery\\MandADiscoverySuite.exe\")",
      "Bash(dotnet nuget list:*)",
      "Bash(dotnet nuget add source:*)",
      "Bash(del \"GUI\\Controls\\ThemeToggleButton.xaml\")",
      "Bash(del \"GUI\\Messages\\NavigationMessage.cs\")",
      "Bash(Start-Process \"C:\\enterprisediscovery\\net6.0-windows\\MandADiscoverySuite.exe\" -WindowStyle Normal)",
      "Bash(\"C:\\enterprisediscovery\\net6.0-windows\\MandADiscoverySuite.exe\")",
      "Bash(echo $env:APPDATA)",
      "Bash(del \"Icons\\FluentIcons.xaml\")",
      "Bash(\"C:\\enterprisediscovery\\MandADiscoverySuite.exe\")",
      "Bash(\"./bin/Release/net6.0-windows/MandADiscoverySuite.exe\")",
      "Bash(./apphost.exe)",
      "Bash(Start-Process \"dotnet\" -ArgumentList \"run --configuration Release\" -PassThru)",
      "Bash(dotnet publish:*)",
      "Bash(\"./apphost.exe\")",
      "Bash(Start-Process \"GUI/bin/Release/net6.0-windows/MandADiscoverySuite.exe\" -PassThru)",
      "Bash(pkill:*)",
      "Bash(msbuild:*)",
      "Bash(Start-Sleep 120)",
      "Bash(del:*)",
      "Bash(Start-Process \"C:\\EnterpriseDiscovery\\MandADiscoverySuite.exe\" -PassThru)",
      "Bash(dotnet nuget locals:*)",
      "Bash(dotnet --version)",
      "Bash(dotnet publish:*)",
      "Bash(tasklist:*)",
      "Bash(Get-Content \"C:\\DiscoveryData\\ljpops\\Logs\\MandADiscovery_20250811_160653.log\" -Tail 20)",
      "Bash(Get-Content \"C:\\DiscoveryData\\ljpops\\Logs\\MandADiscovery_20250811_175821.log\" -Tail 20)",
      "Bash(Start-Process \"C:\\enterprisediscovery\\net6.0-windows\\MandADiscoverySuite.exe\" -PassThru)",
      "Bash(Start-Process \"MandADiscoverySuite.exe\" -PassThru)",
      "Bash(cmd.exe /c \"dir C:\\DiscoveryData\\ljpops\\Logs\\*.log /od\")",
      "Bash(cmd.exe:*)",
      "Bash(Start-Process \"C:\\enterprisediscovery\\MandADiscoverySuite.exe\" -PassThru)",
      "Bash(Test-Path \"C:\\EnterpriseDiscovery\\Scripts\\DiscoveryModuleLauncher.ps1\")",
      "Bash(Start-Sleep 15)",
      "Bash(Start-Process \"C:\\enterprisediscovery\\MandADiscoverySuite.exe\" -WindowStyle Normal)",
      "Bash(Start-Sleep 10)",
      "Bash(Get-Content \"C:\\DiscoveryData\\ljpops\\Logs\\MandADiscovery_20250811_235008.log\" -Tail 50)",
      "Bash(Start-Sleep 30)",
      "Bash(Get-Content \"C:\\DiscoveryData\\ljpops\\Logs\\Application\\app_log_20250812.json\" -Tail 20)",
      "Bash(Sleep 5)",
      "Bash(Start-Sleep 5)",
      "Bash(Start-Sleep 3)",
      "Bash(if exist \"D:\\Scripts\\UserMandA\\GUI\\bin\" rmdir /s /q \"D:\\Scripts\\UserMandA\\GUI\\bin\")",
      "Bash(Start-Process \"C:/enterprisediscovery/net6.0-windows/MandADiscoverySuite.exe\" -WindowStyle Normal)",
      "Bash(\"C:/enterprisediscovery/net6.0-windows/MandADiscoverySuite.exe\")",
      "Bash(if exist \"bin\" rmdir /s /q \"bin\")",
      "Bash(if exist \"obj\" rmdir /s /q \"obj\")",
      "Bash(if exist \"D:\\Scripts\\UserMandA\\GUI\\obj\" rmdir /s /q \"D:\\Scripts\\UserMandA\\GUI\\obj\")",
      "Bash(move:*)",
      "Bash(Start-Process \"./obj/apphost.exe\" -WindowStyle Normal)",
      "Bash(\"./MandADiscoverySuite.exe\")",
      "Bash(for:*)",
      "Bash(do mv \"$file\" \"$file.disabled\")",
      "Bash(test:*)",
      "Bash(if exist \"Modules\" rmdir /s /q \"Modules\")",
      "Bash(if [ -f \"MandADiscoverySuite.xaml.cs.disabled\" ])",
      "Bash(then mv \"MandADiscoverySuite.xaml.cs.disabled\" \"MandADiscoverySuite.xaml.cs\")",
      "Bash(Get-Content \"C:\\DiscoveryData\\ljpops\\Logs\\MandADiscovery_20250815_155053.log\" -Tail 50)",
      "Bash(Start-Process \"D:\\Scripts\\UserMandA-1\\GUI\\bin\\Release\\net6.0-windows\\MandADiscoverySuite.exe\" -WindowStyle Normal)",
      "Bash(Get-Content \"C:\\DiscoveryData\\ljpops\\Logs\\MandADiscovery_20250815_170117.log\" -Tail 50)",
      "Bash(Test-Path \"D:\\Scripts\\UserMandA\\Modules\\Core\\CompanyProfileManager.psm1\")",
      "Bash(Get-Process MandADiscoverySuite -ErrorAction SilentlyContinue)",
      "Bash(Sleep 10)",
      "Bash(Sleep 15)",
      "Bash(\".\\MandADiscoverySuite.exe\")",
      "Bash(Get-Content \"C:\\DiscoveryData\\ljpops\\Logs\\MandADiscovery_20250816_113033.log\" -Tail 20)",
      "Bash(Sleep 3)",
      "Bash(Get-Content \"C:\\DiscoveryData\\ljpops\\Logs\\MandADiscovery_*.log\" -Tail 50 -Wait)",
      "Bash(Test-Path \"C:\\enterprisediscovery\\Scripts\\DiscoveryCreateAppRegistration.ps1\")",
      "Bash(Get-Content \"C:\\DiscoveryData\\ljpops\\Logs\\MandADiscovery_*.log\" -Tail 20)",
      "Bash(Get-Content \"C:\\DiscoveryData\\ljpops\\Logs\\MandADiscovery_20250816_175100.log\" -Wait -Tail 0)",
      "Bash(if [ ! -f \"$cs\" ])",
      "Bash(then echo \"Missing: $cs\")",
      "mcp__ide__getDiagnostics",
      "Bash(touch:*)",
      "Bash(awk:*)",
      "Bash(Start-Process \"MandADiscoverySuite.exe\" -WindowStyle Normal)",
      "Bash(Get-Content \"C:\\DiscoveryData\\ljpops\\Logs\\gui-clicks.log\" -Tail 20)",
      "Bash(Get-Content \"C:\\DiscoveryData\\ljpops\\Logs\\gui-debug.log\" -Tail 10)",
      "Bash(Test-Path \"C:\\DiscoveryData\\ljpops\\Logs\\gui-binding.log\")",
      "Bash(do echo \"=== $file ===\")",
      "Bash(Get-Content \"gui-clicks.log\" -Tail 10)",
      "Bash(Test-Path \"C:\\enterprisediscovery\\Configuration\\ModuleRegistry.json\")",
      "Bash(Get-Content \"C:\\DiscoveryData\\ljpops\\Logs\\Application\\app_log_20250818.json\" -Tail 20)",
      "Bash(if exist \"C:\\enterprisediscovery\\MandADiscoverySuite.exe\" del \"C:\\enterprisediscovery\\MandADiscoverySuite.exe\")",
      "Bash(Get-Content \"C:\\DiscoveryData\\ljpops\\Logs\\Application\\app_log_20250818.json\" -Tail 10)",
      "Bash(\"./GUI/bin/Debug/net6.0-windows/MandADiscoverySuite.exe\")",
      "Bash(Get-Process -Name \"*MandA*\" -ErrorAction SilentlyContinue)",
      "Bash(Remove-Item -Path \"bin\" -Recurse -Force -ErrorAction SilentlyContinue)",
      "Bash(Remove-Item -Path \"obj\" -Recurse -Force -ErrorAction SilentlyContinue)",
      "Bash(Get-Process -Name \"MandADiscoverySuite\" -ErrorAction SilentlyContinue)",
      "Bash(wevtutil qe:*)",
      "Bash(wmic process:*)",
      "Bash(Start-Process \".\\MandADiscoverySuite.exe\" -PassThru)",
      "Bash(Start-Process -FilePath \"C:\\EnterpriseDiscovery\\MandADiscoverySuite.exe\" -WorkingDirectory \"C:\\EnterpriseDiscovery\")",
      "Bash(Start-Process \"MandADiscoverySuite.exe\")",
      "Bash(Copy-Item \"D:\\Scripts\\UserMandA\\TestData\\Users.csv\" \"C:\\discoverydata\\ljpops\\Raw\\Users.csv\" -Force)",
      "Bash(Start-Process -FilePath \".\\MandADiscoverySuite.exe\" -NoNewWindow)",
      "Bash(Get-Date -Format \"yyyy-MM-dd HH:mm:ss\")",
      "Bash(Start-Process -FilePath \".\\MandADiscoverySuite.exe\" -WindowStyle Normal)",
      "Bash(Start-Process \"MandADiscoverySuite.exe\" -Wait)",
      "Bash(Start-Process \".\\MandADiscoverySuite.exe\" -WindowStyle Normal)",
      "Bash(Get-Content \"C:\\DiscoveryData\\ljpops\\Logs\\MandADiscovery_20250821_000042.log\" -Tail 20)",
      "Bash(Start-Process \"MandADiscoverySuite.exe\" -Wait:$false)",
      "Bash(Start-Process \"GUI/bin/Debug/net6.0-windows/MandADiscoverySuite.exe\" -PassThru)",
      "Bash(git commit:*)",
      "Bash(Start-Process \".\\bin\\Debug\\net6.0-windows\\MandADiscoverySuite.exe\" -WindowStyle Normal)",
      "Bash(Start-Process \"D:\\Scripts\\UserMandA\\GUI\\bin\\Debug\\net6.0-windows\\MandADiscoverySuite.exe\" -WindowStyle Normal)",
      "Bash(\"D:\\Scripts\\UserMandA\\GUI\\bin\\Debug\\net6.0-windows\\MandADiscoverySuite.exe\")",
      "Bash(./Start-FullValidationSuite.ps1)",
      "Bash(Get-Content \"D:\\Scripts\\UserMandA\\performance_alerts.log\" -Tail 20)",
      "Bash(do if [ -f \"$file\" ])",
      "Bash(then mv \"$file\" \"$file.disabled\")",
      "Bash(Start-Process \"D:\\Scripts\\UserMandA\\GUI\\bin\\Debug\\net6.0-windows\\MandADiscoverySuite.exe\" -PassThru)",
      "Bash(Get-Content \"C:\\DiscoveryData\\ljpops\\Logs\\MandADiscovery_20250822_105111.log\" -Tail 30)",
      "Bash(then mv \"$file\" \"$file%%.disabled\")",
      "Bash(then mv \"$file\" \"$file.disabled2\")",
      "Bash(Get-Content \"C:\\DiscoveryData\\ljpops\\Logs\\MandADiscovery_20250822_122110.log\" -Tail 20)",
      "Bash(Get-Content \"C:\\DiscoveryData\\ljpops\\Logs\\MandADiscovery_20250822_203726.log\" -Tail 10)",
      "Bash(dotnet test:*)",
      "Bash(\"./bin/Debug/net6.0-windows/MandADiscoverySuite.exe\")",
      "Bash(PowerShell:*)",
      "Bash(Get-Content \"C:\\DiscoveryData\\ljpops\\Logs\\MandADiscovery_20250823_082257.log\" -Tail 20)",
      "Bash(Sleep 2)",
      "Bash(Set-Location \"D:\\Scripts\\UserMandA\")",
      "Bash(Test-Path \".\\Modules\\Migration\\UserMigration.psm1\")",
      "Bash(Get-Date)",
      "Bash(Start-Process \"bin/Debug/net6.0-windows/MandADiscoverySuite.exe\" -PassThru)",
      "Bash(Start-Process -FilePath \".\\bin\\Debug\\net6.0-windows\\MandADiscoverySuite.exe\" -WindowStyle Normal)",
      "Bash(New-Item -Path \"D:\\Scripts\\UserMandA\\Test-PlatformPerformance.ps1\" -ItemType File -Force)",
      "Bash(rsync:*)",
      "Read(/D:\\mnt\\c/**)",
      "Bash(./GUI/bin/Debug/net6.0-windows/MandADiscoverySuite.exe)",
      "Read(/C:\\/**)",
      "Bash(/dev/null)",
      "Read(/C:\\/**)",
      "Read(/C:\\DiscoveryData\\ljpops\\Logs/**)",
      "Read(/C:\\DiscoveryData\\ljpops\\Logs/**)",
      "Read(/C:\\/**)",
      "Bash(MandADiscoverySuite.exe --help)",
      "Read(/C:\\discoverydata/**)",
      "Read(/C:\\DiscoveryData/**)",
      "Read(/C:\\DiscoveryData/**)",
      "Read(/c:\\discoverydata/**)",
      "Bash(.ScriptsBuild-GUI.ps1)",
      "Read(/C:\\DiscoveryData\\ljpops\\Logs/**)",
      "Read(/C:\\DiscoveryData\\ljpops\\Logs/**)",
      "Read(/C:\\DiscoveryData\\ljpops\\Logs/**)",
      "Read(/C:\\DiscoveryData\\ljpops\\Logs/**)",
      "Read(/C:\\DiscoveryData\\ljpops\\Logs/**)",
      "Read(/C:\\DiscoveryData\\ljpops\\Logs/**)",
      "Bash(do echo \"Updating $file\")",
      "Read(/C:\\/**)",
      "Bash(@claude-sonnet-4 --agent=\"architecture-lead\" --task=\"T-027 Real Migration Engine Design\" --input=\"\n\n## T-027: Real Migration Engine Architecture Design\n\n**Context from Previous Tasks:**\n- T-015: Target Domain Bridge provides Source/Target infrastructure with app registration flow and provider abstraction\n- T-023: PowerShell integration enables script execution via DiscoveryModuleLauncher\n- T-021: Path standardization provides consistent data management via ConfigurationService\n- LogicEngineService (from T-010) provides unified data projections and dependency inference\n\n**Architecture Requirements:**\n1. **Migration Provider Interfaces** - Define contracts for each migration type:\n   - IIdentityMigrator: User accounts, groups, SID history, attributes\n   - IMailMigrator: Mailboxes, archive data, forwarding rules\n   - IFileMigrator: File shares, NTFS ACLs, content preservation  \n   - ISqlMigrator: Databases, schemas, permissions, connection strings\n\n2. **Dependency Management** - Handle migration ordering and relationships:\n   - SID history maintenance across identity moves\n   - Group membership recreation before user migration  \n   - File ACL recreation after identity migration\n   - Database ownership mapping after user migration\n\n3. **Workflow Orchestration** - Coordinate complex migrations:\n   - Wave-based migration with dependency ordering\n   - Progress tracking and status management\n   - Error handling and retry mechanisms\n   - Rollback capabilities for failed migrations\n\n4. **Integration Points** - Leverage existing infrastructure:\n   - Source/Target bridge from T-015 for credential management\n   - LogicEngineService projections for dependency discovery\n   - PowerShell execution for migration scripts\n   - Audit logging for compliance and troubleshooting\n\n5. **Concrete Implementation Strategy** - Use proven technologies:\n   - PowerShell for AD/Exchange/File operations\n   - Microsoft Graph API for cloud operations\n   - SMB/WinRM for file system operations\n   - SQL libraries for database operations\n\n**Success Criteria:**\n- Define clear provider interfaces with dependency handling\n- Specify workflow orchestration with wave-based execution\n- Design progress tracking and error handling patterns\n- Integrate with existing Source/Target infrastructure\n- Enable audit logging and rollback capabilities\n\nPlease analyze the existing codebase architecture and design the migration engine interfaces and workflows.\")",
      "Bash(echo:*)",
      "Read(/C:\\discoverydata\\ljpops/**)",
      "Read(/D:\\/**)",
      "Read(/D:\\c/**)",
      "Read(/D:\\c\\EnterpriseDiscovery/**)",
      "Read(/D:\\d C:\\enterprisediscovery/**)",
      "Read(/d:\\Scripts\\UserMandA/**)",
      "Read(/d:\\Scripts\\UserMandA/**)",
      "Bash(Start-Process \".\\bin\\Debug\\net6.0-windows\\MandADiscoverySuite.exe\" -PassThru)",
      "Bash(./bin/Debug/net6.0-windows/MandADiscoverySuite.exe)",
      "Read(/D:\\c\\discoverydata\\ljpops/**)",
      "Read(/C:\\discoverydata\\ljpops\\RawData/**)",
      "Bash(Start-Process -FilePath \".\\MandADiscoverySuite.exe\" -PassThru)",
      "Read(/D:\\mnt\\c\\enterprisediscovery/**)",
      "Read(/D:\\c\\enterprisediscovery/**)",
      "Bash(do mv $viewView.xaml $viewViewOld.xaml)",
      "Bash(cd:*)",
      "Bash(git push:*)",
      "Bash(git gc:*)",
      "Bash(git stash:*)",
      "Bash(git branch:*)",
      "Bash(git remote:*)",
      "Read(C:\\discoverydata/**)",
      "Read(C:\\discoverydata\\ljpops\\RawData/**)",
      "Read(C:\\discoverydata\\ljpops\\RawData/**)",
      "Read(C:\\discoverydata\\ljpops\\RawData/**)",
      "Read(C:\\discoverydata\\ljpops\\RawData/**)",
      "Read(D:\\d\\Scripts\\UserMandA/**)",
      "Read(D:\\d\\Scripts\\UserMandA\\GUI/**)",
      "Read(C:\\discoverydata\\ljpops\\RawData/**)",
      "Read(C:\\discoverydata/**)",
      "Read(C:\\discoverydata\\ljpops/**)",
      "Read(C:\\discoverydata\\ljpops/**)",
      "Bash(Remove-Item \"Test-T023-*.ps1\" -Force)",
      "Read(C:\\discoverydata/**)"
    ],
    "deny": [],
    "defaultMode": "acceptEdits",
    "additionalDirectories": [
      "C:\\enterprisediscovery",
      "D:\\d\\Scripts\\UserMandA-1",
      "C:\\discoverydata\\ljpops\\Raw",
      "C:\\discoverydata\\ljpops\\Logs",
      "D:\\d D:\\Scripts\\UserMandA",
      "C:\\EnterpriseDiscovery",
      "D:\\d\\Scripts",
      "D:\\c\\enterprisediscovery",
      "D:\\c\\discoverydata\\ljpops",
      "C:\\",
      "D:\\c\\DiscoveryData\\ljpops\\Logs",
      "D:\\",
      "D:\\d\\Scripts\\UserMandA\\GUI",
      "D:\\c\\EnterpriseDiscovery",
      "D:\\c"
    ]
  }
}