<UserControl x:Class="MandADiscoverySuite.Views.DashboardView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             mc:Ignorable="d" 
             d:DesignHeight="600" d:DesignWidth="800"
             Background="{DynamicResource BackgroundBrush}">
    
    <UserControl.Resources>
        <BooleanToVisibilityConverter x:Key="BoolToVisibilityConverter"/>
        
        <!-- Dashboard Card Style -->
        <Style x:Key="DashboardCardStyle" TargetType="Border">
            <Setter Property="Background" Value="{DynamicResource CardBrush}"/>
            <Setter Property="CornerRadius" Value="8"/>
            <Setter Property="BorderBrush" Value="{DynamicResource BorderBrush}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="24"/>
            <Setter Property="Margin" Value="8"/>
        </Style>
        
        <!-- Stat Number Style -->
        <Style x:Key="StatNumberStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="36"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Foreground" Value="{DynamicResource AccentBrush}"/>
            <Setter Property="HorizontalAlignment" Value="Center"/>
        </Style>
        
        <!-- Stat Label Style -->
        <Style x:Key="StatLabelStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Foreground" Value="{DynamicResource SecondaryTextBrush}"/>
            <Setter Property="HorizontalAlignment" Value="Center"/>
            <Setter Property="Margin" Value="0,8,0,0"/>
        </Style>
    </UserControl.Resources>
    
    <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
        <Grid Margin="32">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>
            
            <!-- Header -->
            <Border Grid.Row="0" Background="{DynamicResource SurfaceBrush}" CornerRadius="8" Padding="24" Margin="0,0,0,24">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <StackPanel Grid.Column="0">
                        <TextBlock Text="ðŸ“Š M&amp;A Discovery Dashboard"
                                  FontSize="32"
                                  FontWeight="Bold"
                                  Foreground="{DynamicResource ForegroundBrush}"
                                  Margin="0,0,0,8"/>
                        <TextBlock Text="Real-time project status and discovered IT infrastructure overview"
                                  FontSize="16"
                                  Foreground="{DynamicResource SecondaryTextBrush}"/>
                    </StackPanel>

                    <StackPanel Grid.Column="1" Orientation="Horizontal">
                        <Button Content="ðŸ”„ Refresh"
                                Command="{Binding RefreshDashboardCommand}"
                                Style="{DynamicResource ModernButtonStyle}"
                                Background="{DynamicResource AccentBrush}"
                                Foreground="{DynamicResource WhiteBrush}"
                                Padding="12,6" Margin="0,0,8,0"
                                ToolTip="Refresh dashboard statistics"/>
                        <Button Content="ðŸ“Š Reports"
                                Command="{Binding OpenReportsCommand}"
                                Style="{DynamicResource ModernButtonStyle}"
                                Background="{DynamicResource SecondaryBrush}"
                                Foreground="{DynamicResource ForegroundBrush}"
                                Padding="12,6"
                                ToolTip="View detailed reports"/>
                    </StackPanel>
                </Grid>
            </Border>
            
            <!-- Loading Indicator -->
            <Border Grid.Row="1" 
                    Background="{DynamicResource SurfaceBrush}" 
                    CornerRadius="8" 
                    Padding="16" 
                    Margin="0,0,0,24"
                    Visibility="{Binding IsLoading, Converter={StaticResource BoolToVisibilityConverter}}">
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                    <TextBlock Text="ðŸ”„" FontSize="16" Margin="0,0,8,0" VerticalAlignment="Center"/>
                    <TextBlock Text="Loading dashboard statistics..." 
                              FontSize="14" 
                              Foreground="{DynamicResource ForegroundBrush}" 
                              VerticalAlignment="Center"/>
                </StackPanel>
            </Border>
            
            <!-- Main Content Grid -->
            <Grid Grid.Row="2">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="2*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                
                <!-- Left Side - Statistics Grid -->
                <Grid Grid.Column="0" Margin="0,0,16,0">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                
                <!-- Top Row Statistics -->
                <UniformGrid Grid.Row="0" Columns="3" Margin="0,0,0,16">
                    
                    <!-- Users Card -->
                    <Border Style="{DynamicResource DashboardCardStyle}" Cursor="Hand"
                            ToolTip="Click to view user details">
                        <Border.InputBindings>
                            <MouseBinding MouseAction="LeftClick" Command="{Binding NavigateToUsersCommand}"/>
                        </Border.InputBindings>
                        <StackPanel>
                            <TextBlock Text="ðŸ‘¥" FontSize="24" HorizontalAlignment="Center" Margin="0,0,0,8"/>
                            <TextBlock Text="{Binding TotalUsers, StringFormat=N0}" Style="{DynamicResource StatNumberStyle}"/>
                            <TextBlock Text="Active Users" Style="{DynamicResource StatLabelStyle}"/>
                            <TextBlock Text="{Binding UsersChangeText}" FontSize="12"
                                       Foreground="{DynamicResource SuccessBrush}"
                                       HorizontalAlignment="Center" Margin="0,4,0,0"/>
                        </StackPanel>
                    </Border>
                    
                    <!-- Computers Card -->
                    <Border Style="{DynamicResource DashboardCardStyle}" Cursor="Hand"
                            ToolTip="Click to view infrastructure details">
                        <Border.InputBindings>
                            <MouseBinding MouseAction="LeftClick" Command="{Binding NavigateToInfrastructureCommand}"/>
                        </Border.InputBindings>
                        <StackPanel>
                            <TextBlock Text="ðŸ’»" FontSize="24" HorizontalAlignment="Center" Margin="0,0,0,8"/>
                            <TextBlock Text="{Binding TotalComputers, StringFormat=N0}" Style="{DynamicResource StatNumberStyle}"/>
                            <TextBlock Text="Managed Devices" Style="{DynamicResource StatLabelStyle}"/>
                            <TextBlock Text="{Binding ComputersChangeText}" FontSize="12"
                                       Foreground="{DynamicResource SuccessBrush}"
                                       HorizontalAlignment="Center" Margin="0,4,0,0"/>
                        </StackPanel>
                    </Border>
                    
                    <!-- Applications Card -->
                    <Border Style="{DynamicResource DashboardCardStyle}" Cursor="Hand"
                            ToolTip="Click to view application inventory">
                        <Border.InputBindings>
                            <MouseBinding MouseAction="LeftClick" Command="{Binding NavigateToApplicationsCommand}"/>
                        </Border.InputBindings>
                        <StackPanel>
                            <TextBlock Text="ðŸ“±" FontSize="24" HorizontalAlignment="Center" Margin="0,0,0,8"/>
                            <TextBlock Text="{Binding TotalApplications, StringFormat=N0}" Style="{DynamicResource StatNumberStyle}"/>
                            <TextBlock Text="Applications" Style="{DynamicResource StatLabelStyle}"/>
                            <TextBlock Text="{Binding ApplicationsChangeText}" FontSize="12"
                                       Foreground="{DynamicResource SuccessBrush}"
                                       HorizontalAlignment="Center" Margin="0,4,0,0"/>
                        </StackPanel>
                    </Border>
                    
                </UniformGrid>
                
                <!-- Bottom Row Statistics -->
                <UniformGrid Grid.Row="1" Columns="3">
                    
                    <!-- Groups Card -->
                    <Border Style="{DynamicResource DashboardCardStyle}" Cursor="Hand"
                            ToolTip="Click to view security groups">
                        <Border.InputBindings>
                            <MouseBinding MouseAction="LeftClick" Command="{Binding NavigateToGroupsCommand}"/>
                        </Border.InputBindings>
                        <StackPanel>
                            <TextBlock Text="ðŸ”" FontSize="24" HorizontalAlignment="Center" Margin="0,0,0,8"/>
                            <TextBlock Text="{Binding TotalGroups, StringFormat=N0}" Style="{DynamicResource StatNumberStyle}"/>
                            <TextBlock Text="Security Groups" Style="{DynamicResource StatLabelStyle}"/>
                            <TextBlock Text="{Binding GroupsChangeText}" FontSize="12"
                                       Foreground="{DynamicResource SuccessBrush}"
                                       HorizontalAlignment="Center" Margin="0,4,0,0"/>
                        </StackPanel>
                    </Border>
                    
                    <!-- File Servers Card -->
                    <Border Style="{DynamicResource DashboardCardStyle}" Cursor="Hand"
                            ToolTip="Click to view file server infrastructure">
                        <Border.InputBindings>
                            <MouseBinding MouseAction="LeftClick" Command="{Binding NavigateToInfrastructureCommand}"/>
                        </Border.InputBindings>
                        <StackPanel>
                            <TextBlock Text="ðŸ“" FontSize="24" HorizontalAlignment="Center" Margin="0,0,0,8"/>
                            <TextBlock Text="{Binding TotalFileServers, StringFormat=N0}" Style="{DynamicResource StatNumberStyle}"/>
                            <TextBlock Text="File Servers" Style="{DynamicResource StatLabelStyle}"/>
                            <TextBlock Text="{Binding FileServersChangeText}" FontSize="12"
                                       Foreground="{DynamicResource SuccessBrush}"
                                       HorizontalAlignment="Center" Margin="0,4,0,0"/>
                        </StackPanel>
                    </Border>
                    
                    <!-- Databases Card -->
                    <Border Style="{DynamicResource DashboardCardStyle}" Cursor="Hand"
                            ToolTip="Click to view database infrastructure">
                        <Border.InputBindings>
                            <MouseBinding MouseAction="LeftClick" Command="{Binding NavigateToInfrastructureCommand}"/>
                        </Border.InputBindings>
                        <StackPanel>
                            <TextBlock Text="ðŸ—„ï¸" FontSize="24" HorizontalAlignment="Center" Margin="0,0,0,8"/>
                            <TextBlock Text="{Binding TotalDatabases, StringFormat=N0}" Style="{DynamicResource StatNumberStyle}"/>
                            <TextBlock Text="Database Systems" Style="{DynamicResource StatLabelStyle}"/>
                            <TextBlock Text="{Binding DatabasesChangeText}" FontSize="12"
                                       Foreground="{DynamicResource SuccessBrush}"
                                       HorizontalAlignment="Center" Margin="0,4,0,0"/>
                        </StackPanel>
                    </Border>
                    
                </UniformGrid>
                
                </Grid>
                
                <!-- Right Side - Project Status & Quick Actions Widget -->
                <StackPanel Grid.Column="1">
                    <!-- Project Countdown Widget -->
                    <Border Background="{DynamicResource SurfaceBrush}" CornerRadius="8" Padding="24" Margin="0,0,0,16">
                        <StackPanel>
                            <TextBlock Text="ðŸ“… Project Timeline" FontSize="18" FontWeight="SemiBold"
                                       Foreground="{DynamicResource ForegroundBrush}" Margin="0,0,0,16"/>

                            <TextBlock Text="{Binding ProjectName, FallbackValue='Configure Project'}" FontSize="16" FontWeight="Bold"
                                       Foreground="{DynamicResource AccentBrush}" Margin="0,0,0,12"/>

                            <StackPanel Margin="0,0,0,8">
                                <TextBlock Text="Target Cutover" FontSize="12" Foreground="{DynamicResource SecondaryTextBrush}"/>
                                <TextBlock Text="{Binding DaysToCutover.Days, FallbackValue='--'}" FontSize="24" FontWeight="Bold"
                                           Foreground="{DynamicResource WarningBrush}"/>
                                <TextBlock Text="days remaining" FontSize="12" Foreground="{DynamicResource SecondaryTextBrush}"/>
                            </StackPanel>

                            <StackPanel Margin="0,0,0,16">
                                <TextBlock Text="Next Wave" FontSize="12" Foreground="{DynamicResource SecondaryTextBrush}"/>
                                <TextBlock Text="{Binding DaysToNextWave.Days, FallbackValue='--'}" FontSize="20" FontWeight="Bold"
                                           Foreground="{DynamicResource SuccessBrush}"/>
                                <TextBlock Text="days remaining" FontSize="12" Foreground="{DynamicResource SecondaryTextBrush}"/>
                            </StackPanel>

                            <Button Content="âš™ï¸ Configure Project" Command="{Binding ConfigureProjectCommand}"
                                    Background="{DynamicResource AccentBrush}" Foreground="{DynamicResource WhiteBrush}" BorderThickness="0"
                                    Padding="12,6" HorizontalAlignment="Stretch"
                                    Style="{DynamicResource ModernButtonStyle}"
                                    ToolTip="Configure project settings and timeline"
                                    TabIndex="1"/>
                        </StackPanel>
                    </Border>

                    <!-- Quick Actions Widget -->
                    <Border Background="{DynamicResource SurfaceBrush}" CornerRadius="8" Padding="24">
                        <StackPanel>
                            <TextBlock Text="âš¡ Quick Actions" FontSize="18" FontWeight="SemiBold"
                                       Foreground="{DynamicResource ForegroundBrush}" Margin="0,0,0,16"/>

                            <Button Content="ðŸ” Start Discovery" Command="{Binding StartDiscoveryCommand}"
                                    Background="{DynamicResource SuccessBrush}" Foreground="{DynamicResource WhiteBrush}" BorderThickness="0"
                                    Padding="12,6" Margin="0,0,0,8" HorizontalAlignment="Stretch"
                                    Style="{DynamicResource ModernButtonStyle}"
                                    ToolTip="Launch domain discovery modules"/>

                            <Button Content="ðŸ“Š Generate Report" Command="{Binding GenerateReportCommand}"
                                    Background="{DynamicResource SecondaryBrush}" Foreground="{DynamicResource ForegroundBrush}" BorderThickness="0"
                                    Padding="12,6" Margin="0,0,0,8" HorizontalAlignment="Stretch"
                                    Style="{DynamicResource ModernButtonStyle}"
                                    ToolTip="Generate comprehensive discovery report"/>

                            <Button Content="ðŸš€ Migration Planning" Command="{Binding OpenMigrationPlanningCommand}"
                                    Background="{DynamicResource WarningBrush}" Foreground="{DynamicResource WhiteBrush}" BorderThickness="0"
                                    Padding="12,6" HorizontalAlignment="Stretch"
                                    Style="{DynamicResource ModernButtonStyle}"
                                    ToolTip="Access migration planning tools"/>
                        </StackPanel>
                    </Border>
                </StackPanel>
                
            </Grid>
        </Grid>
    </ScrollViewer>
</UserControl>