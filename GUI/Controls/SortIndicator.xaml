<UserControl x:Class="MandADiscoverySuite.Controls.SortIndicator"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             x:Name="SortIndicatorControl">
    
    <Grid x:Name="IndicatorGrid">
        
        <!-- Ascending Sort Indicator -->
        <Path x:Name="AscendingIndicator"
              Width="10" Height="8"
              Fill="{Binding SortColor, ElementName=SortIndicatorControl}"
              Data="M5,0 L10,8 L0,8 Z"
              Visibility="{Binding IsAscending, ElementName=SortIndicatorControl, Converter={StaticResource BooleanToVisibilityConverter}}"
              VerticalAlignment="Center"
              HorizontalAlignment="Center">
            <Path.RenderTransform>
                <ScaleTransform x:Name="AscendingScale" ScaleX="1" ScaleY="1" CenterX="5" CenterY="4"/>
            </Path.RenderTransform>
        </Path>
        
        <!-- Descending Sort Indicator -->
        <Path x:Name="DescendingIndicator"
              Width="10" Height="8"
              Fill="{Binding SortColor, ElementName=SortIndicatorControl}"
              Data="M0,0 L10,0 L5,8 Z"
              Visibility="{Binding IsDescending, ElementName=SortIndicatorControl, Converter={StaticResource BooleanToVisibilityConverter}}"
              VerticalAlignment="Center"
              HorizontalAlignment="Center">
            <Path.RenderTransform>
                <ScaleTransform x:Name="DescendingScale" ScaleX="1" ScaleY="1" CenterX="5" CenterY="4"/>
            </Path.RenderTransform>
        </Path>
        
        <!-- Multi-sort Order Number -->
        <Border x:Name="SortOrderBadge"
                Background="#FF2196F3"
                CornerRadius="8"
                MinWidth="16"
                MinHeight="16"
                Visibility="{Binding ShowSortOrder, ElementName=SortIndicatorControl, Converter={StaticResource BooleanToVisibilityConverter}}"
                HorizontalAlignment="Right"
                VerticalAlignment="Top"
                Margin="-8,-8,0,0">
            
            <TextBlock Text="{Binding SortOrder, ElementName=SortIndicatorControl}"
                       FontSize="9"
                       FontWeight="Bold"
                       Foreground="White"
                       HorizontalAlignment="Center"
                       VerticalAlignment="Center"
                       Margin="2"/>
        </Border>
        
        <!-- No Sort Indicator (subtle dots) -->
        <StackPanel x:Name="NoSortIndicator"
                    Orientation="Vertical"
                    Visibility="{Binding IsUnsorted, ElementName=SortIndicatorControl, Converter={StaticResource BooleanToVisibilityConverter}}"
                    VerticalAlignment="Center"
                    HorizontalAlignment="Center"
                    Opacity="0.3">
            <Ellipse Width="2" Height="2" Fill="#666666" Margin="0,0,0,1"/>
            <Ellipse Width="2" Height="2" Fill="#666666" Margin="0,0,0,1"/>
            <Ellipse Width="2" Height="2" Fill="#666666"/>
        </StackPanel>
        
        <!-- Hover Effect -->
        <Rectangle x:Name="HoverOverlay"
                   Fill="Transparent"
                   Opacity="0">
            <Rectangle.Triggers>
                <EventTrigger RoutedEvent="MouseEnter">
                    <BeginStoryboard>
                        <Storyboard>
                            <DoubleAnimation Storyboard.TargetName="HoverOverlay"
                                           Storyboard.TargetProperty="Opacity"
                                           To="0.1" Duration="0:0:0.1"/>
                            <DoubleAnimation Storyboard.TargetName="AscendingScale"
                                           Storyboard.TargetProperty="ScaleX"
                                           To="1.2" Duration="0:0:0.1"/>
                            <DoubleAnimation Storyboard.TargetName="AscendingScale"
                                           Storyboard.TargetProperty="ScaleY"
                                           To="1.2" Duration="0:0:0.1"/>
                            <DoubleAnimation Storyboard.TargetName="DescendingScale"
                                           Storyboard.TargetProperty="ScaleX"
                                           To="1.2" Duration="0:0:0.1"/>
                            <DoubleAnimation Storyboard.TargetName="DescendingScale"
                                           Storyboard.TargetProperty="ScaleY"
                                           To="1.2" Duration="0:0:0.1"/>
                        </Storyboard>
                    </BeginStoryboard>
                </EventTrigger>
                <EventTrigger RoutedEvent="MouseLeave">
                    <BeginStoryboard>
                        <Storyboard>
                            <DoubleAnimation Storyboard.TargetName="HoverOverlay"
                                           Storyboard.TargetProperty="Opacity"
                                           To="0" Duration="0:0:0.1"/>
                            <DoubleAnimation Storyboard.TargetName="AscendingScale"
                                           Storyboard.TargetProperty="ScaleX"
                                           To="1.0" Duration="0:0:0.1"/>
                            <DoubleAnimation Storyboard.TargetName="AscendingScale"
                                           Storyboard.TargetProperty="ScaleY"
                                           To="1.0" Duration="0:0:0.1"/>
                            <DoubleAnimation Storyboard.TargetName="DescendingScale"
                                           Storyboard.TargetProperty="ScaleX"
                                           To="1.0" Duration="0:0:0.1"/>
                            <DoubleAnimation Storyboard.TargetName="DescendingScale"
                                           Storyboard.TargetProperty="ScaleY"
                                           To="1.0" Duration="0:0:0.1"/>
                        </Storyboard>
                    </BeginStoryboard>
                </EventTrigger>
            </Rectangle.Triggers>
        </Rectangle>
        
    </Grid>
</UserControl>