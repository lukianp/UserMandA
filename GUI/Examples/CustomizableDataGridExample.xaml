<UserControl x:Class="MandADiscoverySuite.Examples.CustomizableDataGridExample"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:behaviors="clr-namespace:MandADiscoverySuite.Behaviors"
             mc:Ignorable="d" 
             d:DesignHeight="600" d:DesignWidth="1000">

    <UserControl.Resources>
        <Style x:Key="CustomizableDataGridStyle" TargetType="DataGrid">
            <Setter Property="AutoGenerateColumns" Value="True"/>
            <Setter Property="CanUserAddRows" Value="False"/>
            <Setter Property="CanUserDeleteRows" Value="False"/>
            <Setter Property="IsReadOnly" Value="True"/>
            <Setter Property="GridLinesVisibility" Value="Horizontal"/>
            <Setter Property="HeadersVisibility" Value="Column"/>
            <Setter Property="SelectionMode" Value="Extended"/>
            <Setter Property="SelectionUnit" Value="FullRow"/>
            <Setter Property="AlternatingRowBackground" Value="#FFF8F8F8"/>
            <Setter Property="RowBackground" Value="White"/>
            <Setter Property="Background" Value="White"/>
            <Setter Property="BorderBrush" Value="#FFCCCCCC"/>
            <Setter Property="BorderThickness" Value="1"/>
        </Style>
    </UserControl.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Border Grid.Row="0" Background="#FF2D5A87" Padding="15">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <StackPanel Grid.Column="0">
                    <TextBlock Text="Customizable DataGrid Example" 
                               FontSize="18" FontWeight="Bold" Foreground="White"/>
                    <TextBlock Text="Right-click on column headers to customize columns" 
                               FontSize="12" Foreground="White" Opacity="0.9"/>
                </StackPanel>
                
                <Button Grid.Column="1" 
                        Content="Column Chooser..." 
                        Width="120" Height="30"
                        Click="ColumnChooserButton_Click"
                        Background="Transparent" 
                        BorderBrush="White" 
                        Foreground="White"/>
            </Grid>
        </Border>

        <!-- Main DataGrid -->
        <DataGrid Grid.Row="1" 
                  x:Name="MainDataGrid"
                  ItemsSource="{Binding SampleData}"
                  Style="{StaticResource CustomizableDataGridStyle}"
                  behaviors:DataGridColumnCustomizationBehavior.IsEnabled="True"
                  behaviors:DataGridColumnCustomizationBehavior.ViewName="SampleUsers"
                  Margin="10">
            
            <!-- Configure manually defined columns if needed -->
            <DataGrid.Columns>
                <!-- These will be overridden by the behavior based on configuration -->
            </DataGrid.Columns>
        </DataGrid>

        <!-- Status and Help -->
        <Grid Grid.Row="2" Margin="10,0,10,10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <StatusBar Grid.Column="0" Height="25">
                <StatusBarItem>
                    <TextBlock Text="{Binding SampleData.Count, StringFormat='{}{0} items'}"/>
                </StatusBarItem>
                <Separator/>
                <StatusBarItem>
                    <TextBlock Text="Column customization enabled"/>
                </StatusBarItem>
            </StatusBar>

            <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center">
                <TextBlock Text="Features:" FontWeight="Bold" Margin="0,0,10,0"/>
                <TextBlock Text="• Right-click headers" Margin="0,0,10,0"/>
                <TextBlock Text="• Drag to reorder" Margin="0,0,10,0"/>
                <TextBlock Text="• Save/Load configs"/>
            </StackPanel>
        </Grid>
    </Grid>
</UserControl>