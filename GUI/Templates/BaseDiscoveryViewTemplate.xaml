<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:local="clr-namespace:MandADiscoverySuite.GUI.Templates">

    <ControlTemplate x:Key="BaseDiscoveryViewTemplate" TargetType="UserControl">
        <Grid Margin="16">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Header Section with Icon, Title, and Total Records -->
            <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,16">
                <Image Source="{Binding ModuleIcon}" Width="32" Height="32" Margin="0,0,8,0" VerticalAlignment="Center"/>
                <TextBlock Text="{Binding ModuleTitle}" FontSize="20" FontWeight="SemiBold" VerticalAlignment="Center"/>
                <TextBlock Text="{Binding TotalRecords, StringFormat=' ({0} records)'}" FontSize="16" Foreground="Gray" VerticalAlignment="Center" Margin="16,0,0,0"/>
            </StackPanel>

            <!-- Summary Cards Region -->
            <ContentPresenter x:Name="SummaryCardsPresenter" Grid.Row="1" Content="{TemplateBinding Content}" ContentTemplate="{StaticResource SummaryCardsTemplate}"/>

            <!-- Toolbar Region -->
            <ContentPresenter x:Name="ToolbarPresenter" Grid.Row="2" Content="{TemplateBinding Content}" ContentTemplate="{StaticResource ToolbarTemplate}" Margin="0,0,0,16"/>

            <!-- Main Content Grid -->
            <ContentPresenter x:Name="MainContentPresenter" Grid.Row="3" Content="{TemplateBinding Content}" ContentTemplate="{StaticResource MainContentTemplate}"/>

            <!-- Footer Region -->
            <ContentPresenter x:Name="FooterPresenter" Grid.Row="4" Content="{TemplateBinding Content}" ContentTemplate="{StaticResource FooterTemplate}" Margin="0,16,0,0"/>
        </Grid>

        <ControlTemplate.Triggers>
            <!-- Add triggers if needed for different states -->
        </ControlTemplate.Triggers>
    </ControlTemplate>

    <!-- DataTemplates for customizable regions -->
    <DataTemplate x:Key="SummaryCardsTemplate">
        <UniformGrid Columns="4" Margin="0,0,0,16">
            <!-- Default summary cards implementation -->
            <Border Background="#FFF8FAFC" BorderBrush="#FFE2E8F0" BorderThickness="1" Padding="16" Margin="4">
                <StackPanel>
                    <TextBlock Text="Total Items" FontWeight="Bold" FontSize="14"/>
                    <TextBlock Text="{Binding TotalRecords}" FontSize="24" FontWeight="SemiBold"/>
                </StackPanel>
            </Border>
            <Border Background="#FFF8FAFC" BorderBrush="#FFE2E8F0" BorderThickness="1" Padding="16" Margin="4">
                <StackPanel>
                    <TextBlock Text="Active Items" FontWeight="Bold" FontSize="14"/>
                    <TextBlock Text="{Binding ActiveRecords}" FontSize="24" FontWeight="SemiBold"/>
                </StackPanel>
            </Border>
            <Border Background="#FFF8FAFC" BorderBrush="#FFE2E8F0" BorderThickness="1" Padding="16" Margin="4">
                <StackPanel>
                    <TextBlock Text="Last Updated" FontWeight="Bold" FontSize="14"/>
                    <TextBlock Text="{Binding LastUpdated, StringFormat='{}{0:MM/dd/yyyy}'}" FontSize="16" FontWeight="SemiBold"/>
                </StackPanel>
            </Border>
            <Border Background="#FFF8FAFC" BorderBrush="#FFE2E8F0" BorderThickness="1" Padding="16" Margin="4">
                <StackPanel>
                    <TextBlock Text="Status" FontWeight="Bold" FontSize="14"/>
                    <TextBlock Text="{Binding DiscoveryStatus}" FontSize="16" FontWeight="SemiBold"/>
                </StackPanel>
            </Border>
        </UniformGrid>
    </DataTemplate>

    <DataTemplate x:Key="ToolbarTemplate">
        <ToolBar>
            <Button Content="Refresh" Padding="12,6" Margin="0,0,8,0"/>
            <Button Content="Export" Padding="12,6" Margin="0,0,8,0"/>
            <Button Content="Clear Filters" Padding="12,6"/>
        </ToolBar>
    </DataTemplate>

    <DataTemplate x:Key="MainContentTemplate">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="5"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <Border Grid.Column="0" Background="#FF1A202C" BorderBrush="#FFE2E8F0" BorderThickness="1">
                <TextBlock Text="DataGrid Placeholder" HorizontalAlignment="Center" VerticalAlignment="Center" Foreground="#FF4A5568"/>
            </Border>
            <GridSplitter Grid.Column="1" Width="5" Background="Gray" HorizontalAlignment="Stretch" ResizeBehavior="PreviousAndNext"/>
            <Border Grid.Column="2" Background="#FF1A202C" BorderBrush="#FFE2E8F0" BorderThickness="1">
                <TextBlock Text="Details Panel Placeholder" HorizontalAlignment="Center" VerticalAlignment="Center" Foreground="#FF4A5568"/>
            </Border>
        </Grid>
    </DataTemplate>

    <DataTemplate x:Key="FooterTemplate">
        <Border Background="#FF1A202C" Padding="16">
            <TextBlock Text="Footer/Empty State Placeholder" HorizontalAlignment="Center" VerticalAlignment="Center" Foreground="#FF4A5568"/>
        </Border>
    </DataTemplate>

</ResourceDictionary>