<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <!-- Custom Tooltip Style -->
    <Style x:Key="ModernTooltipStyle" TargetType="ToolTip">
        <Setter Property="Background" Value="{DynamicResource SurfaceBrush}"/>
        <Setter Property="BorderBrush" Value="{DynamicResource BorderBrush}"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="Foreground" Value="{DynamicResource ForegroundBrush}"/>
        <Setter Property="FontSize" Value="{StaticResource FontSizeMedium}"/>
        <Setter Property="FontFamily" Value="{StaticResource PrimaryFontFamily}"/>
        <Setter Property="Padding" Value="12,8"/>
        <Setter Property="MaxWidth" Value="300"/>
        <Setter Property="HasDropShadow" Value="True"/>
        <Setter Property="Placement" Value="Top"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ToolTip">
                    <Border x:Name="Border"
                            Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            CornerRadius="6"
                            Padding="{TemplateBinding Padding}">
                        
                        <Border.Effect>
                            <DropShadowEffect Color="Black" 
                                            Opacity="0.2" 
                                            ShadowDepth="3" 
                                            BlurRadius="8"/>
                        </Border.Effect>
                        
                        <ContentPresenter TextBlock.Foreground="{TemplateBinding Foreground}"
                                        TextBlock.FontSize="{TemplateBinding FontSize}"
                                        TextBlock.FontFamily="{TemplateBinding FontFamily}"/>
                    </Border>
                    
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter Property="Opacity" Value="0.6"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- Rich Tooltip Style (with icon support) -->
    <Style x:Key="RichTooltipStyle" TargetType="ToolTip">
        <Setter Property="Background" Value="{DynamicResource SurfaceBrush}"/>
        <Setter Property="BorderBrush" Value="{DynamicResource BorderBrush}"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="Foreground" Value="{DynamicResource ForegroundBrush}"/>
        <Setter Property="FontSize" Value="{StaticResource FontSizeMedium}"/>
        <Setter Property="FontFamily" Value="{StaticResource PrimaryFontFamily}"/>
        <Setter Property="Padding" Value="16,12"/>
        <Setter Property="MaxWidth" Value="350"/>
        <Setter Property="HasDropShadow" Value="True"/>
        <Setter Property="Placement" Value="Top"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ToolTip">
                    <Border x:Name="Border"
                            Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            CornerRadius="8"
                            Padding="{TemplateBinding Padding}">
                        
                        <Border.Effect>
                            <DropShadowEffect Color="Black" 
                                            Opacity="0.15" 
                                            ShadowDepth="4" 
                                            BlurRadius="12"/>
                        </Border.Effect>
                        
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            
                            <!-- Icon (if provided) -->
                            <TextBlock x:Name="IconTextBlock"
                                      Grid.Column="0"
                                      FontFamily="{StaticResource IconFontFamily}"
                                      FontSize="20"
                                      Foreground="{DynamicResource AccentBrush}"
                                      VerticalAlignment="Top"
                                      Margin="0,0,12,0"
                                      Visibility="Collapsed"/>
                            
                            <!-- Content -->
                            <ContentPresenter Grid.Column="1"
                                            TextBlock.Foreground="{TemplateBinding Foreground}"
                                            TextBlock.FontSize="{TemplateBinding FontSize}"
                                            TextBlock.FontFamily="{TemplateBinding FontFamily}"
                                            TextBlock.LineHeight="20"/>
                        </Grid>
                    </Border>
                    
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter Property="Opacity" Value="0.6"/>
                        </Trigger>
                        
                        <!-- Show icon if Tag contains icon -->
                        <Trigger Property="Tag" Value="{x:Null}">
                            <Setter TargetName="IconTextBlock" Property="Visibility" Value="Collapsed"/>
                        </Trigger>
                        <Trigger Property="Tag" Value="">
                            <Setter TargetName="IconTextBlock" Property="Visibility" Value="Collapsed"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- Info Tooltip Style -->
    <Style x:Key="InfoTooltipStyle" TargetType="ToolTip" BasedOn="{StaticResource RichTooltipStyle}">
        <Setter Property="Tag" Value="&#xE946;"/> <!-- Info icon -->
        <Setter Property="BorderBrush" Value="{DynamicResource InfoBrush}"/>
    </Style>

    <!-- Warning Tooltip Style -->
    <Style x:Key="WarningTooltipStyle" TargetType="ToolTip" BasedOn="{StaticResource RichTooltipStyle}">
        <Setter Property="Tag" Value="&#xE7BA;"/> <!-- Warning icon -->
        <Setter Property="BorderBrush" Value="{DynamicResource WarningBrush}"/>
    </Style>

    <!-- Error Tooltip Style -->
    <Style x:Key="ErrorTooltipStyle" TargetType="ToolTip" BasedOn="{StaticResource RichTooltipStyle}">
        <Setter Property="Tag" Value="&#xE783;"/> <!-- Error icon -->
        <Setter Property="BorderBrush" Value="{DynamicResource ErrorBrush}"/>
    </Style>

    <!-- Success Tooltip Style -->
    <Style x:Key="SuccessTooltipStyle" TargetType="ToolTip" BasedOn="{StaticResource RichTooltipStyle}">
        <Setter Property="Tag" Value="&#xE73E;"/> <!-- Checkmark icon -->
        <Setter Property="BorderBrush" Value="{DynamicResource SuccessBrush}"/>
    </Style>

    <!-- Keyboard Shortcut Tooltip Style -->
    <Style x:Key="KeyboardShortcutTooltipStyle" TargetType="ToolTip">
        <Setter Property="Background" Value="{DynamicResource SurfaceBrush}"/>
        <Setter Property="BorderBrush" Value="{DynamicResource BorderBrush}"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="Foreground" Value="{DynamicResource ForegroundBrush}"/>
        <Setter Property="FontSize" Value="{StaticResource FontSizeMedium}"/>
        <Setter Property="FontFamily" Value="{StaticResource PrimaryFontFamily}"/>
        <Setter Property="Padding" Value="12,8"/>
        <Setter Property="MaxWidth" Value="280"/>
        <Setter Property="HasDropShadow" Value="True"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ToolTip">
                    <Border Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            CornerRadius="6"
                            Padding="{TemplateBinding Padding}">
                        
                        <Border.Effect>
                            <DropShadowEffect Color="Black" 
                                            Opacity="0.2" 
                                            ShadowDepth="3" 
                                            BlurRadius="8"/>
                        </Border.Effect>
                        
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            
                            <!-- Main description -->
                            <ContentPresenter Grid.Row="0"
                                            TextBlock.Foreground="{TemplateBinding Foreground}"
                                            TextBlock.FontSize="{TemplateBinding FontSize}"
                                            TextBlock.FontFamily="{TemplateBinding FontFamily}"
                                            Margin="0,0,0,4"/>
                            
                            <!-- Keyboard shortcut -->
                            <TextBlock Grid.Row="1"
                                      Text="{TemplateBinding Tag}"
                                      FontSize="{StaticResource FontSizeSmall}"
                                      Foreground="{DynamicResource MutedForegroundBrush}"
                                      HorizontalAlignment="Right"
                                      FontFamily="{StaticResource MonospaceFontFamily}"
                                      Background="{DynamicResource CardBrush}"
                                      Padding="6,2"
                                      Margin="0,4,0,0">
                                <TextBlock.Style>
                                    <Style TargetType="TextBlock">
                                        <Style.Triggers>
                                            <Trigger Property="Text" Value="">
                                                <Setter Property="Visibility" Value="Collapsed"/>
                                            </Trigger>
                                            <Trigger Property="Text" Value="{x:Null}">
                                                <Setter Property="Visibility" Value="Collapsed"/>
                                            </Trigger>
                                        </Style.Triggers>
                                    </Style>
                                </TextBlock.Style>
                            </TextBlock>
                        </Grid>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- Progress Tooltip Style -->
    <Style x:Key="ProgressTooltipStyle" TargetType="ToolTip">
        <Setter Property="Background" Value="{DynamicResource SurfaceBrush}"/>
        <Setter Property="BorderBrush" Value="{DynamicResource BorderBrush}"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="Foreground" Value="{DynamicResource ForegroundBrush}"/>
        <Setter Property="FontSize" Value="{StaticResource FontSizeMedium}"/>
        <Setter Property="Padding" Value="16,12"/>
        <Setter Property="MaxWidth" Value="300"/>
        <Setter Property="HasDropShadow" Value="True"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ToolTip">
                    <Border Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            CornerRadius="8"
                            Padding="{TemplateBinding Padding}">
                        
                        <Border.Effect>
                            <DropShadowEffect Color="Black" 
                                            Opacity="0.15" 
                                            ShadowDepth="4" 
                                            BlurRadius="12"/>
                        </Border.Effect>
                        
                        <StackPanel>
                            <!-- Title -->
                            <TextBlock Text="{TemplateBinding Tag}"
                                      FontWeight="Medium"
                                      Margin="0,0,0,8"
                                      TextWrapping="Wrap"/>
                            
                            <!-- Content/Description -->
                            <ContentPresenter TextBlock.Foreground="{TemplateBinding Foreground}"
                                            TextBlock.FontSize="{TemplateBinding FontSize}"
                                            Margin="0,0,0,8"/>
                            
                            <!-- Progress bar placeholder -->
                            <ProgressBar Height="6" 
                                        Background="{DynamicResource CardBrush}"
                                        Foreground="{DynamicResource AccentBrush}"
                                        BorderThickness="0"
                                        Value="0"
                                        Minimum="0"
                                        Maximum="100"/>
                        </StackPanel>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- Set default tooltip style application-wide -->
    <Style TargetType="ToolTip" BasedOn="{StaticResource ModernTooltipStyle}"/>

</ResourceDictionary>