<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:shell="clr-namespace:System.Windows.Shell;assembly=PresentationFramework">

    <!-- Custom Window Chrome Style -->
    <Style x:Key="CustomWindowStyle" TargetType="Window">
        <Setter Property="WindowStyle" Value="None"/>
        <Setter Property="AllowsTransparency" Value="True"/>
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="ResizeMode" Value="CanResizeWithGrip"/>
        <Setter Property="UseLayoutRounding" Value="True"/>
        <Setter Property="TextOptions.TextFormattingMode" Value="Display"/>
        <Setter Property="shell:WindowChrome.WindowChrome">
            <Setter.Value>
                <shell:WindowChrome CaptionHeight="32"
                                   CornerRadius="8"
                                   GlassFrameThickness="0"
                                   NonClientFrameEdges="None"
                                   ResizeBorderThickness="5"
                                   UseAeroCaptionButtons="False"/>
            </Setter.Value>
        </Setter>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Window">
                    <Border x:Name="WindowBorder"
                            Background="{DynamicResource SurfaceBrush}"
                            BorderBrush="{DynamicResource BorderBrush}"
                            BorderThickness="1"
                            CornerRadius="8">
                        
                        <!-- Drop shadow effect -->
                        <Border.Effect>
                            <DropShadowEffect Color="Black" 
                                            Opacity="0.2" 
                                            ShadowDepth="5" 
                                            BlurRadius="15"
                                            Direction="270"/>
                        </Border.Effect>
                        
                        <Grid>
                            <Grid.RowDefinitions>
                                <!-- Title Bar -->
                                <RowDefinition Height="32"/>
                                <!-- Content -->
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>
                            
                            <!-- Title Bar -->
                            <Border x:Name="TitleBar" 
                                    Grid.Row="0"
                                    Background="{DynamicResource TitleBarBrush}"
                                    BorderBrush="{DynamicResource BorderBrush}"
                                    BorderThickness="0,0,0,1"
                                    CornerRadius="8,8,0,0">
                                
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <!-- Icon and Title -->
                                        <ColumnDefinition Width="*"/>
                                        <!-- Window Controls -->
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    
                                    <!-- Icon and Title Section -->
                                    <StackPanel Grid.Column="0" 
                                              Orientation="Horizontal" 
                                              VerticalAlignment="Center"
                                              Margin="12,0">
                                        
                                        <!-- Window Icon -->
                                        <Image x:Name="WindowIcon"
                                               Source="{TemplateBinding Icon}"
                                               Width="16" Height="16"
                                               Margin="0,0,8,0"
                                               VerticalAlignment="Center"/>
                                        
                                        <!-- Window Title -->
                                        <TextBlock x:Name="WindowTitle"
                                                   Text="{TemplateBinding Title}"
                                                   Foreground="{DynamicResource ForegroundBrush}"
                                                   FontFamily="{StaticResource PrimaryFontFamily}"
                                                   FontSize="14"
                                                   FontWeight="Medium"
                                                   VerticalAlignment="Center"/>
                                    </StackPanel>
                                    
                                    <!-- Window Control Buttons -->
                                    <StackPanel Grid.Column="1" 
                                              Orientation="Horizontal"
                                              shell:WindowChrome.IsHitTestVisibleInChrome="True">
                                        
                                        <!-- Minimize Button -->
                                        <Button x:Name="MinimizeButton"
                                                Style="{StaticResource WindowControlButtonStyle}"
                                                Content="&#xE921;"
                                                ToolTip="Minimize"/>
                                        
                                        <!-- Maximize/Restore Button -->
                                        <Button x:Name="MaximizeRestoreButton"
                                                Style="{StaticResource WindowControlButtonStyle}"
                                                Content="&#xE922;"
                                                                                                ToolTip="Maximize"/>
                                        
                                        <!-- Close Button -->
                                        <Button x:Name="CloseButton"
                                                Style="{StaticResource CloseButtonStyle}"
                                                Content="&#xE8BB;"
                                                                                                ToolTip="Close"/>
                                    </StackPanel>
                                </Grid>
                            </Border>
                            
                            <!-- Window Content -->
                            <ContentPresenter Grid.Row="1"
                                            Margin="1,0,1,1"/>
                        </Grid>
                    </Border>
                    
                    <ControlTemplate.Triggers>
                        <!-- Window State Triggers -->
                        <Trigger Property="WindowState" Value="Maximized">
                            <Setter TargetName="WindowBorder" Property="CornerRadius" Value="0"/>
                            <Setter TargetName="TitleBar" Property="CornerRadius" Value="0"/>
                            <Setter TargetName="WindowBorder" Property="BorderThickness" Value="0"/>
                            <Setter TargetName="WindowBorder" Property="Effect" Value="{x:Null}"/>
                            <Setter TargetName="MaximizeRestoreButton" Property="Content" Value="&#xE923;"/>
                            <Setter TargetName="MaximizeRestoreButton" Property="ToolTip" Value="Restore Down"/>
                        </Trigger>
                        
                        <Trigger Property="IsActive" Value="False">
                            <Setter TargetName="TitleBar" Property="Background" 
                                    Value="{DynamicResource InactiveTitleBarBrush}"/>
                            <Setter TargetName="WindowTitle" Property="Foreground" 
                                    Value="{DynamicResource MutedForegroundBrush}"/>
                        </Trigger>
                        
                        <Trigger Property="Icon" Value="{x:Null}">
                            <Setter TargetName="WindowIcon" Property="Visibility" Value="Collapsed"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- Window Control Button Style -->
    <Style x:Key="WindowControlButtonStyle" TargetType="Button">
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="BorderThickness" Value="0"/>
        <Setter Property="Width" Value="44"/>
        <Setter Property="Height" Value="32"/>
        <Setter Property="FontFamily" Value="Segoe MDL2 Assets"/>
        <Setter Property="FontSize" Value="10"/>
        <Setter Property="Foreground" Value="{DynamicResource ForegroundBrush}"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Button">
                    <Border x:Name="ButtonBorder"
                            Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}">
                        
                        <ContentPresenter HorizontalAlignment="Center"
                                        VerticalAlignment="Center"
                                        TextBlock.Foreground="{TemplateBinding Foreground}"/>
                    </Border>
                    
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter TargetName="ButtonBorder" Property="Background" 
                                    Value="{DynamicResource WindowControlButtonHoverBrush}"/>
                        </Trigger>
                        
                        <Trigger Property="IsPressed" Value="True">
                            <Setter TargetName="ButtonBorder" Property="Background" 
                                    Value="{DynamicResource WindowControlButtonPressedBrush}"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- Close Button Style (Red hover effect) -->
    <Style x:Key="CloseButtonStyle" TargetType="Button" BasedOn="{StaticResource WindowControlButtonStyle}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Button">
                    <Border x:Name="ButtonBorder"
                            Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}">
                        
                        <ContentPresenter HorizontalAlignment="Center"
                                        VerticalAlignment="Center"
                                        TextBlock.Foreground="{TemplateBinding Foreground}"/>
                    </Border>
                    
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter TargetName="ButtonBorder" Property="Background" Value="#E53E3E"/>
                            <Setter Property="Foreground" Value="White"/>
                        </Trigger>
                        
                        <Trigger Property="IsPressed" Value="True">
                            <Setter TargetName="ButtonBorder" Property="Background" Value="#C53030"/>
                            <Setter Property="Foreground" Value="White"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- Custom Dialog Window Style -->
    <Style x:Key="CustomDialogWindowStyle" TargetType="Window" BasedOn="{StaticResource CustomWindowStyle}">
        <Setter Property="ResizeMode" Value="NoResize"/>
        <Setter Property="ShowInTaskbar" Value="False"/>
        <Setter Property="WindowStartupLocation" Value="CenterOwner"/>
        <Setter Property="shell:WindowChrome.WindowChrome">
            <Setter.Value>
                <shell:WindowChrome CaptionHeight="32"
                                   CornerRadius="8"
                                   GlassFrameThickness="0"
                                   NonClientFrameEdges="None"
                                   ResizeBorderThickness="0"
                                   UseAeroCaptionButtons="False"/>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- Borderless Window Style -->
    <Style x:Key="BorderlessWindowStyle" TargetType="Window">
        <Setter Property="WindowStyle" Value="None"/>
        <Setter Property="AllowsTransparency" Value="True"/>
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="ResizeMode" Value="CanResizeWithGrip"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Window">
                    <Border Background="{DynamicResource SurfaceBrush}"
                            CornerRadius="12">
                        
                        <Border.Effect>
                            <DropShadowEffect Color="Black" 
                                            Opacity="0.3" 
                                            ShadowDepth="8" 
                                            BlurRadius="20"/>
                        </Border.Effect>
                        
                        <ContentPresenter Margin="12"/>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- Modern Acrylic Window Style -->
    <Style x:Key="AcrylicWindowStyle" TargetType="Window" BasedOn="{StaticResource CustomWindowStyle}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Window">
                    <Border x:Name="WindowBorder"
                            BorderBrush="{DynamicResource BorderBrush}"
                            BorderThickness="1"
                            CornerRadius="8">
                        
                        <!-- Backdrop blur effect (simulated) -->
                        <Border.Background>
                            <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                                <GradientStop Color="#CC{DynamicResource SurfaceColor}" Offset="0"/>
                                <GradientStop Color="#BB{DynamicResource SurfaceColor}" Offset="0.5"/>
                                <GradientStop Color="#CC{DynamicResource SurfaceColor}" Offset="1"/>
                            </LinearGradientBrush>
                        </Border.Background>
                        
                        <Border.Effect>
                            <DropShadowEffect Color="Black" 
                                            Opacity="0.25" 
                                            ShadowDepth="6" 
                                            BlurRadius="18"/>
                        </Border.Effect>
                        
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="32"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>
                            
                            <!-- Acrylic Title Bar -->
                            <Border x:Name="TitleBar" 
                                    Grid.Row="0"
                                    BorderBrush="{DynamicResource BorderBrush}"
                                    BorderThickness="0,0,0,1"
                                    CornerRadius="8,8,0,0">
                                
                                <Border.Background>
                                    <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                                        <GradientStop Color="#88{DynamicResource TitleBarColor}" Offset="0"/>
                                        <GradientStop Color="#AA{DynamicResource TitleBarColor}" Offset="1"/>
                                    </LinearGradientBrush>
                                </Border.Background>
                                
                                <!-- Title bar content same as CustomWindowStyle -->
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    
                                    <StackPanel Grid.Column="0" 
                                              Orientation="Horizontal" 
                                              VerticalAlignment="Center"
                                              Margin="12,0">
                                        <Image x:Name="WindowIcon"
                                               Source="{TemplateBinding Icon}"
                                               Width="16" Height="16"
                                               Margin="0,0,8,0"
                                               VerticalAlignment="Center"/>
                                        <TextBlock x:Name="WindowTitle"
                                                   Text="{TemplateBinding Title}"
                                                   Foreground="{DynamicResource ForegroundBrush}"
                                                   FontFamily="{StaticResource PrimaryFontFamily}"
                                                   FontSize="14"
                                                   FontWeight="Medium"
                                                   VerticalAlignment="Center"/>
                                    </StackPanel>
                                    
                                    <StackPanel Grid.Column="1" 
                                              Orientation="Horizontal"
                                              shell:WindowChrome.IsHitTestVisibleInChrome="True">
                                        <Button x:Name="MinimizeButton"
                                                Style="{StaticResource WindowControlButtonStyle}"
                                                Content="&#xE921;"
                                                />
                                        <Button x:Name="MaximizeRestoreButton"
                                                Style="{StaticResource WindowControlButtonStyle}"
                                                Content="&#xE922;"
                                                />
                                        <Button x:Name="CloseButton"
                                                Style="{StaticResource CloseButtonStyle}"
                                                Content="&#xE8BB;"
                                                />
                                    </StackPanel>
                                </Grid>
                            </Border>
                            
                            <ContentPresenter Grid.Row="1" Margin="1,0,1,1"/>
                        </Grid>
                    </Border>
                    
                    <!-- Same triggers as CustomWindowStyle -->
                    <ControlTemplate.Triggers>
                        <Trigger Property="WindowState" Value="Maximized">
                            <Setter TargetName="WindowBorder" Property="CornerRadius" Value="0"/>
                            <Setter TargetName="TitleBar" Property="CornerRadius" Value="0"/>
                            <Setter TargetName="WindowBorder" Property="BorderThickness" Value="0"/>
                            <Setter TargetName="MaximizeRestoreButton" Property="Content" Value="&#xE923;"/>
                        </Trigger>
                        <Trigger Property="IsActive" Value="False">
                            <Setter TargetName="WindowTitle" Property="Foreground" 
                                    Value="{DynamicResource MutedForegroundBrush}"/>
                        </Trigger>
                        <Trigger Property="Icon" Value="{x:Null}">
                            <Setter TargetName="WindowIcon" Property="Visibility" Value="Collapsed"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- Window Chrome Color Resources -->
    <SolidColorBrush x:Key="TitleBarBrush" Color="{DynamicResource CardColor}"/>
    <SolidColorBrush x:Key="InactiveTitleBarBrush" Color="{DynamicResource CardColor}" Opacity="0.8"/>
    <SolidColorBrush x:Key="WindowControlButtonHoverBrush" Color="{DynamicResource AccentColor}" Opacity="0.1"/>
    <SolidColorBrush x:Key="WindowControlButtonPressedBrush" Color="{DynamicResource AccentColor}" Opacity="0.2"/>
    
    <!-- Acrylic brushes -->
    <SolidColorBrush x:Key="AcrylicTitleBarBrush" Color="{DynamicResource CardColor}" Opacity="0.9"/>

</ResourceDictionary>