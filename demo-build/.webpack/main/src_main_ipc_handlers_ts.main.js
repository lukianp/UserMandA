"use strict";exports.id="src_main_ipc_handlers_ts",exports.ids=["src_main_ipc_handlers_ts"],exports.modules={"./src/main/ipc/handlers.ts":(e,t,r)=>{r.d(t,{registerAdvancedIpcHandlers:()=>s});var o=r("electron");function s(){o.ipcMain.handle("getTickets",async(e,t={})=>{try{console.log("IPC: getTickets",t);const{page:e=1,limit:r=20,status:o,priority:s,search:n,sortBy:a="created_at",sortOrder:c="desc"}=t;let i=[{id:"ticket-1",title:"User migration failed for john.doe@company.com",description:"Migration batch #123 failed during mailbox migration phase",status:"open",priority:"high",createdAt:new Date(Date.now()-864e5).toISOString(),updatedAt:(new Date).toISOString(),assignedTo:"admin@company.com",createdBy:"system@migration-service",tags:["migration","mailbox","failure"],comments:[{id:"comment-1",author:"system@migration-service",message:"Migration failed due to permissions issue",createdAt:new Date(Date.now()-864e5).toISOString()}]},{id:"ticket-2",title:"Data export completed successfully",description:"Scheduled weekly data export for compliance reporting",status:"closed",priority:"medium",createdAt:new Date(Date.now()-1728e5).toISOString(),updatedAt:new Date(Date.now()-864e5).toISOString(),assignedTo:null,createdBy:"scheduler@system",tags:["export","compliance"],comments:[]}];if(o&&(i=i.filter(e=>e.status===o)),s&&(i=i.filter(e=>e.priority===s)),n){const e=n.toLowerCase();i=i.filter(t=>t.title.toLowerCase().includes(e)||t.description.toLowerCase().includes(e)||t.tags.some(t=>t.toLowerCase().includes(e)))}i.sort((e,t)=>{let r=e[a],o=t[a];return"created_at"!==a&&"updated_at"!==a||(r=new Date(r),o=new Date(o)),"asc"===c?r>o?1:-1:r<o?1:-1});const l=(e-1)*r,d=l+r;return{success:!0,data:{tickets:i.slice(l,d),total:i.length,page:e,limit:r,totalPages:Math.ceil(i.length/r)}}}catch(e){return console.error(`getTickets error: ${e instanceof Error?e.message:String(e)}`),{success:!1,error:e instanceof Error?e.message:String(e)}}}),o.ipcMain.handle("createTicket",async(e,t)=>{try{console.log("IPC: createTicket",t);const{title:e,description:r,priority:o,tags:s=[],assignedTo:n}=t;if(!e||!r)throw new Error("Title and description are required");const a={id:`ticket-${Date.now()}`,title:e,description:r,status:"open",priority:o,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),assignedTo:n||null,createdBy:"current-user@system",tags:s,comments:[]};return console.log(`Ticket created: ${a.id}`),{success:!0,data:a}}catch(e){return console.error(`createTicket error: ${e instanceof Error?e.message:String(e)}`),{success:!1,error:e instanceof Error?e.message:String(e)}}}),o.ipcMain.handle("updateTicket",async(e,t)=>{try{console.log("IPC: updateTicket",t);const{ticketId:e,updates:r}=t;if(!e)throw new Error("Ticket ID is required");const o={id:e,...r,updatedAt:(new Date).toISOString()};return console.log(`Ticket updated: ${e}`),{success:!0,data:o}}catch(e){return console.error(`updateTicket error: ${e instanceof Error?e.message:String(e)}`),{success:!1,error:e instanceof Error?e.message:String(e)}}}),o.ipcMain.handle("deleteTicket",async(e,t)=>{try{console.log("IPC: deleteTicket",t);const{ticketId:e}=t;if(!e)throw new Error("Ticket ID is required");return console.log(`Ticket deleted: ${e}`),{success:!0}}catch(e){return console.error(`deleteTicket error: ${e instanceof Error?e.message:String(e)}`),{success:!1,error:e instanceof Error?e.message:String(e)}}}),o.ipcMain.handle("addTicketComment",async(e,t)=>{try{console.log("IPC: addTicketComment",t);const{ticketId:e,comment:r}=t;if(!e||!r)throw new Error("Ticket ID and comment are required");const o={id:`comment-${Date.now()}`,author:"current-user@system",message:r,createdAt:(new Date).toISOString()};return console.log(`Comment added to ticket ${e}: ${o.id}`),{success:!0,data:o}}catch(e){return console.error(`addTicketComment error: ${e instanceof Error?e.message:String(e)}`),{success:!1,error:e instanceof Error?e.message:String(e)}}}),o.ipcMain.handle("getWebhooks",async(e,t={})=>{try{console.log("IPC: getWebhooks",t);const{page:e=1,limit:r=20,search:o,status:s}=t;let n=[{id:"webhook-1",name:"Migration Status Updates",url:"https://api.example.com/webhooks/migration-status",events:["migration.started","migration.completed","migration.failed"],status:"active",lastTriggered:new Date(Date.now()-36e5).toISOString(),createdAt:new Date(Date.now()-864e5).toISOString(),headers:{Authorization:"Bearer token123"},retryPolicy:{maxRetries:3,backoffMs:1e3}},{id:"webhook-2",name:"Security Alerts",url:"https://security.example.com/alerts",events:["security.threat","security.policy_violation"],status:"active",lastTriggered:new Date(Date.now()-72e5).toISOString(),createdAt:new Date(Date.now()-1728e5).toISOString(),headers:{},retryPolicy:{maxRetries:5,backoffMs:2e3}}];if(s&&(n=n.filter(e=>e.status===s)),o){const e=o.toLowerCase();n=n.filter(t=>t.name.toLowerCase().includes(e)||t.url.toLowerCase().includes(e)||t.events.some(t=>t.toLowerCase().includes(e)))}const a=(e-1)*r,c=a+r;return{success:!0,data:{webhooks:n.slice(a,c),total:n.length,page:e,limit:r,totalPages:Math.ceil(n.length/r)}}}catch(e){return console.error(`getWebhooks error: ${e instanceof Error?e.message:String(e)}`),{success:!1,error:e instanceof Error?e.message:String(e)}}}),o.ipcMain.handle("createWebhook",async(e,t)=>{try{console.log("IPC: createWebhook",t);const{name:e,url:r,events:o,headers:s={},retryPolicy:n}=t;if(!e||!r||!o||0===o.length)throw new Error("Name, URL, and at least one event are required");try{new URL(r)}catch{throw new Error("Invalid URL format")}const a={id:`webhook-${Date.now()}`,name:e,url:r,events:o,status:"active",lastTriggered:null,createdAt:(new Date).toISOString(),headers:s,retryPolicy:n||{maxRetries:3,backoffMs:1e3}};return console.log(`Webhook created: ${a.id}`),{success:!0,data:a}}catch(e){return console.error(`createWebhook error: ${e instanceof Error?e.message:String(e)}`),{success:!1,error:e instanceof Error?e.message:String(e)}}}),o.ipcMain.handle("updateWebhook",async(e,t)=>{try{console.log("IPC: updateWebhook",t);const{webhookId:e,updates:r}=t;if(!e)throw new Error("Webhook ID is required");if(r.url)try{new URL(r.url)}catch{throw new Error("Invalid URL format")}const o={id:e,...r,updatedAt:(new Date).toISOString()};return console.log(`Webhook updated: ${e}`),{success:!0,data:o}}catch(e){return console.error(`updateWebhook error: ${e instanceof Error?e.message:String(e)}`),{success:!1,error:e instanceof Error?e.message:String(e)}}}),o.ipcMain.handle("deleteWebhook",async(e,t)=>{try{console.log("IPC: deleteWebhook",t);const{webhookId:e}=t;if(!e)throw new Error("Webhook ID is required");return console.log(`Webhook deleted: ${e}`),{success:!0}}catch(e){return console.error(`deleteWebhook error: ${e instanceof Error?e.message:String(e)}`),{success:!1,error:e instanceof Error?e.message:String(e)}}}),o.ipcMain.handle("testWebhook",async(e,t)=>{try{console.log("IPC: testWebhook",t);const{webhookId:e,testEvent:r="test.event",testData:o={message:"Test webhook payload"}}=t;if(!e)throw new Error("Webhook ID is required");console.log(`Testing webhook ${e} with event: ${r}`),await new Promise(e=>setTimeout(e,1e3));const s={success:!0,responseTime:150,statusCode:200,response:"Webhook received successfully"};return console.log(`Webhook test completed for ${e}`),{success:!0,data:s}}catch(e){return console.error(`testWebhook error: ${e instanceof Error?e.message:String(e)}`),{success:!1,error:e instanceof Error?e.message:String(e)}}}),o.ipcMain.handle("getWorkflows",async(e,t={})=>{try{console.log("IPC: getWorkflows",t);const{page:e=1,limit:r=20,search:o,status:s,sortBy:n="created_at",sortOrder:a="desc"}=t;let c=[{id:"workflow-1",name:"Automated User Migration",description:"Complete workflow for migrating users from Active Directory to Azure AD",status:"active",steps:[{id:"step-1",name:"Validate User",type:"validation"},{id:"step-2",name:"Create Azure AD Account",type:"creation"},{id:"step-3",name:"Migrate Mailbox",type:"migration"},{id:"step-4",name:"Update Permissions",type:"permission"}],createdAt:new Date(Date.now()-864e5).toISOString(),updatedAt:(new Date).toISOString(),executionCount:15,lastExecutedAt:new Date(Date.now()-36e5).toISOString(),successRate:.87,averageExecutionTime:18e5},{id:"workflow-2",name:"Security Compliance Check",description:"Automated security compliance validation workflow",status:"active",steps:[{id:"step-1",name:"Gather User Data",type:"collection"},{id:"step-2",name:"Check Compliance Rules",type:"validation"},{id:"step-3",name:"Generate Report",type:"reporting"}],createdAt:new Date(Date.now()-1728e5).toISOString(),updatedAt:new Date(Date.now()-864e5).toISOString(),executionCount:8,lastExecutedAt:new Date(Date.now()-72e5).toISOString(),successRate:.95,averageExecutionTime:9e5}];if(s&&(c=c.filter(e=>e.status===s)),o){const e=o.toLowerCase();c=c.filter(t=>t.name.toLowerCase().includes(e)||t.description.toLowerCase().includes(e)||t.steps.some(t=>t.name.toLowerCase().includes(e)))}c.sort((e,t)=>{let r=e[n],o=t[n];return("created_at"===n||"updated_at"===n||"lastExecutedAt"===n&&"lastExecutedAt"in e)&&(r=new Date(r||0),o=new Date(o||0)),"asc"===a?r>o?1:-1:r<o?1:-1});const i=(e-1)*r,l=i+r;return{success:!0,data:{workflows:c.slice(i,l),total:c.length,page:e,limit:r,totalPages:Math.ceil(c.length/r)}}}catch(e){return console.error(`getWorkflows error: ${e instanceof Error?e.message:String(e)}`),{success:!1,error:e instanceof Error?e.message:String(e)}}}),o.ipcMain.handle("createWorkflow",async(e,t)=>{try{console.log("IPC: createWorkflow",t);const{name:e,description:r,steps:o,triggers:s=[]}=t;if(!e||!o||0===o.length)throw new Error("Name and at least one step are required");const n={id:`workflow-${Date.now()}`,name:e,description:r,status:"active",steps:o.map((e,t)=>({id:`step-${t+1}`,...e})),triggers:s,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),executionCount:0,lastExecutedAt:null,successRate:0,averageExecutionTime:0};return console.log(`Workflow created: ${n.id}`),{success:!0,data:n}}catch(e){return console.error(`createWorkflow error: ${e instanceof Error?e.message:String(e)}`),{success:!1,error:e instanceof Error?e.message:String(e)}}}),o.ipcMain.handle("executeWorkflow",async(e,t)=>{try{console.log("IPC: executeWorkflow",t);const{workflowId:e,parameters:r={},priority:o="normal"}=t;if(!e)throw new Error("Workflow ID is required");const s=`execution-${Date.now()}`,n={id:s,workflowId:e,status:"running",startedAt:(new Date).toISOString(),parameters:r,priority:o,currentStep:"step-1",progress:0,steps:[{id:"step-1",name:"Initialize",status:"running",startedAt:(new Date).toISOString()}]};return console.log(`Workflow execution started: ${s} for workflow ${e}`),setTimeout(()=>{console.log(`Workflow execution completed: ${s}`)},2e3),{success:!0,data:n}}catch(e){return console.error(`executeWorkflow error: ${e instanceof Error?e.message:String(e)}`),{success:!1,error:e instanceof Error?e.message:String(e)}}}),o.ipcMain.handle("getWorkflowExecution",async(e,t)=>{try{console.log("IPC: getWorkflowExecution",t);const{executionId:e}=t;if(!e)throw new Error("Execution ID is required");return{success:!0,data:{id:e,workflowId:"workflow-1",status:"completed",startedAt:new Date(Date.now()-3e5).toISOString(),completedAt:(new Date).toISOString(),parameters:{userId:"user123"},priority:"normal",currentStep:null,progress:100,steps:[{id:"step-1",name:"Validate User",status:"completed",startedAt:new Date(Date.now()-3e5).toISOString(),completedAt:new Date(Date.now()-24e4).toISOString(),duration:6e4},{id:"step-2",name:"Create Azure AD Account",status:"completed",startedAt:new Date(Date.now()-24e4).toISOString(),completedAt:new Date(Date.now()-18e4).toISOString(),duration:6e4}],result:{success:!0,migratedUserId:"azure-user-456"},error:null}}}catch(e){return console.error(`getWorkflowExecution error: ${e instanceof Error?e.message:String(e)}`),{success:!1,error:e instanceof Error?e.message:String(e)}}}),o.ipcMain.handle("cancelWorkflowExecution",async(e,t)=>{try{console.log("IPC: cancelWorkflowExecution",t);const{executionId:e}=t;if(!e)throw new Error("Execution ID is required");return console.log(`Workflow execution cancelled: ${e}`),{success:!0}}catch(e){return console.error(`cancelWorkflowExecution error: ${e instanceof Error?e.message:String(e)}`),{success:!1,error:e instanceof Error?e.message:String(e)}}}),o.ipcMain.handle("deleteWorkflow",async(e,t)=>{try{console.log("IPC: deleteWorkflow",t);const{workflowId:e}=t;if(!e)throw new Error("Workflow ID is required");return console.log(`Workflow deleted: ${e}`),{success:!0}}catch(e){return console.error(`deleteWorkflow error: ${e instanceof Error?e.message:String(e)}`),{success:!1,error:e instanceof Error?e.message:String(e)}}}),o.ipcMain.handle("updateWorkflow",async(e,t)=>{try{console.log("IPC: updateWorkflow",t);const{workflowId:e,updates:r}=t;if(!e)throw new Error("Workflow ID is required");const o={id:e,...r,updatedAt:(new Date).toISOString()};return console.log(`Workflow updated: ${e}`),{success:!0,data:o}}catch(e){return console.error(`updateWorkflow error: ${e instanceof Error?e.message:String(e)}`),{success:!1,error:e instanceof Error?e.message:String(e)}}})}}};
//# sourceMappingURL=src_main_ipc_handlers_ts.main.js.map