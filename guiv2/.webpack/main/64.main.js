"use strict";exports.id=64,exports.ids=[64],exports.modules={64:(e,a,t)=>{t.d(a,{registerMigrationHandlers:()=>r});var s=t(482);function r(){s.ipcMain.handle("migration:initialize-db",async(e,a)=>{try{const{profilePath:e}=a;console.log(`[IPC] Initializing migration database for profile: ${e}`);const{databaseService:s}=await t.e(134).then(t.bind(t,134));return await s.initialize(e),{success:!0,message:"Database initialized successfully"}}catch(e){return console.error("[IPC] migration:initialize-db error:",e),{success:!1,error:e.message}}}),s.ipcMain.handle("migration:get-waves",async()=>{try{console.log("[IPC] Getting migration waves");const{databaseService:e}=await t.e(134).then(t.bind(t,134));return{success:!0,data:await e.getWaves()}}catch(e){return console.error("[IPC] migration:get-waves error:",e),{success:!1,error:e.message,data:[]}}}),s.ipcMain.handle("migration:get-wave",async(e,a)=>{try{const{waveId:e}=a;console.log(`[IPC] Getting migration wave: ${e}`);const{databaseService:s}=await t.e(134).then(t.bind(t,134)),r=await s.getWave(e);return r?{success:!0,data:r}:{success:!1,error:`Wave not found: ${e}`,data:null}}catch(e){return console.error("[IPC] migration:get-wave error:",e),{success:!1,error:e.message,data:null}}}),s.ipcMain.handle("migration:add-wave",async(e,a)=>{try{const{wave:e}=a;console.log(`[IPC] Adding migration wave: ${e.name}`);const{databaseService:s}=await t.e(134).then(t.bind(t,134));return await s.addWave(e),{success:!0,message:"Wave added successfully"}}catch(e){return console.error("[IPC] migration:add-wave error:",e),{success:!1,error:e.message}}}),s.ipcMain.handle("migration:update-wave",async(e,a)=>{try{const{waveId:e,updates:s}=a;console.log(`[IPC] Updating migration wave: ${e}`);const{databaseService:r}=await t.e(134).then(t.bind(t,134));return await r.updateWave(e,s),{success:!0,message:"Wave updated successfully"}}catch(e){return console.error("[IPC] migration:update-wave error:",e),{success:!1,error:e.message}}}),s.ipcMain.handle("migration:delete-wave",async(e,a)=>{try{const{waveId:e}=a;console.log(`[IPC] Deleting migration wave: ${e}`);const{databaseService:s}=await t.e(134).then(t.bind(t,134));return await s.deleteWave(e),{success:!0,message:"Wave deleted successfully"}}catch(e){return console.error("[IPC] migration:delete-wave error:",e),{success:!1,error:e.message}}}),s.ipcMain.handle("migration:add-item-to-wave",async(e,a)=>{try{const{waveId:e,item:s}=a;console.log(`[IPC] Adding item to wave ${e}:`,s.sourceIdentity||s.id);const{databaseService:r}=await t.e(134).then(t.bind(t,134));return await r.addItemToWave(e,s),{success:!0,message:"Item added to wave successfully"}}catch(e){return console.error("[IPC] migration:add-item-to-wave error:",e),{success:!1,error:e.message}}}),s.ipcMain.handle("migration:remove-item-from-wave",async(e,a)=>{try{const{waveId:e,itemId:s}=a;console.log(`[IPC] Removing item ${s} from wave ${e}`);const{databaseService:r}=await t.e(134).then(t.bind(t,134));return await r.removeItemFromWave(e,s),{success:!0,message:"Item removed from wave successfully"}}catch(e){return console.error("[IPC] migration:remove-item-from-wave error:",e),{success:!1,error:e.message}}}),s.ipcMain.handle("migration:get-wave-items",async(e,a)=>{try{const{waveId:e}=a;console.log(`[IPC] Getting items for wave: ${e}`);const{databaseService:s}=await t.e(134).then(t.bind(t,134));return{success:!0,data:await s.getWaveItems(e)}}catch(e){return console.error("[IPC] migration:get-wave-items error:",e),{success:!1,error:e.message,data:[]}}}),s.ipcMain.handle("migration:save-plan",async(e,a)=>{try{const{waves:e}=a;console.log(`[IPC] Saving migration plan with ${e.length} waves`);const{databaseService:s}=await t.e(134).then(t.bind(t,134));return await s.saveMigrationPlan(e),{success:!0,message:"Migration plan saved successfully"}}catch(e){return console.error("[IPC] migration:save-plan error:",e),{success:!1,error:e.message}}}),s.ipcMain.handle("migration:get-statistics",async()=>{try{console.log("[IPC] Getting migration statistics");const{databaseService:e}=await t.e(134).then(t.bind(t,134));return{success:!0,data:await e.getStatistics()}}catch(e){return console.error("[IPC] migration:get-statistics error:",e),{success:!1,error:e.message,data:null}}}),s.ipcMain.handle("migration:update-metadata",async(e,a)=>{try{const{metadata:e}=a;console.log("[IPC] Updating migration metadata");const{databaseService:s}=await t.e(134).then(t.bind(t,134));return await s.updateMetadata(e),{success:!0,message:"Metadata updated successfully"}}catch(e){return console.error("[IPC] migration:update-metadata error:",e),{success:!1,error:e.message}}}),s.ipcMain.handle("migration:get-metadata",async()=>{try{console.log("[IPC] Getting migration metadata");const{databaseService:e}=await t.e(134).then(t.bind(t,134));return{success:!0,data:await e.getMetadata()}}catch(e){return console.error("[IPC] migration:get-metadata error:",e),{success:!1,error:e.message,data:null}}}),console.log("[IPC] Migration persistence handlers registered")}}};