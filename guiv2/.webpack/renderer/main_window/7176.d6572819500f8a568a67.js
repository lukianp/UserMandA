"use strict";
(global["webpackChunkguiv2"] = global["webpackChunkguiv2"] || []).push([[7176],{

/***/ 33523:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (__WEBPACK_DEFAULT_EXPORT__),
/* harmony export */   z: () => (/* binding */ ProgressBar)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(74848);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(96540);
/* harmony import */ var clsx__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(34164);

/**
 * ProgressBar Component
 *
 * Progress indicator with percentage display and optional label.
 * Supports different variants and sizes.
 */


/**
 * ProgressBar Component
 */
const ProgressBar = ({ value, max = 100, variant = 'default', size = 'md', showLabel = true, label, labelPosition = 'inside', striped = false, animated = false, className, 'data-cy': dataCy, }) => {
    // Calculate percentage
    const percentage = Math.min(100, Math.max(0, (value / max) * 100));
    // Variant colors
    const variantClasses = {
        default: 'bg-blue-600',
        success: 'bg-green-600',
        warning: 'bg-yellow-600',
        danger: 'bg-red-600',
        info: 'bg-cyan-600',
    };
    // Background colors
    const bgClasses = {
        default: 'bg-blue-100',
        success: 'bg-green-100',
        warning: 'bg-yellow-100',
        danger: 'bg-red-100',
        info: 'bg-cyan-100',
    };
    // Size classes
    const sizeClasses = {
        sm: 'h-2',
        md: 'h-4',
        lg: 'h-6',
    };
    const containerClasses = (0,clsx__WEBPACK_IMPORTED_MODULE_2__/* .clsx */ .$)('w-full', className);
    const trackClasses = (0,clsx__WEBPACK_IMPORTED_MODULE_2__/* .clsx */ .$)('w-full rounded-full overflow-hidden', bgClasses[variant], sizeClasses[size]);
    const barClasses = (0,clsx__WEBPACK_IMPORTED_MODULE_2__/* .clsx */ .$)('h-full transition-all duration-300 ease-out', variantClasses[variant], {
        // Striped pattern
        'bg-gradient-to-r from-transparent via-black/10 to-transparent bg-[length:1rem_100%]': striped,
        'animate-progress-stripes': striped && animated,
    });
    const labelText = label || (showLabel ? `${Math.round(percentage)}%` : '');
    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: containerClasses, "data-cy": dataCy, children: [labelText && labelPosition === 'outside' && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: "flex items-center justify-between mb-1", children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { className: "text-sm font-medium text-gray-700", children: labelText }) })), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: trackClasses, role: "progressbar", "aria-valuenow": value, "aria-valuemin": 0, "aria-valuemax": max, children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: barClasses, style: { width: `${percentage}%` }, children: labelText && labelPosition === 'inside' && size !== 'sm' && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: "flex items-center justify-center h-full px-2", children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { className: "text-xs font-semibold text-white whitespace-nowrap", children: labelText }) })) }) })] }));
};
// Add animation for striped progress bars
const styles = `
@keyframes progress-stripes {
  from {
    background-position: 1rem 0;
  }
  to {
    background-position: 0 0;
  }
}

.animate-progress-stripes {
  animation: progress-stripes 1s linear infinite;
}
`;
// Inject styles
if (typeof document !== 'undefined' && !document.getElementById('progress-bar-styles')) {
    const styleSheet = document.createElement('style');
    styleSheet.id = 'progress-bar-styles';
    styleSheet.textContent = styles;
    document.head.appendChild(styleSheet);
}
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ProgressBar);


/***/ }),

/***/ 47176:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(74848);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(96540);
/* harmony import */ var lucide_react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(72832);
/* harmony import */ var _components_atoms_Button__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(74160);
/* harmony import */ var _components_atoms_Input__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(34766);
/* harmony import */ var _components_atoms_Checkbox__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(63683);
/* harmony import */ var _components_organisms_Modal__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(39864);
/* harmony import */ var _components_molecules_ProgressBar__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(33523);
/* harmony import */ var _components_atoms_LoadingSpinner__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(40391);
/* harmony import */ var _hooks_useAppRegistration__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(51782);

/**
 * Setup Company View
 *
 * A stunning wizard-style interface for Azure App Registration setup.
 * Features:
 * - Multi-step wizard with animated transitions
 * - Real-time connectivity monitoring
 * - Progress visualization with step indicators
 * - Credential management with secure masking
 * - Beautiful card-based layout with glass morphism effects
 */









// Required Graph API permissions with descriptions
const REQUIRED_PERMISSIONS = [
    {
        name: 'Directory.Read.All',
        description: 'Read directory objects like users, groups, and organizational contacts',
        icon: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(lucide_react__WEBPACK_IMPORTED_MODULE_2__/* .Folder */ .vdG, { className: "w-4 h-4" }),
        scope: 'Application',
    },
    {
        name: 'User.Read.All',
        description: 'Read user profiles, licenses, and authentication methods',
        icon: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(lucide_react__WEBPACK_IMPORTED_MODULE_2__/* .Users */ .zWC, { className: "w-4 h-4" }),
        scope: 'Application',
    },
    {
        name: 'Group.Read.All',
        description: 'Read group memberships and properties',
        icon: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(lucide_react__WEBPACK_IMPORTED_MODULE_2__/* .Users */ .zWC, { className: "w-4 h-4" }),
        scope: 'Application',
    },
    {
        name: 'Organization.Read.All',
        description: 'Read tenant and organization information',
        icon: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(lucide_react__WEBPACK_IMPORTED_MODULE_2__/* .Building2 */ .t6i, { className: "w-4 h-4" }),
        scope: 'Application',
    },
];
// ============================================================================
// Sub-components
// ============================================================================
/**
 * Animated step indicator for the wizard
 */
const StepIndicator = ({ steps, currentStep, completedSteps }) => ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: "flex items-center justify-center mb-8", children: steps.map((step, index) => ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react__WEBPACK_IMPORTED_MODULE_1__.Fragment, { children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "flex flex-col items-center", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: `
              w-12 h-12 rounded-full flex items-center justify-center
              transition-all duration-500 transform
              ${completedSteps.has(index)
                            ? 'bg-gradient-to-br from-green-400 to-green-600 text-white scale-100 shadow-lg shadow-green-500/30'
                            : index === currentStep
                                ? 'bg-gradient-to-br from-blue-500 to-purple-600 text-white scale-110 shadow-lg shadow-blue-500/40 ring-4 ring-blue-200 dark:ring-blue-800'
                                : 'bg-gray-200 dark:bg-gray-700 text-gray-500 dark:text-gray-400 scale-90'}
            `, children: completedSteps.has(index) ? ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(lucide_react__WEBPACK_IMPORTED_MODULE_2__/* .Check */ .Jlk, { className: "w-6 h-6" })) : ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { className: "text-sm font-bold", children: index + 1 })) }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { className: `
              mt-2 text-xs font-medium transition-colors duration-300
              ${index === currentStep
                            ? 'text-blue-600 dark:text-blue-400'
                            : completedSteps.has(index)
                                ? 'text-green-600 dark:text-green-400'
                                : 'text-gray-500 dark:text-gray-400'}
            `, children: step.title })] }), index < steps.length - 1 && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: `
              w-16 h-1 mx-2 rounded-full transition-all duration-500
              ${completedSteps.has(index)
                    ? 'bg-gradient-to-r from-green-400 to-green-500'
                    : index < currentStep
                        ? 'bg-gradient-to-r from-blue-400 to-blue-500'
                        : 'bg-gray-200 dark:bg-gray-700'}
            ` }))] }, step.id))) }));
/**
 * Connectivity status card with animated indicators
 */
const ConnectivityCard = ({ status, onRefresh, isRefreshing }) => {
    const getStatusIcon = (state) => {
        switch (state) {
            case 'connected':
                return (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(lucide_react__WEBPACK_IMPORTED_MODULE_2__/* .CheckCircle */ .rAV, { className: "w-5 h-5 text-green-500" });
            case 'failed':
                return (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(lucide_react__WEBPACK_IMPORTED_MODULE_2__.X, { className: "w-5 h-5 text-red-500" });
            case 'checking':
                return (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_atoms_LoadingSpinner__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .A, { size: "sm" });
            default:
                return (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(lucide_react__WEBPACK_IMPORTED_MODULE_2__/* .AlertCircle */ .RIJ, { className: "w-5 h-5 text-gray-400" });
        }
    };
    const getStatusColor = (state) => {
        switch (state) {
            case 'connected':
                return 'border-green-500/30 bg-green-50 dark:bg-green-900/20';
            case 'failed':
                return 'border-red-500/30 bg-red-50 dark:bg-red-900/20';
            case 'checking':
                return 'border-blue-500/30 bg-blue-50 dark:bg-blue-900/20';
            default:
                return 'border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-800';
        }
    };
    const services = [
        { key: 'internet', label: 'Internet', icon: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(lucide_react__WEBPACK_IMPORTED_MODULE_2__/* .Globe */ .qzq, { className: "w-4 h-4" }), status: status.internet },
        { key: 'graph', label: 'Microsoft Graph', icon: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(lucide_react__WEBPACK_IMPORTED_MODULE_2__/* .Cloud */ .Esr, { className: "w-4 h-4" }), status: status.graph },
        { key: 'azure', label: 'Azure AD', icon: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(lucide_react__WEBPACK_IMPORTED_MODULE_2__/* .Shield */ .ekZ, { className: "w-4 h-4" }), status: status.azure },
    ];
    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6 shadow-sm", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "flex items-center justify-between mb-4", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("h3", { className: "text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(lucide_react__WEBPACK_IMPORTED_MODULE_2__/* .Wifi */ .MJO, { className: "w-5 h-5 text-blue-500" }), "Connectivity Status"] }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_atoms_Button__WEBPACK_IMPORTED_MODULE_3__/* .Button */ .$, { variant: "ghost", size: "sm", onClick: onRefresh, loading: isRefreshing, icon: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(lucide_react__WEBPACK_IMPORTED_MODULE_2__/* .RefreshCw */ .e9t, { className: "w-4 h-4" }), children: "Refresh" })] }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: "grid grid-cols-3 gap-4", children: services.map((service) => ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: `
              p-4 rounded-lg border-2 transition-all duration-300
              ${getStatusColor(service.status)}
            `, children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "flex items-center justify-between mb-2", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { className: "text-gray-600 dark:text-gray-400", children: service.icon }), getStatusIcon(service.status)] }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p", { className: "text-sm font-medium text-gray-900 dark:text-white", children: service.label }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p", { className: "text-xs text-gray-500 dark:text-gray-400 capitalize mt-1", children: service.status === 'unknown' ? 'Not checked' : service.status })] }, service.key))) })] }));
};
/**
 * Permission card with hover effects
 */
const PermissionCard = ({ permission, index }) => ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: "\r\n      group p-4 rounded-lg border border-gray-200 dark:border-gray-700\r\n      bg-gradient-to-br from-white to-gray-50 dark:from-gray-800 dark:to-gray-900\r\n      hover:border-blue-300 dark:hover:border-blue-600\r\n      hover:shadow-lg hover:shadow-blue-500/10\r\n      transition-all duration-300 transform hover:-translate-y-1\r\n    ", style: { animationDelay: `${index * 100}ms` }, children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "flex items-start gap-3", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: "p-2 rounded-lg bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 group-hover:scale-110 transition-transform", children: permission.icon }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "flex-1", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "flex items-center gap-2", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p", { className: "font-medium text-gray-900 dark:text-white", children: permission.name }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { className: "px-2 py-0.5 text-xs font-medium bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 rounded-full", children: permission.scope })] }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p", { className: "text-sm text-gray-600 dark:text-gray-400 mt-1", children: permission.description })] })] }) }));
/**
 * Progress step visualization
 */
const ProgressStepCard = ({ steps, currentStepIndex }) => ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: "space-y-3", children: steps.map((step, index) => ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: `
          flex items-center gap-4 p-4 rounded-lg transition-all duration-300
          ${step.status === 'in_progress'
            ? 'bg-blue-50 dark:bg-blue-900/20 border-2 border-blue-300 dark:border-blue-700'
            : step.status === 'completed'
                ? 'bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800'
                : step.status === 'error'
                    ? 'bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800'
                    : 'bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700'}
        `, children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: `
            w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0
            ${step.status === 'completed'
                    ? 'bg-green-500 text-white'
                    : step.status === 'in_progress'
                        ? 'bg-blue-500 text-white'
                        : step.status === 'error'
                            ? 'bg-red-500 text-white'
                            : 'bg-gray-300 dark:bg-gray-600 text-gray-600 dark:text-gray-300'}
          `, children: step.status === 'completed' ? ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(lucide_react__WEBPACK_IMPORTED_MODULE_2__/* .Check */ .Jlk, { className: "w-5 h-5" })) : step.status === 'in_progress' ? ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_atoms_LoadingSpinner__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .A, { size: "sm" })) : step.status === 'error' ? ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(lucide_react__WEBPACK_IMPORTED_MODULE_2__.X, { className: "w-5 h-5" })) : ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { className: "text-sm font-bold", children: index + 1 })) }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "flex-1", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p", { className: `
              font-medium
              ${step.status === 'completed'
                            ? 'text-green-700 dark:text-green-300'
                            : step.status === 'in_progress'
                                ? 'text-blue-700 dark:text-blue-300'
                                : step.status === 'error'
                                    ? 'text-red-700 dark:text-red-300'
                                    : 'text-gray-600 dark:text-gray-400'}
            `, children: step.label }), step.message && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p", { className: "text-sm text-gray-500 dark:text-gray-400 mt-0.5", children: step.message }))] }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: "w-24 text-right", children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { className: `
              text-sm font-medium
              ${step.status === 'completed'
                        ? 'text-green-600 dark:text-green-400'
                        : step.status === 'in_progress'
                            ? 'text-blue-600 dark:text-blue-400'
                            : 'text-gray-400'}
            `, children: [step.percentage, "%"] }) })] }, step.id))) }));
/**
 * Credential display with secure masking
 */
const CredentialDisplay = ({ credentials, showDetails, onToggleDetails, onCopy }) => {
    const maskValue = (value, showFirst = 4, showLast = 4) => {
        if (!value || value.length <= showFirst + showLast + 4)
            return value;
        return `${value.slice(0, showFirst)}${'*'.repeat(8)}${value.slice(-showLast)}`;
    };
    const fields = [
        { label: 'Tenant ID', value: credentials.tenantId },
        { label: 'Client ID', value: credentials.clientId },
        { label: 'Domain', value: credentials.domain },
    ];
    return (_jsxs("div", { className: "space-y-4", children: [_jsxs("div", { className: "flex items-center justify-between", children: [_jsx("h4", { className: "font-medium text-gray-900 dark:text-white", children: "Credential Details" }), _jsx(Button, { variant: "ghost", size: "sm", onClick: onToggleDetails, icon: showDetails ? _jsx(EyeOff, { className: "w-4 h-4" }) : _jsx(Eye, { className: "w-4 h-4" }), children: showDetails ? 'Hide' : 'Show' })] }), _jsx("div", { className: "space-y-3", children: fields.map((field) => (_jsxs("div", { className: "flex items-center gap-3", children: [_jsxs("span", { className: "text-sm text-gray-500 dark:text-gray-400 w-24", children: [field.label, ":"] }), _jsx("code", { className: "flex-1 px-3 py-2 bg-gray-100 dark:bg-gray-700 rounded-lg text-sm font-mono text-gray-800 dark:text-gray-200", children: showDetails ? field.value : maskValue(field.value) }), _jsx(Button, { variant: "ghost", size: "sm", onClick: () => onCopy(field.value), icon: _jsx(Copy, { className: "w-4 h-4" }) })] }, field.label))) }), _jsxs("div", { className: "flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400", children: [_jsx(Clock, { className: "w-4 h-4" }), _jsxs("span", { children: ["Created: ", credentials.created] }), credentials.expiresAt && (_jsxs(_Fragment, { children: [_jsx("span", { className: "mx-2", children: "\u2022" }), _jsxs("span", { children: ["Expires: ", credentials.expiresAt] })] }))] })] }));
};
// ============================================================================
// Confirmation Dialog Component
// ============================================================================
const ConfirmationDialog = ({ isOpen, onClose, onConfirm, companyName, showWindow, autoInstallModules, skipAzureRoles, secretValidityYears, }) => {
    if (!isOpen)
        return null;
    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_organisms_Modal__WEBPACK_IMPORTED_MODULE_6__/* .Modal */ .a, { isOpen: isOpen, onClose: onClose, title: "Confirm App Registration", size: "md", children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "space-y-6", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: "bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4", children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "flex items-start gap-3", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(lucide_react__WEBPACK_IMPORTED_MODULE_2__/* .Info */ .R2D, { className: "w-5 h-5 text-blue-500 mt-0.5 flex-shrink-0" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p", { className: "font-medium text-blue-800 dark:text-blue-200", children: "Review Your Settings" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p", { className: "text-sm text-blue-700 dark:text-blue-300 mt-1", children: "Please confirm the following settings before proceeding. A browser window will open for Azure authentication." })] })] }) }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: "px-4 py-3 bg-gray-50 dark:bg-gray-750 border-b border-gray-200 dark:border-gray-700", children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("h3", { className: "font-medium text-gray-900 dark:text-white flex items-center gap-2", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(lucide_react__WEBPACK_IMPORTED_MODULE_2__/* .Building2 */ .t6i, { className: "w-4 h-4 text-blue-500" }), "Configuration Summary"] }) }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "divide-y divide-gray-200 dark:divide-gray-700", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "px-4 py-3 flex items-center justify-between", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { className: "text-sm text-gray-600 dark:text-gray-400", children: "Company Name" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { className: "font-medium text-gray-900 dark:text-white", children: companyName })] }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "px-4 py-3 flex items-center justify-between", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { className: "text-sm text-gray-600 dark:text-gray-400", children: "Credentials Path" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("code", { className: "text-sm font-mono text-gray-900 dark:text-white bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded", children: ["C:\\DiscoveryData\\", companyName, "\\Credentials"] })] }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "px-4 py-3 flex items-center justify-between", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { className: "text-sm text-gray-600 dark:text-gray-400", children: "Secret Validity" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span", { className: "font-medium text-gray-900 dark:text-white", children: [secretValidityYears, " year", secretValidityYears !== 1 ? 's' : ''] })] })] })] }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: "px-4 py-3 bg-gray-50 dark:bg-gray-750 border-b border-gray-200 dark:border-gray-700", children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("h3", { className: "font-medium text-gray-900 dark:text-white flex items-center gap-2", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(lucide_react__WEBPACK_IMPORTED_MODULE_2__/* .Shield */ .ekZ, { className: "w-4 h-4 text-green-500" }), "Options"] }) }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "p-4 space-y-3", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "flex items-center gap-3", children: [showWindow ? ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(lucide_react__WEBPACK_IMPORTED_MODULE_2__/* .CheckCircle */ .rAV, { className: "w-5 h-5 text-green-500" })) : ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(lucide_react__WEBPACK_IMPORTED_MODULE_2__.X, { className: "w-5 h-5 text-gray-400" })), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { className: `text-sm ${showWindow ? 'text-gray-900 dark:text-white' : 'text-gray-500 dark:text-gray-400'}`, children: "Show PowerShell Window" })] }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "flex items-center gap-3", children: [autoInstallModules ? ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(lucide_react__WEBPACK_IMPORTED_MODULE_2__/* .CheckCircle */ .rAV, { className: "w-5 h-5 text-green-500" })) : ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(lucide_react__WEBPACK_IMPORTED_MODULE_2__.X, { className: "w-5 h-5 text-gray-400" })), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { className: `text-sm ${autoInstallModules ? 'text-gray-900 dark:text-white' : 'text-gray-500 dark:text-gray-400'}`, children: "Auto-Install Required Modules" })] }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "flex items-center gap-3", children: [skipAzureRoles ? ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(lucide_react__WEBPACK_IMPORTED_MODULE_2__/* .CheckCircle */ .rAV, { className: "w-5 h-5 text-green-500" })) : ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(lucide_react__WEBPACK_IMPORTED_MODULE_2__.X, { className: "w-5 h-5 text-gray-400" })), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span", { className: `text-sm ${skipAzureRoles ? 'text-gray-900 dark:text-white' : 'text-gray-500 dark:text-gray-400'}`, children: "Skip Azure Role Assignments" })] })] })] }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: "bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4", children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "flex items-start gap-3", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(lucide_react__WEBPACK_IMPORTED_MODULE_2__/* .AlertTriangle */ .hcu, { className: "w-5 h-5 text-yellow-500 mt-0.5 flex-shrink-0" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p", { className: "font-medium text-yellow-800 dark:text-yellow-200", children: "Global Admin Required" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("p", { className: "text-sm text-yellow-700 dark:text-yellow-300 mt-1", children: ["After clicking \"Confirm & Launch\", a browser window will open for Microsoft authentication. You must sign in with a ", (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("strong", { children: "Global Administrator" }), " account to create the app registration."] })] })] }) }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "flex justify-end gap-3 pt-4 border-t border-gray-200 dark:border-gray-700", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_atoms_Button__WEBPACK_IMPORTED_MODULE_3__/* .Button */ .$, { variant: "secondary", onClick: onClose, children: "Go Back" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_atoms_Button__WEBPACK_IMPORTED_MODULE_3__/* .Button */ .$, { variant: "primary", onClick: onConfirm, icon: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(lucide_react__WEBPACK_IMPORTED_MODULE_2__/* .Play */ .jGG, { className: "w-4 h-4" }), children: "Confirm & Launch" })] })] }) }));
};
// ============================================================================
// Main Component
// ============================================================================
const SetupCompanyView = () => {
    // App registration hook
    const { state: appRegState, launchAppRegistration, checkExistingCredentials, importExistingCredentials, stopMonitoring, reset: resetAppRegistration } = (0,_hooks_useAppRegistration__WEBPACK_IMPORTED_MODULE_9__/* .useAppRegistration */ .w)();
    // Wizard state
    const [currentStep, setCurrentStep] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);
    const [completedSteps, setCompletedSteps] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(new Set());
    // Confirmation dialog state
    const [showConfirmation, setShowConfirmation] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);
    // Form state
    const [companyName, setCompanyName] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)('');
    const [tenantId, setTenantId] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)('');
    const [showWindow, setShowWindow] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);
    const [autoInstallModules, setAutoInstallModules] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);
    const [secretValidityYears, setSecretValidityYears] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(2);
    const [skipAzureRoles, setSkipAzureRoles] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);
    // Connectivity state
    const [connectivity, setConnectivity] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({
        internet: 'unknown',
        graph: 'unknown',
        azure: 'unknown',
    });
    const [isCheckingConnectivity, setIsCheckingConnectivity] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);
    // Existing credentials check
    const [hasExistingCredentials, setHasExistingCredentials] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);
    // Progress steps - now driven by appRegState
    const progressSteps = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => {
        if (appRegState.success) {
            return [
                { id: 'launch', label: 'Launching PowerShell Script', status: 'completed', percentage: 25, message: 'Script launched' },
                { id: 'register', label: 'Creating App Registration', status: 'completed', percentage: 50, message: 'App registered' },
                { id: 'permissions', label: 'Configuring Permissions', status: 'completed', percentage: 75, message: 'Permissions granted' },
                { id: 'store', label: 'Storing Credentials', status: 'completed', percentage: 100, message: 'Credentials saved' },
            ];
        }
        if (appRegState.error) {
            return [
                { id: 'launch', label: 'Launching PowerShell Script', status: appRegState.isRunning || appRegState.isMonitoring ? 'completed' : 'error', percentage: 25 },
                { id: 'register', label: 'Creating App Registration', status: 'pending', percentage: 50 },
                { id: 'permissions', label: 'Configuring Permissions', status: 'pending', percentage: 75 },
                { id: 'store', label: 'Storing Credentials', status: 'pending', percentage: 100 },
            ];
        }
        if (appRegState.isMonitoring) {
            return [
                { id: 'launch', label: 'Launching PowerShell Script', status: 'completed', percentage: 25, message: 'Script launched' },
                { id: 'register', label: 'Creating App Registration', status: 'in_progress', percentage: 50, message: appRegState.progress },
                { id: 'permissions', label: 'Configuring Permissions', status: 'pending', percentage: 75 },
                { id: 'store', label: 'Storing Credentials', status: 'pending', percentage: 100 },
            ];
        }
        if (appRegState.isRunning) {
            return [
                { id: 'launch', label: 'Launching PowerShell Script', status: 'in_progress', percentage: 25, message: appRegState.progress },
                { id: 'register', label: 'Creating App Registration', status: 'pending', percentage: 50 },
                { id: 'permissions', label: 'Configuring Permissions', status: 'pending', percentage: 75 },
                { id: 'store', label: 'Storing Credentials', status: 'pending', percentage: 100 },
            ];
        }
        return [
            { id: 'launch', label: 'Launching PowerShell Script', status: 'pending', percentage: 25 },
            { id: 'register', label: 'Creating App Registration', status: 'pending', percentage: 50 },
            { id: 'permissions', label: 'Configuring Permissions', status: 'pending', percentage: 75 },
            { id: 'store', label: 'Storing Credentials', status: 'pending', percentage: 100 },
        ];
    }, [appRegState]);
    // Credential state
    const [credentials, setCredentials] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);
    const [showCredentials, setShowCredentials] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);
    // Derived state from hook
    const isRunning = appRegState.isRunning || appRegState.isMonitoring;
    const error = appRegState.error;
    const success = appRegState.success;
    const progress = appRegState.success ? 100 : appRegState.isMonitoring ? 50 : appRegState.isRunning ? 25 : 0;
    // Wizard steps definition
    const wizardSteps = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => [
        {
            id: 'welcome',
            title: 'Welcome',
            description: 'Get started with Azure integration',
            icon: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(lucide_react__WEBPACK_IMPORTED_MODULE_2__/* .Sparkles */ .sUz, { className: "w-6 h-6" }),
        },
        {
            id: 'connectivity',
            title: 'Connectivity',
            description: 'Check cloud service connections',
            icon: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(lucide_react__WEBPACK_IMPORTED_MODULE_2__/* .Globe */ .qzq, { className: "w-6 h-6" }),
        },
        {
            id: 'company',
            title: 'Company',
            description: 'Enter organization details',
            icon: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(lucide_react__WEBPACK_IMPORTED_MODULE_2__/* .Building2 */ .t6i, { className: "w-6 h-6" }),
        },
        {
            id: 'permissions',
            title: 'Permissions',
            description: 'Review required access',
            icon: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(lucide_react__WEBPACK_IMPORTED_MODULE_2__/* .Shield */ .ekZ, { className: "w-6 h-6" }),
        },
        {
            id: 'setup',
            title: 'Setup',
            description: 'Create app registration',
            icon: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(lucide_react__WEBPACK_IMPORTED_MODULE_2__/* .Zap */ .KqI, { className: "w-6 h-6" }),
        },
    ], []);
    // Check connectivity
    const checkConnectivity = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(async () => {
        setIsCheckingConnectivity(true);
        setConnectivity({ internet: 'checking', graph: 'checking', azure: 'checking' });
        // Check internet
        try {
            const online = navigator.onLine;
            setConnectivity((prev) => ({ ...prev, internet: online ? 'connected' : 'failed' }));
        }
        catch {
            setConnectivity((prev) => ({ ...prev, internet: 'failed' }));
        }
        // Check Graph API (simulated for now)
        await new Promise((resolve) => setTimeout(resolve, 500));
        try {
            // In real implementation, use fetch to graph.microsoft.com
            setConnectivity((prev) => ({ ...prev, graph: 'connected' }));
        }
        catch {
            setConnectivity((prev) => ({ ...prev, graph: 'failed' }));
        }
        // Check Azure AD (simulated for now)
        await new Promise((resolve) => setTimeout(resolve, 500));
        try {
            setConnectivity((prev) => ({ ...prev, azure: 'connected' }));
        }
        catch {
            setConnectivity((prev) => ({ ...prev, azure: 'failed' }));
        }
        setIsCheckingConnectivity(false);
    }, []);
    // Validate tenant ID format
    const validateTenantId = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((id) => {
        if (!id)
            return true; // Empty is valid (optional field)
        const guidRegex = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;
        const domainRegex = /^[a-zA-Z0-9][a-zA-Z0-9-]*\.onmicrosoft\.com$/i;
        return guidRegex.test(id) || domainRegex.test(id);
    }, []);
    // Copy to clipboard
    const copyToClipboard = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(async (text) => {
        try {
            await navigator.clipboard.writeText(text);
            // Could add a toast notification here
        }
        catch (err) {
            console.error('Failed to copy:', err);
        }
    }, []);
    // Navigate wizard
    const nextStep = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(() => {
        if (currentStep < wizardSteps.length - 1) {
            setCompletedSteps((prev) => new Set([...prev, currentStep]));
            setCurrentStep((prev) => prev + 1);
        }
    }, [currentStep, wizardSteps.length]);
    const prevStep = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(() => {
        if (currentStep > 0) {
            setCurrentStep((prev) => prev - 1);
        }
    }, [currentStep]);
    // Check for existing credentials when company name changes
    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {
        if (companyName.trim()) {
            checkExistingCredentials(companyName.trim())
                .then(setHasExistingCredentials);
        }
        else {
            setHasExistingCredentials(false);
        }
    }, [companyName, checkExistingCredentials]);
    // Show confirmation dialog before starting
    const showConfirmDialog = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(() => {
        if (!companyName.trim()) {
            return;
        }
        setShowConfirmation(true);
    }, [companyName]);
    // Actually launch the setup after confirmation
    const confirmAndLaunch = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(() => {
        setShowConfirmation(false);
        // Launch the real PowerShell script via the hook
        launchAppRegistration({
            companyName: companyName.trim(),
            showWindow,
            autoInstallModules,
            secretValidityYears,
            skipAzureRoles
        });
    }, [companyName, showWindow, autoInstallModules, secretValidityYears, skipAzureRoles, launchAppRegistration]);
    // Handle import existing credentials
    const handleImportExisting = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(() => {
        if (companyName.trim()) {
            importExistingCredentials(companyName.trim());
        }
    }, [companyName, importExistingCredentials]);
    // Cancel/stop the process
    const handleCancel = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(() => {
        stopMonitoring();
    }, [stopMonitoring]);
    // Reset form
    const resetForm = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(() => {
        setCurrentStep(0);
        setCompletedSteps(new Set());
        setCompanyName('');
        setTenantId('');
        setShowWindow(true);
        setAutoInstallModules(true);
        setSecretValidityYears(2);
        setSkipAzureRoles(false);
        setCredentials(null);
        setHasExistingCredentials(false);
        resetAppRegistration();
    }, [resetAppRegistration]);
    // Check connectivity on mount
    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {
        checkConnectivity();
    }, [checkConnectivity]);
    // Can proceed check
    const canProceed = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => {
        switch (currentStep) {
            case 0: // Welcome
                return true;
            case 1: // Connectivity
                return connectivity.internet === 'connected';
            case 2: // Company
                return companyName.trim().length > 0 && validateTenantId(tenantId);
            case 3: // Permissions
                return true;
            case 4: // Setup
                return !isRunning;
            default:
                return false;
        }
    }, [currentStep, connectivity, companyName, tenantId, validateTenantId, isRunning]);
    // Render step content
    const renderStepContent = () => {
        switch (currentStep) {
            case 0: // Welcome
                return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "text-center py-8", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: "w-24 h-24 mx-auto mb-6 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center shadow-lg shadow-blue-500/30", children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(lucide_react__WEBPACK_IMPORTED_MODULE_2__/* .Cloud */ .Esr, { className: "w-12 h-12 text-white" }) }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h2", { className: "text-3xl font-bold text-gray-900 dark:text-white mb-4", children: "Welcome to Azure Setup" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("p", { className: "text-lg text-gray-600 dark:text-gray-400 max-w-2xl mx-auto mb-8", children: ["This wizard will guide you through creating an Azure App Registration for the M&A Discovery Suite. You'll need ", (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("strong", { children: "Global Administrator" }), " or ", (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("strong", { children: "Application Administrator" }), " permissions in Azure AD."] }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: "grid grid-cols-3 gap-6 max-w-3xl mx-auto mt-8", children: [
                                { icon: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(lucide_react__WEBPACK_IMPORTED_MODULE_2__/* .Shield */ .ekZ, { className: "w-8 h-8" }), label: 'Secure', desc: 'AES-256 encrypted credentials' },
                                { icon: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(lucide_react__WEBPACK_IMPORTED_MODULE_2__/* .Zap */ .KqI, { className: "w-8 h-8" }), label: 'Fast', desc: 'Automated setup in minutes' },
                                { icon: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(lucide_react__WEBPACK_IMPORTED_MODULE_2__/* .Lock */ .c_I, { className: "w-8 h-8" }), label: 'Compliant', desc: 'GDPR/CCPA ready' },
                            ].map((item, i) => ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "p-6 rounded-xl bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900 border border-gray-200 dark:border-gray-700", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: "w-16 h-16 mx-auto mb-4 rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 flex items-center justify-center", children: item.icon }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h3", { className: "font-semibold text-gray-900 dark:text-white mb-1", children: item.label }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: item.desc })] }, i))) })] }));
            case 1: // Connectivity
                return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "max-w-3xl mx-auto", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "text-center mb-8", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h2", { className: "text-2xl font-bold text-gray-900 dark:text-white mb-2", children: "Check Connectivity" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p", { className: "text-gray-600 dark:text-gray-400", children: "Ensure all required cloud services are accessible before proceeding." })] }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ConnectivityCard, { status: connectivity, onRefresh: checkConnectivity, isRefreshing: isCheckingConnectivity }), connectivity.internet === 'failed' && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: "mt-6 p-4 rounded-lg bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800", children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "flex items-start gap-3", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(lucide_react__WEBPACK_IMPORTED_MODULE_2__/* .AlertTriangle */ .hcu, { className: "w-5 h-5 text-red-500 mt-0.5" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p", { className: "font-medium text-red-800 dark:text-red-200", children: "No Internet Connection" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p", { className: "text-sm text-red-700 dark:text-red-300 mt-1", children: "Please check your network connection and try again." })] })] }) }))] }));
            case 2: // Company
                return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "max-w-2xl mx-auto", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "text-center mb-8", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h2", { className: "text-2xl font-bold text-gray-900 dark:text-white mb-2", children: "Company Information" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p", { className: "text-gray-600 dark:text-gray-400", children: "Enter your organization details for the app registration." })] }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "space-y-6 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_atoms_Input__WEBPACK_IMPORTED_MODULE_4__/* .Input */ .p, { label: "Company Name", value: companyName, onChange: (e) => setCompanyName(e.target.value), placeholder: "Enter company name", required: true, fullWidth: true, startIcon: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(lucide_react__WEBPACK_IMPORTED_MODULE_2__/* .Building2 */ .t6i, { className: "w-4 h-4" }), helperText: "Used to organize credentials in C:\\DiscoveryData\\[CompanyName]", "data-cy": "company-name-input" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_atoms_Input__WEBPACK_IMPORTED_MODULE_4__/* .Input */ .p, { label: "Tenant ID", value: tenantId, onChange: (e) => setTenantId(e.target.value), placeholder: "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx or domain.onmicrosoft.com", fullWidth: true, startIcon: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(lucide_react__WEBPACK_IMPORTED_MODULE_2__/* .Globe */ .qzq, { className: "w-4 h-4" }), error: tenantId && !validateTenantId(tenantId) ? 'Invalid format' : undefined, helperText: "Leave blank to select tenant during authentication", "data-cy": "tenant-id-input" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "pt-4 border-t border-gray-200 dark:border-gray-700", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h4", { className: "text-sm font-medium text-gray-900 dark:text-white mb-4", children: "Options" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "space-y-4", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_atoms_Checkbox__WEBPACK_IMPORTED_MODULE_5__/* .Checkbox */ .S, { label: "Show PowerShell Window", checked: showWindow, onChange: setShowWindow, description: "Recommended for first-time setup to see authentication prompts" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_atoms_Checkbox__WEBPACK_IMPORTED_MODULE_5__/* .Checkbox */ .S, { label: "Auto-Install Required Modules", checked: autoInstallModules, onChange: setAutoInstallModules, description: "Automatically install Microsoft.Graph and required PowerShell modules" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_atoms_Checkbox__WEBPACK_IMPORTED_MODULE_5__/* .Checkbox */ .S, { label: "Skip Azure Role Assignments", checked: skipAzureRoles, onChange: setSkipAzureRoles, description: "For limited admin access - skip assigning Azure AD roles" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("label", { className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2", children: "Client Secret Validity (Years)" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("input", { type: "number", min: "1", max: "10", value: secretValidityYears, onChange: (e) => setSecretValidityYears(parseInt(e.target.value) || 2), className: "w-32 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p", { className: "mt-1 text-xs text-gray-500 dark:text-gray-400", children: "Microsoft recommends maximum 2 years" })] })] })] })] })] }));
            case 3: // Permissions
                return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "max-w-3xl mx-auto", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "text-center mb-8", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h2", { className: "text-2xl font-bold text-gray-900 dark:text-white mb-2", children: "Required Permissions" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p", { className: "text-gray-600 dark:text-gray-400", children: "The following Microsoft Graph API permissions will be requested." })] }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: "grid grid-cols-2 gap-4 mb-6", children: REQUIRED_PERMISSIONS.map((permission, index) => ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(PermissionCard, { permission: permission, index: index }, permission.name))) }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: "p-4 rounded-lg bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800", children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "flex items-start gap-3", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(lucide_react__WEBPACK_IMPORTED_MODULE_2__/* .Info */ .R2D, { className: "w-5 h-5 text-blue-500 mt-0.5 flex-shrink-0" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p", { className: "font-medium text-blue-800 dark:text-blue-200", children: "Administrator Consent Required" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p", { className: "text-sm text-blue-700 dark:text-blue-300 mt-1", children: "These permissions require admin consent. You'll be prompted to sign in with an administrator account during the setup process." })] })] }) })] }));
            case 4: // Setup
                return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "max-w-3xl mx-auto", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "text-center mb-8", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h2", { className: "text-2xl font-bold text-gray-900 dark:text-white mb-2", children: success ? 'Setup Complete!' : 'Create App Registration' }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p", { className: "text-gray-600 dark:text-gray-400", children: success
                                        ? 'Your Azure App Registration has been created successfully and credentials have been imported.'
                                        : 'Ready to create the Azure App Registration for ' + companyName })] }), hasExistingCredentials && !success && !isRunning && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: "mb-6 p-4 rounded-lg bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800", children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "flex items-start gap-3", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(lucide_react__WEBPACK_IMPORTED_MODULE_2__/* .AlertTriangle */ .hcu, { className: "w-5 h-5 text-yellow-500 mt-0.5" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "flex-1", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p", { className: "font-medium text-yellow-800 dark:text-yellow-200", children: "Existing Credentials Found" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("p", { className: "text-sm text-yellow-700 dark:text-yellow-300 mt-1", children: ["App registration credentials already exist for \"", companyName, "\". You can import them or create new ones."] }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_atoms_Button__WEBPACK_IMPORTED_MODULE_3__/* .Button */ .$, { variant: "secondary", size: "sm", onClick: handleImportExisting, className: "mt-2", children: "Import Existing Credentials" })] })] }) })), error && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: "mb-6 p-4 rounded-lg bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800", children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "flex items-start gap-3", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(lucide_react__WEBPACK_IMPORTED_MODULE_2__/* .AlertCircle */ .RIJ, { className: "w-5 h-5 text-red-500 mt-0.5" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p", { className: "font-medium text-red-800 dark:text-red-200", children: "Error" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p", { className: "text-sm text-red-700 dark:text-red-300 mt-1", children: error }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_atoms_Button__WEBPACK_IMPORTED_MODULE_3__/* .Button */ .$, { variant: "secondary", size: "sm", onClick: resetAppRegistration, className: "mt-2", children: "Try Again" })] })] }) })), success ? ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "space-y-6", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: "p-6 rounded-xl bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800", children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "flex items-center gap-3 mb-4", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: "w-12 h-12 rounded-full bg-green-500 flex items-center justify-center", children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(lucide_react__WEBPACK_IMPORTED_MODULE_2__/* .CheckCircle */ .rAV, { className: "w-6 h-6 text-white" }) }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h3", { className: "font-semibold text-green-800 dark:text-green-200", children: "App Registration Complete" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p", { className: "text-sm text-green-700 dark:text-green-300", children: "Credentials have been securely stored and imported into your profile." })] })] }) }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ProgressStepCard, { steps: progressSteps, currentStepIndex: 3 }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "flex justify-center gap-4 mt-8", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_atoms_Button__WEBPACK_IMPORTED_MODULE_3__/* .Button */ .$, { variant: "secondary", onClick: resetForm, icon: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(lucide_react__WEBPACK_IMPORTED_MODULE_2__/* .RefreshCw */ .e9t, { className: "w-4 h-4" }), children: "Create Another" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_atoms_Button__WEBPACK_IMPORTED_MODULE_3__/* .Button */ .$, { variant: "primary", icon: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(lucide_react__WEBPACK_IMPORTED_MODULE_2__/* .ExternalLink */ .GrD, { className: "w-4 h-4" }), onClick: () => window.open('https://portal.azure.com/#blade/Microsoft_AAD_IAM/ActiveDirectoryMenuBlade/RegisteredApps'), children: "View in Azure Portal" })] })] })) : ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "space-y-6", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ProgressStepCard, { steps: progressSteps, currentStepIndex: isRunning ? 1 : 0 }), isRunning && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "mt-6", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_molecules_ProgressBar__WEBPACK_IMPORTED_MODULE_7__/* .ProgressBar */ .z, { value: progress, max: 100, variant: "info", size: "lg", animated: true, striped: true }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p", { className: "text-center text-sm text-gray-600 dark:text-gray-400 mt-2", children: appRegState.progress || 'Processing...' })] })), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: "flex justify-center gap-4 mt-8", children: isRunning ? ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_atoms_Button__WEBPACK_IMPORTED_MODULE_3__/* .Button */ .$, { variant: "danger", size: "lg", onClick: handleCancel, icon: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(lucide_react__WEBPACK_IMPORTED_MODULE_2__/* .StopCircle */ .XVv, { className: "w-5 h-5" }), className: "px-8", children: "Cancel" })) : !error && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_atoms_Button__WEBPACK_IMPORTED_MODULE_3__/* .Button */ .$, { variant: "primary", size: "lg", onClick: showConfirmDialog, icon: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(lucide_react__WEBPACK_IMPORTED_MODULE_2__/* .Play */ .jGG, { className: "w-5 h-5" }), className: "px-8", children: "Start App Registration" })) })] }))] }));
            default:
                return null;
        }
    };
    return ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "h-full flex flex-col bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-950", "data-cy": "setup-company-view", "data-testid": "setup-company-view", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ConfirmationDialog, { isOpen: showConfirmation, onClose: () => setShowConfirmation(false), onConfirm: confirmAndLaunch, companyName: companyName, showWindow: showWindow, autoInstallModules: autoInstallModules, skipAzureRoles: skipAzureRoles, secretValidityYears: secretValidityYears }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: "bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-6 py-4 shadow-sm", children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "flex items-center justify-between max-w-6xl mx-auto", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "flex items-center gap-3", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: "p-2 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl shadow-lg shadow-blue-500/20", children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(lucide_react__WEBPACK_IMPORTED_MODULE_2__/* .Building2 */ .t6i, { className: "w-6 h-6 text-white" }) }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h1", { className: "text-xl font-bold text-gray-900 dark:text-white", children: "Company Setup" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: "Azure App Registration Wizard" })] })] }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_atoms_Button__WEBPACK_IMPORTED_MODULE_3__/* .Button */ .$, { variant: "secondary", onClick: resetForm, icon: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(lucide_react__WEBPACK_IMPORTED_MODULE_2__/* .RefreshCw */ .e9t, { className: "w-4 h-4" }), children: "Reset" })] }) }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: "flex-1 overflow-auto py-8", children: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "max-w-6xl mx-auto px-6", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(StepIndicator, { steps: wizardSteps, currentStep: currentStep, completedSteps: completedSteps }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: "min-h-[500px]", children: renderStepContent() }), !success && ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", { className: "flex items-center justify-between mt-8 pt-6 border-t border-gray-200 dark:border-gray-700", children: [(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_atoms_Button__WEBPACK_IMPORTED_MODULE_3__/* .Button */ .$, { variant: "secondary", onClick: prevStep, disabled: currentStep === 0 || isRunning, icon: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(lucide_react__WEBPACK_IMPORTED_MODULE_2__/* .ChevronLeft */ .JGc, { className: "w-4 h-4" }), children: "Previous" }), (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: "flex items-center gap-2", children: wizardSteps.map((_, index) => ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: `
                      w-2 h-2 rounded-full transition-all
                      ${index === currentStep ? 'w-8 bg-blue-500' : 'bg-gray-300 dark:bg-gray-600'}
                    ` }, index))) }), currentStep < wizardSteps.length - 1 ? ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_atoms_Button__WEBPACK_IMPORTED_MODULE_3__/* .Button */ .$, { variant: "primary", onClick: nextStep, disabled: !canProceed, icon: (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(lucide_react__WEBPACK_IMPORTED_MODULE_2__/* .ChevronRight */ .c_$, { className: "w-4 h-4" }), iconPosition: "trailing", children: "Continue" })) : ((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div", { className: "w-24" }))] }))] }) })] }));
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (SetupCompanyView);


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNzE3Ni4zZjQzMTE2ZTYyNmIwMzJkNTQxYy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQStEO0FBQy9EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUMwQjtBQUNFO0FBQzVCO0FBQ0E7QUFDQTtBQUNPLHVCQUF1Qix5S0FBeUs7QUFDdk07QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLG1EQUFJO0FBQ2pDLHlCQUF5QixtREFBSTtBQUM3Qix1QkFBdUIsbURBQUk7QUFDM0I7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLCtDQUErQyx1QkFBdUI7QUFDdEUsWUFBWSx1REFBSyxVQUFVLHdHQUF3RyxzREFBSSxVQUFVLCtEQUErRCxzREFBSSxXQUFXLHFFQUFxRSxHQUFHLElBQUksc0RBQUksVUFBVSwwSEFBMEgsc0RBQUksVUFBVSxnQ0FBZ0MsVUFBVSxXQUFXLElBQUkseUVBQXlFLHNEQUFJLFVBQVUscUVBQXFFLHNEQUFJLFdBQVcsc0ZBQXNGLEdBQUcsSUFBSSxHQUFHLElBQUk7QUFDendCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpRUFBZSxXQUFXLEVBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNyRTJEO0FBQ3RGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDeUU7QUFDMEw7QUFDNU07QUFDRjtBQUNNO0FBQ0Y7QUFDWTtBQUNGO0FBQ0M7QUFDcEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsc0RBQUksQ0FBQywyREFBTSxJQUFJLHNCQUFzQjtBQUNuRDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxjQUFjLHNEQUFJLENBQUMsMERBQUssSUFBSSxzQkFBc0I7QUFDbEQ7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsY0FBYyxzREFBSSxDQUFDLDBEQUFLLElBQUksc0JBQXNCO0FBQ2xEO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLGNBQWMsc0RBQUksQ0FBQyw4REFBUyxJQUFJLHNCQUFzQjtBQUN0RDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixvQ0FBb0MsTUFBTSxzREFBSSxVQUFVLDBGQUEwRix1REFBSyxDQUFDLDJDQUFjLElBQUksV0FBVyx1REFBSyxVQUFVLG9EQUFvRCxzREFBSSxVQUFVO0FBQy9SO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzREFBc0Qsc0RBQUksQ0FBQywwREFBSyxJQUFJLHNCQUFzQixNQUFNLHNEQUFJLFdBQVcscURBQXFELElBQUksR0FBRyxzREFBSSxXQUFXO0FBQzFMO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLElBQUksZ0NBQWdDLHNEQUFJLFVBQVU7QUFDdkY7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLEtBQUssY0FBYztBQUNsQztBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsaUNBQWlDO0FBQzdEO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixzREFBSSxDQUFDLGdFQUFXLElBQUkscUNBQXFDO0FBQ2hGO0FBQ0EsdUJBQXVCLHNEQUFJLENBQUMsMkNBQUMsSUFBSSxtQ0FBbUM7QUFDcEU7QUFDQSx1QkFBdUIsc0RBQUksQ0FBQyxpRkFBYyxJQUFJLFlBQVk7QUFDMUQ7QUFDQSx1QkFBdUIsc0RBQUksQ0FBQyxnRUFBVyxJQUFJLG9DQUFvQztBQUMvRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLDBDQUEwQyxzREFBSSxDQUFDLDBEQUFLLElBQUksc0JBQXNCLDRCQUE0QjtBQUNwSCxVQUFVLDhDQUE4QyxzREFBSSxDQUFDLDBEQUFLLElBQUksc0JBQXNCLHlCQUF5QjtBQUNySCxVQUFVLHVDQUF1QyxzREFBSSxDQUFDLDJEQUFNLElBQUksc0JBQXNCLHlCQUF5QjtBQUMvRztBQUNBLFlBQVksdURBQUssVUFBVSx3SEFBd0gsdURBQUssVUFBVSxnRUFBZ0UsdURBQUssU0FBUyxxR0FBcUcsc0RBQUksQ0FBQyx5REFBSSxJQUFJLG9DQUFvQywyQkFBMkIsR0FBRyxzREFBSSxDQUFDLHFFQUFNLElBQUksK0VBQStFLHNEQUFJLENBQUMsOERBQVMsSUFBSSxzQkFBc0Isd0JBQXdCLElBQUksR0FBRyxzREFBSSxVQUFVLDBFQUEwRSx1REFBSyxVQUFVO0FBQ2hyQjtBQUNBLGdCQUFnQjtBQUNoQiwwQkFBMEIsdURBQUssVUFBVSxnRUFBZ0Usc0RBQUksV0FBVyx1RUFBdUUsbUNBQW1DLEdBQUcsc0RBQUksUUFBUSx5RkFBeUYsR0FBRyxzREFBSSxRQUFRLGdKQUFnSixJQUFJLGtCQUFrQixJQUFJO0FBQ25nQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixtQkFBbUIsTUFBTSxzREFBSSxVQUFVLCtXQUErVyxtQkFBbUIsWUFBWSxLQUFLLFlBQVksdURBQUssVUFBVSxnREFBZ0Qsc0RBQUksVUFBVSxvS0FBb0ssR0FBRyx1REFBSyxVQUFVLGdDQUFnQyx1REFBSyxVQUFVLGlEQUFpRCxzREFBSSxRQUFRLG1GQUFtRixHQUFHLHNEQUFJLFdBQVcsZ0tBQWdLLElBQUksR0FBRyxzREFBSSxRQUFRLDhGQUE4RixJQUFJLElBQUksR0FBRztBQUNodEM7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLHlCQUF5QixNQUFNLHNEQUFJLFVBQVUsOERBQThELHVEQUFLLFVBQVU7QUFDdEo7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLHNEQUFJLFVBQVU7QUFDcEM7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0RBQXNELHNEQUFJLENBQUMsMERBQUssSUFBSSxzQkFBc0Isc0NBQXNDLHNEQUFJLENBQUMsaUZBQWMsSUFBSSxZQUFZLGdDQUFnQyxzREFBSSxDQUFDLDJDQUFDLElBQUksc0JBQXNCLE1BQU0sc0RBQUksV0FBVyxxREFBcUQsSUFBSSxHQUFHLHVEQUFLLFVBQVUsZ0NBQWdDLHNEQUFJLFFBQVE7QUFDL1c7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLG9CQUFvQixzREFBSSxRQUFRLHNGQUFzRixLQUFLLEdBQUcsc0RBQUksVUFBVSx3Q0FBd0MsdURBQUssV0FBVztBQUN6TztBQUNBLGdCQUFnQjtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQUFpRCxHQUFHLElBQUksY0FBYztBQUN0RTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsbURBQW1EO0FBQ2hGO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQiwwQkFBMEIsRUFBRSxjQUFjLEVBQUUsdUJBQXVCO0FBQ3JGO0FBQ0E7QUFDQSxVQUFVLGlEQUFpRDtBQUMzRCxVQUFVLGlEQUFpRDtBQUMzRCxVQUFVLDRDQUE0QztBQUN0RDtBQUNBLDJCQUEyQixrREFBa0Qsd0VBQXdFLHdGQUF3RixrQkFBa0IsMkZBQTJGLHNCQUFzQixnQkFBZ0Isc0JBQXNCLDRDQUE0QyxJQUFJLGlCQUFpQix3RUFBd0UsaUVBQWlFLDBGQUEwRixrQkFBa0Isd0xBQXdMLGtCQUFrQixxRkFBcUYsc0JBQXNCLEdBQUcsSUFBSSxrQkFBa0Isa0JBQWtCLHdHQUF3RyxzQkFBc0IsbUJBQW1CLDhDQUE4QyxnREFBZ0QsMEJBQTBCLHVDQUF1QyxtQkFBbUIsZ0RBQWdELElBQUksS0FBSyxJQUFJO0FBQzU2QztBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QiwrR0FBK0c7QUFDN0k7QUFDQTtBQUNBLFlBQVksc0RBQUksQ0FBQyx1RUFBSyxJQUFJLDJGQUEyRix1REFBSyxVQUFVLG1DQUFtQyxzREFBSSxVQUFVLGtIQUFrSCx1REFBSyxVQUFVLGdEQUFnRCxzREFBSSxDQUFDLHlEQUFJLElBQUkseURBQXlELEdBQUcsdURBQUssVUFBVSxXQUFXLHNEQUFJLFFBQVEsNkZBQTZGLEdBQUcsc0RBQUksUUFBUSx1TEFBdUwsSUFBSSxJQUFJLEdBQUcsR0FBRyx1REFBSyxVQUFVLDBIQUEwSCxzREFBSSxVQUFVLDRHQUE0Ryx1REFBSyxTQUFTLDJGQUEyRixzREFBSSxDQUFDLDhEQUFTLElBQUksb0NBQW9DLDZCQUE2QixHQUFHLEdBQUcsdURBQUssVUFBVSx1RUFBdUUsdURBQUssVUFBVSxxRUFBcUUsc0RBQUksV0FBVyxpRkFBaUYsR0FBRyxzREFBSSxXQUFXLCtFQUErRSxJQUFJLEdBQUcsdURBQUssVUFBVSxxRUFBcUUsc0RBQUksV0FBVyxxRkFBcUYsR0FBRyx1REFBSyxXQUFXLDhLQUE4SyxJQUFJLEdBQUcsdURBQUssVUFBVSxxRUFBcUUsc0RBQUksV0FBVyxvRkFBb0YsR0FBRyx1REFBSyxXQUFXLHdJQUF3SSxJQUFJLElBQUksSUFBSSxHQUFHLHVEQUFLLFVBQVUsMEhBQTBILHNEQUFJLFVBQVUsNEdBQTRHLHVEQUFLLFNBQVMsMkZBQTJGLHNEQUFJLENBQUMsMkRBQU0sSUFBSSxxQ0FBcUMsZUFBZSxHQUFHLEdBQUcsdURBQUssVUFBVSx1Q0FBdUMsdURBQUssVUFBVSwrREFBK0Qsc0RBQUksQ0FBQyxnRUFBVyxJQUFJLHFDQUFxQyxNQUFNLHNEQUFJLENBQUMsMkNBQUMsSUFBSSxvQ0FBb0MsSUFBSSxzREFBSSxXQUFXLHNCQUFzQixrRkFBa0YsdUNBQXVDLElBQUksR0FBRyx1REFBSyxVQUFVLHVFQUF1RSxzREFBSSxDQUFDLGdFQUFXLElBQUkscUNBQXFDLE1BQU0sc0RBQUksQ0FBQywyQ0FBQyxJQUFJLG9DQUFvQyxJQUFJLHNEQUFJLFdBQVcsc0JBQXNCLDBGQUEwRiw4Q0FBOEMsSUFBSSxHQUFHLHVEQUFLLFVBQVUsbUVBQW1FLHNEQUFJLENBQUMsZ0VBQVcsSUFBSSxxQ0FBcUMsTUFBTSxzREFBSSxDQUFDLDJDQUFDLElBQUksb0NBQW9DLElBQUksc0RBQUksV0FBVyxzQkFBc0Isc0ZBQXNGLDRDQUE0QyxJQUFJLElBQUksSUFBSSxHQUFHLHNEQUFJLFVBQVUsMEhBQTBILHVEQUFLLFVBQVUsZ0RBQWdELHNEQUFJLENBQUMsa0VBQWEsSUFBSSwyREFBMkQsR0FBRyx1REFBSyxVQUFVLFdBQVcsc0RBQUksUUFBUSxrR0FBa0csR0FBRyx1REFBSyxRQUFRLHFNQUFxTSxzREFBSSxhQUFhLGtDQUFrQyxnREFBZ0QsSUFBSSxJQUFJLEdBQUcsR0FBRyx1REFBSyxVQUFVLG1HQUFtRyxzREFBSSxDQUFDLHFFQUFNLElBQUksNkRBQTZELEdBQUcsc0RBQUksQ0FBQyxxRUFBTSxJQUFJLDhDQUE4QyxzREFBSSxDQUFDLHlEQUFJLElBQUksc0JBQXNCLGlDQUFpQyxJQUFJLElBQUksR0FBRztBQUN2NUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSw4SUFBOEksRUFBRSxzRkFBa0I7QUFDOUs7QUFDQSwwQ0FBMEMsK0NBQVE7QUFDbEQsZ0RBQWdELCtDQUFRO0FBQ3hEO0FBQ0Esb0RBQW9ELCtDQUFRO0FBQzVEO0FBQ0EsMENBQTBDLCtDQUFRO0FBQ2xELG9DQUFvQywrQ0FBUTtBQUM1Qyx3Q0FBd0MsK0NBQVE7QUFDaEQsd0RBQXdELCtDQUFRO0FBQ2hFLDBEQUEwRCwrQ0FBUTtBQUNsRSxnREFBZ0QsK0NBQVE7QUFDeEQ7QUFDQSw0Q0FBNEMsK0NBQVE7QUFDcEQ7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLGdFQUFnRSwrQ0FBUTtBQUN4RTtBQUNBLGdFQUFnRSwrQ0FBUTtBQUN4RTtBQUNBLDBCQUEwQiw4Q0FBTztBQUNqQztBQUNBO0FBQ0Esa0JBQWtCLHFIQUFxSDtBQUN2SSxrQkFBa0Isb0hBQW9IO0FBQ3RJLGtCQUFrQiwwSEFBMEg7QUFDNUksa0JBQWtCLCtHQUErRztBQUNqSTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQix1SkFBdUo7QUFDekssa0JBQWtCLHVGQUF1RjtBQUN6RyxrQkFBa0Isd0ZBQXdGO0FBQzFHLGtCQUFrQiwrRUFBK0U7QUFDakc7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IscUhBQXFIO0FBQ3ZJLGtCQUFrQiwwSEFBMEg7QUFDNUksa0JBQWtCLHdGQUF3RjtBQUMxRyxrQkFBa0IsK0VBQStFO0FBQ2pHO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLDBIQUEwSDtBQUM1SSxrQkFBa0IsdUZBQXVGO0FBQ3pHLGtCQUFrQix3RkFBd0Y7QUFDMUcsa0JBQWtCLCtFQUErRTtBQUNqRztBQUNBO0FBQ0E7QUFDQSxjQUFjLHVGQUF1RjtBQUNyRyxjQUFjLHVGQUF1RjtBQUNyRyxjQUFjLHdGQUF3RjtBQUN0RyxjQUFjLCtFQUErRTtBQUM3RjtBQUNBLEtBQUs7QUFDTDtBQUNBLDBDQUEwQywrQ0FBUTtBQUNsRCxrREFBa0QsK0NBQVE7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLDhDQUFPO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHNEQUFJLENBQUMsNkRBQVEsSUFBSSxzQkFBc0I7QUFDekQsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHNEQUFJLENBQUMsMERBQUssSUFBSSxzQkFBc0I7QUFDdEQsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHNEQUFJLENBQUMsOERBQVMsSUFBSSxzQkFBc0I7QUFDMUQsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHNEQUFJLENBQUMsMkRBQU0sSUFBSSxzQkFBc0I7QUFDdkQsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHNEQUFJLENBQUMsd0RBQUcsSUFBSSxzQkFBc0I7QUFDcEQsU0FBUztBQUNUO0FBQ0E7QUFDQSw4QkFBOEIsa0RBQVc7QUFDekM7QUFDQSwwQkFBMEIsNERBQTREO0FBQ3RGO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QyxvREFBb0Q7QUFDN0Y7QUFDQTtBQUNBLHlDQUF5Qyw2QkFBNkI7QUFDdEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5Qyw2QkFBNkI7QUFDdEU7QUFDQTtBQUNBLHlDQUF5QywwQkFBMEI7QUFDbkU7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsNkJBQTZCO0FBQ3RFO0FBQ0E7QUFDQSx5Q0FBeUMsMEJBQTBCO0FBQ25FO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSw2QkFBNkIsa0RBQVc7QUFDeEM7QUFDQSx5QkFBeUI7QUFDekIscUNBQXFDLEVBQUUsVUFBVSxFQUFFLFVBQVUsRUFBRSxVQUFVLEVBQUUsVUFBVSxHQUFHO0FBQ3hGO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSw0QkFBNEIsa0RBQVc7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxxQkFBcUIsa0RBQVc7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wscUJBQXFCLGtEQUFXO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLElBQUksZ0RBQVM7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLDhCQUE4QixrREFBVztBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLDZCQUE2QixrREFBVztBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBLGlDQUFpQyxrREFBVztBQUM1QztBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSx5QkFBeUIsa0RBQVc7QUFDcEM7QUFDQSxLQUFLO0FBQ0w7QUFDQSxzQkFBc0Isa0RBQVc7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLElBQUksZ0RBQVM7QUFDYjtBQUNBLEtBQUs7QUFDTDtBQUNBLHVCQUF1Qiw4Q0FBTztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHVEQUFLLFVBQVUsMENBQTBDLHNEQUFJLFVBQVUsd0tBQXdLLHNEQUFJLENBQUMsMERBQUssSUFBSSxtQ0FBbUMsR0FBRyxHQUFHLHNEQUFJLFNBQVMsd0dBQXdHLEdBQUcsdURBQUssUUFBUSw0TUFBNE0sc0RBQUksYUFBYSxrQ0FBa0MsV0FBVyxzREFBSSxhQUFhLHVDQUF1QyxpQ0FBaUMsR0FBRyxzREFBSSxVQUFVO0FBQ3Z6QixrQ0FBa0MsTUFBTSxzREFBSSxDQUFDLDJEQUFNLElBQUksc0JBQXNCLDJEQUEyRDtBQUN4SSxrQ0FBa0MsTUFBTSxzREFBSSxDQUFDLHdEQUFHLElBQUksc0JBQXNCLHNEQUFzRDtBQUNoSSxrQ0FBa0MsTUFBTSxzREFBSSxDQUFDLHlEQUFJLElBQUksc0JBQXNCLGdEQUFnRDtBQUMzSCxnREFBZ0QsdURBQUssVUFBVSxtS0FBbUssc0RBQUksVUFBVSx5S0FBeUssR0FBRyxzREFBSSxTQUFTLHFGQUFxRixHQUFHLHNEQUFJLFFBQVEsNEVBQTRFLElBQUksUUFBUSxJQUFJO0FBQ3ptQjtBQUNBLHdCQUF3Qix1REFBSyxVQUFVLDJDQUEyQyx1REFBSyxVQUFVLDBDQUEwQyxzREFBSSxTQUFTLG9HQUFvRyxHQUFHLHNEQUFJLFFBQVEsaUlBQWlJLElBQUksR0FBRyxzREFBSSxxQkFBcUIsMEZBQTBGLDBDQUEwQyxzREFBSSxVQUFVLG1IQUFtSCx1REFBSyxVQUFVLGdEQUFnRCxzREFBSSxDQUFDLGtFQUFhLElBQUksMENBQTBDLEdBQUcsdURBQUssVUFBVSxXQUFXLHNEQUFJLFFBQVEsNkZBQTZGLEdBQUcsc0RBQUksUUFBUSwySEFBMkgsSUFBSSxJQUFJLEdBQUcsS0FBSztBQUNobEM7QUFDQSx3QkFBd0IsdURBQUssVUFBVSwyQ0FBMkMsdURBQUssVUFBVSwwQ0FBMEMsc0RBQUksU0FBUyxxR0FBcUcsR0FBRyxzREFBSSxRQUFRLHNIQUFzSCxJQUFJLEdBQUcsdURBQUssVUFBVSx3SEFBd0gsc0RBQUksQ0FBQyxtRUFBSyxJQUFJLDJLQUEySyxzREFBSSxDQUFDLDhEQUFTLElBQUksc0JBQXNCLG9IQUFvSCxHQUFHLHNEQUFJLENBQUMsbUVBQUssSUFBSSw4TEFBOEwsc0RBQUksQ0FBQywwREFBSyxJQUFJLHNCQUFzQixrTEFBa0wsR0FBRyx1REFBSyxVQUFVLDRFQUE0RSxzREFBSSxTQUFTLDBGQUEwRixHQUFHLHVEQUFLLFVBQVUsbUNBQW1DLHNEQUFJLENBQUMseUVBQVEsSUFBSSw4SkFBOEosR0FBRyxzREFBSSxDQUFDLHlFQUFRLElBQUksNExBQTRMLEdBQUcsc0RBQUksQ0FBQyx5RUFBUSxJQUFJLHFLQUFxSyxHQUFHLHVEQUFLLFVBQVUsV0FBVyxzREFBSSxZQUFZLDBIQUEwSCxHQUFHLHNEQUFJLFlBQVksK1VBQStVLEdBQUcsc0RBQUksUUFBUSw4R0FBOEcsSUFBSSxJQUFJLElBQUksSUFBSSxJQUFJO0FBQ3R0RjtBQUNBLHdCQUF3Qix1REFBSyxVQUFVLDJDQUEyQyx1REFBSyxVQUFVLDBDQUEwQyxzREFBSSxTQUFTLHNHQUFzRyxHQUFHLHNEQUFJLFFBQVEsNkhBQTZILElBQUksR0FBRyxzREFBSSxVQUFVLHFHQUFxRyxzREFBSSxtQkFBbUIsc0NBQXNDLHNCQUFzQixHQUFHLHNEQUFJLFVBQVUsa0hBQWtILHVEQUFLLFVBQVUsZ0RBQWdELHNEQUFJLENBQUMseURBQUksSUFBSSx5REFBeUQsR0FBRyx1REFBSyxVQUFVLFdBQVcsc0RBQUksUUFBUSx1R0FBdUcsR0FBRyxzREFBSSxRQUFRLHdNQUF3TSxJQUFJLElBQUksR0FBRyxJQUFJO0FBQ3J0QztBQUNBLHdCQUF3Qix1REFBSyxVQUFVLDJDQUEyQyx1REFBSyxVQUFVLDBDQUEwQyxzREFBSSxTQUFTLHVJQUF1SSxHQUFHLHNEQUFJLFFBQVE7QUFDOVM7QUFDQSwyR0FBMkcsSUFBSSx3REFBd0Qsc0RBQUksVUFBVSwrSEFBK0gsdURBQUssVUFBVSxnREFBZ0Qsc0RBQUksQ0FBQyxrRUFBYSxJQUFJLDZDQUE2QyxHQUFHLHVEQUFLLFVBQVUsZ0NBQWdDLHNEQUFJLFFBQVEsdUdBQXVHLEdBQUcsdURBQUssUUFBUSw2TEFBNkwsR0FBRyxzREFBSSxDQUFDLHFFQUFNLElBQUksNkhBQTZILElBQUksSUFBSSxHQUFHLGNBQWMsc0RBQUksVUFBVSxtSEFBbUgsdURBQUssVUFBVSxnREFBZ0Qsc0RBQUksQ0FBQyxnRUFBVyxJQUFJLDBDQUEwQyxHQUFHLHVEQUFLLFVBQVUsV0FBVyxzREFBSSxRQUFRLDRFQUE0RSxHQUFHLHNEQUFJLFFBQVEsMkVBQTJFLEdBQUcsc0RBQUksQ0FBQyxxRUFBTSxJQUFJLDJHQUEyRyxJQUFJLElBQUksR0FBRyxlQUFlLHVEQUFLLFVBQVUsbUNBQW1DLHNEQUFJLFVBQVUsc0hBQXNILHVEQUFLLFVBQVUsc0RBQXNELHNEQUFJLFVBQVUsNkZBQTZGLHNEQUFJLENBQUMsZ0VBQVcsSUFBSSxpQ0FBaUMsR0FBRyxHQUFHLHVEQUFLLFVBQVUsV0FBVyxzREFBSSxTQUFTLHNHQUFzRyxHQUFHLHNEQUFJLFFBQVEsNElBQTRJLElBQUksSUFBSSxHQUFHLEdBQUcsc0RBQUkscUJBQXFCLDJDQUEyQyxHQUFHLHVEQUFLLFVBQVUsd0RBQXdELHNEQUFJLENBQUMscUVBQU0sSUFBSSxnREFBZ0Qsc0RBQUksQ0FBQyw4REFBUyxJQUFJLHNCQUFzQiwrQkFBK0IsR0FBRyxzREFBSSxDQUFDLHFFQUFNLElBQUksMEJBQTBCLHNEQUFJLENBQUMsaUVBQVksSUFBSSxzQkFBc0IsOEpBQThKLElBQUksSUFBSSxNQUFNLHVEQUFLLFVBQVUsbUNBQW1DLHNEQUFJLHFCQUFxQiwyREFBMkQsaUJBQWlCLHVEQUFLLFVBQVUsOEJBQThCLHNEQUFJLENBQUMsbUZBQVcsSUFBSSx1RkFBdUYsR0FBRyxzREFBSSxRQUFRLDJIQUEySCxJQUFJLElBQUksc0RBQUksVUFBVSxvRUFBb0Usc0RBQUksQ0FBQyxxRUFBTSxJQUFJLDREQUE0RCxzREFBSSxDQUFDLCtEQUFVLElBQUksc0JBQXNCLDBDQUEwQyxnQkFBZ0Isc0RBQUksQ0FBQyxxRUFBTSxJQUFJLGtFQUFrRSxzREFBSSxDQUFDLHlEQUFJLElBQUksc0JBQXNCLDBEQUEwRCxJQUFJLElBQUksS0FBSztBQUM5cEg7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLHVEQUFLLFVBQVUsbU1BQW1NLHNEQUFJLHVCQUF1QixzUUFBc1EsR0FBRyxzREFBSSxVQUFVLG9IQUFvSCx1REFBSyxVQUFVLDZFQUE2RSx1REFBSyxVQUFVLGlEQUFpRCxzREFBSSxVQUFVLGtIQUFrSCxzREFBSSxDQUFDLDhEQUFTLElBQUksaUNBQWlDLEdBQUcsR0FBRyx1REFBSyxVQUFVLFdBQVcsc0RBQUksU0FBUyx5RkFBeUYsR0FBRyxzREFBSSxRQUFRLGtHQUFrRyxJQUFJLElBQUksR0FBRyxzREFBSSxDQUFDLHFFQUFNLElBQUksZ0RBQWdELHNEQUFJLENBQUMsOERBQVMsSUFBSSxzQkFBc0Isc0JBQXNCLElBQUksR0FBRyxHQUFHLHNEQUFJLFVBQVUsa0RBQWtELHVEQUFLLFVBQVUsZ0RBQWdELHNEQUFJLGtCQUFrQiw4RUFBOEUsR0FBRyxzREFBSSxVQUFVLDJEQUEyRCxnQkFBZ0IsdURBQUssVUFBVSxtSEFBbUgsc0RBQUksQ0FBQyxxRUFBTSxJQUFJLHlGQUF5RixzREFBSSxDQUFDLGdFQUFXLElBQUksc0JBQXNCLHlCQUF5QixHQUFHLHNEQUFJLFVBQVUsK0VBQStFLHNEQUFJLFVBQVU7QUFDdGpFO0FBQ0Esd0JBQXdCO0FBQ3hCLHVCQUF1QixZQUFZLDJDQUEyQyxzREFBSSxDQUFDLHFFQUFNLElBQUksb0VBQW9FLHNEQUFJLENBQUMsaUVBQVksSUFBSSxzQkFBc0IsbURBQW1ELE1BQU0sc0RBQUksVUFBVSxtQkFBbUIsS0FBSyxLQUFLLEdBQUcsSUFBSTtBQUN2VDtBQUNBLGlFQUFlLGdCQUFnQixFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3VpdjIvLi9zcmMvcmVuZGVyZXIvY29tcG9uZW50cy9tb2xlY3VsZXMvUHJvZ3Jlc3NCYXIudHN4Iiwid2VicGFjazovL2d1aXYyLy4vc3JjL3JlbmRlcmVyL3ZpZXdzL3NldHVwL1NldHVwQ29tcGFueVZpZXcudHN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGpzeCBhcyBfanN4LCBqc3hzIGFzIF9qc3hzIH0gZnJvbSBcInJlYWN0L2pzeC1ydW50aW1lXCI7XG4vKipcbiAqIFByb2dyZXNzQmFyIENvbXBvbmVudFxuICpcbiAqIFByb2dyZXNzIGluZGljYXRvciB3aXRoIHBlcmNlbnRhZ2UgZGlzcGxheSBhbmQgb3B0aW9uYWwgbGFiZWwuXG4gKiBTdXBwb3J0cyBkaWZmZXJlbnQgdmFyaWFudHMgYW5kIHNpemVzLlxuICovXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgY2xzeCB9IGZyb20gJ2Nsc3gnO1xuLyoqXG4gKiBQcm9ncmVzc0JhciBDb21wb25lbnRcbiAqL1xuZXhwb3J0IGNvbnN0IFByb2dyZXNzQmFyID0gKHsgdmFsdWUsIG1heCA9IDEwMCwgdmFyaWFudCA9ICdkZWZhdWx0Jywgc2l6ZSA9ICdtZCcsIHNob3dMYWJlbCA9IHRydWUsIGxhYmVsLCBsYWJlbFBvc2l0aW9uID0gJ2luc2lkZScsIHN0cmlwZWQgPSBmYWxzZSwgYW5pbWF0ZWQgPSBmYWxzZSwgY2xhc3NOYW1lLCAnZGF0YS1jeSc6IGRhdGFDeSwgfSkgPT4ge1xuICAgIC8vIENhbGN1bGF0ZSBwZXJjZW50YWdlXG4gICAgY29uc3QgcGVyY2VudGFnZSA9IE1hdGgubWluKDEwMCwgTWF0aC5tYXgoMCwgKHZhbHVlIC8gbWF4KSAqIDEwMCkpO1xuICAgIC8vIFZhcmlhbnQgY29sb3JzXG4gICAgY29uc3QgdmFyaWFudENsYXNzZXMgPSB7XG4gICAgICAgIGRlZmF1bHQ6ICdiZy1ibHVlLTYwMCcsXG4gICAgICAgIHN1Y2Nlc3M6ICdiZy1ncmVlbi02MDAnLFxuICAgICAgICB3YXJuaW5nOiAnYmcteWVsbG93LTYwMCcsXG4gICAgICAgIGRhbmdlcjogJ2JnLXJlZC02MDAnLFxuICAgICAgICBpbmZvOiAnYmctY3lhbi02MDAnLFxuICAgIH07XG4gICAgLy8gQmFja2dyb3VuZCBjb2xvcnNcbiAgICBjb25zdCBiZ0NsYXNzZXMgPSB7XG4gICAgICAgIGRlZmF1bHQ6ICdiZy1ibHVlLTEwMCcsXG4gICAgICAgIHN1Y2Nlc3M6ICdiZy1ncmVlbi0xMDAnLFxuICAgICAgICB3YXJuaW5nOiAnYmcteWVsbG93LTEwMCcsXG4gICAgICAgIGRhbmdlcjogJ2JnLXJlZC0xMDAnLFxuICAgICAgICBpbmZvOiAnYmctY3lhbi0xMDAnLFxuICAgIH07XG4gICAgLy8gU2l6ZSBjbGFzc2VzXG4gICAgY29uc3Qgc2l6ZUNsYXNzZXMgPSB7XG4gICAgICAgIHNtOiAnaC0yJyxcbiAgICAgICAgbWQ6ICdoLTQnLFxuICAgICAgICBsZzogJ2gtNicsXG4gICAgfTtcbiAgICBjb25zdCBjb250YWluZXJDbGFzc2VzID0gY2xzeCgndy1mdWxsJywgY2xhc3NOYW1lKTtcbiAgICBjb25zdCB0cmFja0NsYXNzZXMgPSBjbHN4KCd3LWZ1bGwgcm91bmRlZC1mdWxsIG92ZXJmbG93LWhpZGRlbicsIGJnQ2xhc3Nlc1t2YXJpYW50XSwgc2l6ZUNsYXNzZXNbc2l6ZV0pO1xuICAgIGNvbnN0IGJhckNsYXNzZXMgPSBjbHN4KCdoLWZ1bGwgdHJhbnNpdGlvbi1hbGwgZHVyYXRpb24tMzAwIGVhc2Utb3V0JywgdmFyaWFudENsYXNzZXNbdmFyaWFudF0sIHtcbiAgICAgICAgLy8gU3RyaXBlZCBwYXR0ZXJuXG4gICAgICAgICdiZy1ncmFkaWVudC10by1yIGZyb20tdHJhbnNwYXJlbnQgdmlhLWJsYWNrLzEwIHRvLXRyYW5zcGFyZW50IGJnLVtsZW5ndGg6MXJlbV8xMDAlXSc6IHN0cmlwZWQsXG4gICAgICAgICdhbmltYXRlLXByb2dyZXNzLXN0cmlwZXMnOiBzdHJpcGVkICYmIGFuaW1hdGVkLFxuICAgIH0pO1xuICAgIGNvbnN0IGxhYmVsVGV4dCA9IGxhYmVsIHx8IChzaG93TGFiZWwgPyBgJHtNYXRoLnJvdW5kKHBlcmNlbnRhZ2UpfSVgIDogJycpO1xuICAgIHJldHVybiAoX2pzeHMoXCJkaXZcIiwgeyBjbGFzc05hbWU6IGNvbnRhaW5lckNsYXNzZXMsIFwiZGF0YS1jeVwiOiBkYXRhQ3ksIGNoaWxkcmVuOiBbbGFiZWxUZXh0ICYmIGxhYmVsUG9zaXRpb24gPT09ICdvdXRzaWRlJyAmJiAoX2pzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gbWItMVwiLCBjaGlsZHJlbjogX2pzeChcInNwYW5cIiwgeyBjbGFzc05hbWU6IFwidGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWdyYXktNzAwXCIsIGNoaWxkcmVuOiBsYWJlbFRleHQgfSkgfSkpLCBfanN4KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiB0cmFja0NsYXNzZXMsIHJvbGU6IFwicHJvZ3Jlc3NiYXJcIiwgXCJhcmlhLXZhbHVlbm93XCI6IHZhbHVlLCBcImFyaWEtdmFsdWVtaW5cIjogMCwgXCJhcmlhLXZhbHVlbWF4XCI6IG1heCwgY2hpbGRyZW46IF9qc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IGJhckNsYXNzZXMsIHN0eWxlOiB7IHdpZHRoOiBgJHtwZXJjZW50YWdlfSVgIH0sIGNoaWxkcmVuOiBsYWJlbFRleHQgJiYgbGFiZWxQb3NpdGlvbiA9PT0gJ2luc2lkZScgJiYgc2l6ZSAhPT0gJ3NtJyAmJiAoX2pzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBoLWZ1bGwgcHgtMlwiLCBjaGlsZHJlbjogX2pzeChcInNwYW5cIiwgeyBjbGFzc05hbWU6IFwidGV4dC14cyBmb250LXNlbWlib2xkIHRleHQtd2hpdGUgd2hpdGVzcGFjZS1ub3dyYXBcIiwgY2hpbGRyZW46IGxhYmVsVGV4dCB9KSB9KSkgfSkgfSldIH0pKTtcbn07XG4vLyBBZGQgYW5pbWF0aW9uIGZvciBzdHJpcGVkIHByb2dyZXNzIGJhcnNcbmNvbnN0IHN0eWxlcyA9IGBcclxuQGtleWZyYW1lcyBwcm9ncmVzcy1zdHJpcGVzIHtcclxuICBmcm9tIHtcclxuICAgIGJhY2tncm91bmQtcG9zaXRpb246IDFyZW0gMDtcclxuICB9XHJcbiAgdG8ge1xyXG4gICAgYmFja2dyb3VuZC1wb3NpdGlvbjogMCAwO1xyXG4gIH1cclxufVxyXG5cclxuLmFuaW1hdGUtcHJvZ3Jlc3Mtc3RyaXBlcyB7XHJcbiAgYW5pbWF0aW9uOiBwcm9ncmVzcy1zdHJpcGVzIDFzIGxpbmVhciBpbmZpbml0ZTtcclxufVxyXG5gO1xuLy8gSW5qZWN0IHN0eWxlc1xuaWYgKHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCcgJiYgIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9ncmVzcy1iYXItc3R5bGVzJykpIHtcbiAgICBjb25zdCBzdHlsZVNoZWV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgICBzdHlsZVNoZWV0LmlkID0gJ3Byb2dyZXNzLWJhci1zdHlsZXMnO1xuICAgIHN0eWxlU2hlZXQudGV4dENvbnRlbnQgPSBzdHlsZXM7XG4gICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZVNoZWV0KTtcbn1cbmV4cG9ydCBkZWZhdWx0IFByb2dyZXNzQmFyO1xuIiwiaW1wb3J0IHsganN4IGFzIF9qc3gsIGpzeHMgYXMgX2pzeHMsIEZyYWdtZW50IGFzIF9GcmFnbWVudCB9IGZyb20gXCJyZWFjdC9qc3gtcnVudGltZVwiO1xuLyoqXG4gKiBTZXR1cCBDb21wYW55IFZpZXdcbiAqXG4gKiBBIHN0dW5uaW5nIHdpemFyZC1zdHlsZSBpbnRlcmZhY2UgZm9yIEF6dXJlIEFwcCBSZWdpc3RyYXRpb24gc2V0dXAuXG4gKiBGZWF0dXJlczpcbiAqIC0gTXVsdGktc3RlcCB3aXphcmQgd2l0aCBhbmltYXRlZCB0cmFuc2l0aW9uc1xuICogLSBSZWFsLXRpbWUgY29ubmVjdGl2aXR5IG1vbml0b3JpbmdcbiAqIC0gUHJvZ3Jlc3MgdmlzdWFsaXphdGlvbiB3aXRoIHN0ZXAgaW5kaWNhdG9yc1xuICogLSBDcmVkZW50aWFsIG1hbmFnZW1lbnQgd2l0aCBzZWN1cmUgbWFza2luZ1xuICogLSBCZWF1dGlmdWwgY2FyZC1iYXNlZCBsYXlvdXQgd2l0aCBnbGFzcyBtb3JwaGlzbSBlZmZlY3RzXG4gKi9cbmltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSwgdXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCwgdXNlTWVtbyB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IEJ1aWxkaW5nMiwgQ2xvdWQsIFNoaWVsZCwgQ2hlY2tDaXJjbGUsIEFsZXJ0Q2lyY2xlLCBSZWZyZXNoQ3csIEV5ZSwgRXllT2ZmLCBDb3B5LCBFeHRlcm5hbExpbmssIEluZm8sIENoZXZyb25SaWdodCwgQ2hldnJvbkxlZnQsIFphcCwgR2xvYmUsIExvY2ssIFVzZXJzLCBGb2xkZXIsIFNwYXJrbGVzLCBDaGVjaywgWCwgV2lmaSwgQ2xvY2ssIEFsZXJ0VHJpYW5nbGUsIFBsYXksIFN0b3BDaXJjbGUsIH0gZnJvbSAnbHVjaWRlLXJlYWN0JztcbmltcG9ydCB7IEJ1dHRvbiB9IGZyb20gJy4uLy4uL2NvbXBvbmVudHMvYXRvbXMvQnV0dG9uJztcbmltcG9ydCB7IElucHV0IH0gZnJvbSAnLi4vLi4vY29tcG9uZW50cy9hdG9tcy9JbnB1dCc7XG5pbXBvcnQgeyBDaGVja2JveCB9IGZyb20gJy4uLy4uL2NvbXBvbmVudHMvYXRvbXMvQ2hlY2tib3gnO1xuaW1wb3J0IHsgTW9kYWwgfSBmcm9tICcuLi8uLi9jb21wb25lbnRzL29yZ2FuaXNtcy9Nb2RhbCc7XG5pbXBvcnQgeyBQcm9ncmVzc0JhciB9IGZyb20gJy4uLy4uL2NvbXBvbmVudHMvbW9sZWN1bGVzL1Byb2dyZXNzQmFyJztcbmltcG9ydCBMb2FkaW5nU3Bpbm5lciBmcm9tICcuLi8uLi9jb21wb25lbnRzL2F0b21zL0xvYWRpbmdTcGlubmVyJztcbmltcG9ydCB7IHVzZUFwcFJlZ2lzdHJhdGlvbiB9IGZyb20gJy4uLy4uL2hvb2tzL3VzZUFwcFJlZ2lzdHJhdGlvbic7XG4vLyBSZXF1aXJlZCBHcmFwaCBBUEkgcGVybWlzc2lvbnMgd2l0aCBkZXNjcmlwdGlvbnNcbmNvbnN0IFJFUVVJUkVEX1BFUk1JU1NJT05TID0gW1xuICAgIHtcbiAgICAgICAgbmFtZTogJ0RpcmVjdG9yeS5SZWFkLkFsbCcsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnUmVhZCBkaXJlY3Rvcnkgb2JqZWN0cyBsaWtlIHVzZXJzLCBncm91cHMsIGFuZCBvcmdhbml6YXRpb25hbCBjb250YWN0cycsXG4gICAgICAgIGljb246IF9qc3goRm9sZGVyLCB7IGNsYXNzTmFtZTogXCJ3LTQgaC00XCIgfSksXG4gICAgICAgIHNjb3BlOiAnQXBwbGljYXRpb24nLFxuICAgIH0sXG4gICAge1xuICAgICAgICBuYW1lOiAnVXNlci5SZWFkLkFsbCcsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnUmVhZCB1c2VyIHByb2ZpbGVzLCBsaWNlbnNlcywgYW5kIGF1dGhlbnRpY2F0aW9uIG1ldGhvZHMnLFxuICAgICAgICBpY29uOiBfanN4KFVzZXJzLCB7IGNsYXNzTmFtZTogXCJ3LTQgaC00XCIgfSksXG4gICAgICAgIHNjb3BlOiAnQXBwbGljYXRpb24nLFxuICAgIH0sXG4gICAge1xuICAgICAgICBuYW1lOiAnR3JvdXAuUmVhZC5BbGwnLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ1JlYWQgZ3JvdXAgbWVtYmVyc2hpcHMgYW5kIHByb3BlcnRpZXMnLFxuICAgICAgICBpY29uOiBfanN4KFVzZXJzLCB7IGNsYXNzTmFtZTogXCJ3LTQgaC00XCIgfSksXG4gICAgICAgIHNjb3BlOiAnQXBwbGljYXRpb24nLFxuICAgIH0sXG4gICAge1xuICAgICAgICBuYW1lOiAnT3JnYW5pemF0aW9uLlJlYWQuQWxsJyxcbiAgICAgICAgZGVzY3JpcHRpb246ICdSZWFkIHRlbmFudCBhbmQgb3JnYW5pemF0aW9uIGluZm9ybWF0aW9uJyxcbiAgICAgICAgaWNvbjogX2pzeChCdWlsZGluZzIsIHsgY2xhc3NOYW1lOiBcInctNCBoLTRcIiB9KSxcbiAgICAgICAgc2NvcGU6ICdBcHBsaWNhdGlvbicsXG4gICAgfSxcbl07XG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBTdWItY29tcG9uZW50c1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLyoqXG4gKiBBbmltYXRlZCBzdGVwIGluZGljYXRvciBmb3IgdGhlIHdpemFyZFxuICovXG5jb25zdCBTdGVwSW5kaWNhdG9yID0gKHsgc3RlcHMsIGN1cnJlbnRTdGVwLCBjb21wbGV0ZWRTdGVwcyB9KSA9PiAoX2pzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBtYi04XCIsIGNoaWxkcmVuOiBzdGVwcy5tYXAoKHN0ZXAsIGluZGV4KSA9PiAoX2pzeHMoUmVhY3QuRnJhZ21lbnQsIHsgY2hpbGRyZW46IFtfanN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJmbGV4IGZsZXgtY29sIGl0ZW1zLWNlbnRlclwiLCBjaGlsZHJlbjogW19qc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IGBcclxuICAgICAgICAgICAgICB3LTEyIGgtMTIgcm91bmRlZC1mdWxsIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyXHJcbiAgICAgICAgICAgICAgdHJhbnNpdGlvbi1hbGwgZHVyYXRpb24tNTAwIHRyYW5zZm9ybVxyXG4gICAgICAgICAgICAgICR7Y29tcGxldGVkU3RlcHMuaGFzKGluZGV4KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gJ2JnLWdyYWRpZW50LXRvLWJyIGZyb20tZ3JlZW4tNDAwIHRvLWdyZWVuLTYwMCB0ZXh0LXdoaXRlIHNjYWxlLTEwMCBzaGFkb3ctbGcgc2hhZG93LWdyZWVuLTUwMC8zMCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGluZGV4ID09PSBjdXJyZW50U3RlcFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICdiZy1ncmFkaWVudC10by1iciBmcm9tLWJsdWUtNTAwIHRvLXB1cnBsZS02MDAgdGV4dC13aGl0ZSBzY2FsZS0xMTAgc2hhZG93LWxnIHNoYWRvdy1ibHVlLTUwMC80MCByaW5nLTQgcmluZy1ibHVlLTIwMCBkYXJrOnJpbmctYmx1ZS04MDAnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogJ2JnLWdyYXktMjAwIGRhcms6YmctZ3JheS03MDAgdGV4dC1ncmF5LTUwMCBkYXJrOnRleHQtZ3JheS00MDAgc2NhbGUtOTAnfVxyXG4gICAgICAgICAgICBgLCBjaGlsZHJlbjogY29tcGxldGVkU3RlcHMuaGFzKGluZGV4KSA/IChfanN4KENoZWNrLCB7IGNsYXNzTmFtZTogXCJ3LTYgaC02XCIgfSkpIDogKF9qc3goXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiBcInRleHQtc20gZm9udC1ib2xkXCIsIGNoaWxkcmVuOiBpbmRleCArIDEgfSkpIH0pLCBfanN4KFwic3BhblwiLCB7IGNsYXNzTmFtZTogYFxyXG4gICAgICAgICAgICAgIG10LTIgdGV4dC14cyBmb250LW1lZGl1bSB0cmFuc2l0aW9uLWNvbG9ycyBkdXJhdGlvbi0zMDBcclxuICAgICAgICAgICAgICAke2luZGV4ID09PSBjdXJyZW50U3RlcFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gJ3RleHQtYmx1ZS02MDAgZGFyazp0ZXh0LWJsdWUtNDAwJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogY29tcGxldGVkU3RlcHMuaGFzKGluZGV4KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICd0ZXh0LWdyZWVuLTYwMCBkYXJrOnRleHQtZ3JlZW4tNDAwJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICd0ZXh0LWdyYXktNTAwIGRhcms6dGV4dC1ncmF5LTQwMCd9XHJcbiAgICAgICAgICAgIGAsIGNoaWxkcmVuOiBzdGVwLnRpdGxlIH0pXSB9KSwgaW5kZXggPCBzdGVwcy5sZW5ndGggLSAxICYmIChfanN4KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBgXHJcbiAgICAgICAgICAgICAgdy0xNiBoLTEgbXgtMiByb3VuZGVkLWZ1bGwgdHJhbnNpdGlvbi1hbGwgZHVyYXRpb24tNTAwXHJcbiAgICAgICAgICAgICAgJHtjb21wbGV0ZWRTdGVwcy5oYXMoaW5kZXgpXG4gICAgICAgICAgICAgICAgICAgID8gJ2JnLWdyYWRpZW50LXRvLXIgZnJvbS1ncmVlbi00MDAgdG8tZ3JlZW4tNTAwJ1xuICAgICAgICAgICAgICAgICAgICA6IGluZGV4IDwgY3VycmVudFN0ZXBcbiAgICAgICAgICAgICAgICAgICAgICAgID8gJ2JnLWdyYWRpZW50LXRvLXIgZnJvbS1ibHVlLTQwMCB0by1ibHVlLTUwMCdcbiAgICAgICAgICAgICAgICAgICAgICAgIDogJ2JnLWdyYXktMjAwIGRhcms6YmctZ3JheS03MDAnfVxyXG4gICAgICAgICAgICBgIH0pKV0gfSwgc3RlcC5pZCkpKSB9KSk7XG4vKipcbiAqIENvbm5lY3Rpdml0eSBzdGF0dXMgY2FyZCB3aXRoIGFuaW1hdGVkIGluZGljYXRvcnNcbiAqL1xuY29uc3QgQ29ubmVjdGl2aXR5Q2FyZCA9ICh7IHN0YXR1cywgb25SZWZyZXNoLCBpc1JlZnJlc2hpbmcgfSkgPT4ge1xuICAgIGNvbnN0IGdldFN0YXR1c0ljb24gPSAoc3RhdGUpID0+IHtcbiAgICAgICAgc3dpdGNoIChzdGF0ZSkge1xuICAgICAgICAgICAgY2FzZSAnY29ubmVjdGVkJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gX2pzeChDaGVja0NpcmNsZSwgeyBjbGFzc05hbWU6IFwidy01IGgtNSB0ZXh0LWdyZWVuLTUwMFwiIH0pO1xuICAgICAgICAgICAgY2FzZSAnZmFpbGVkJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gX2pzeChYLCB7IGNsYXNzTmFtZTogXCJ3LTUgaC01IHRleHQtcmVkLTUwMFwiIH0pO1xuICAgICAgICAgICAgY2FzZSAnY2hlY2tpbmcnOlxuICAgICAgICAgICAgICAgIHJldHVybiBfanN4KExvYWRpbmdTcGlubmVyLCB7IHNpemU6IFwic21cIiB9KTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9qc3goQWxlcnRDaXJjbGUsIHsgY2xhc3NOYW1lOiBcInctNSBoLTUgdGV4dC1ncmF5LTQwMFwiIH0pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBnZXRTdGF0dXNDb2xvciA9IChzdGF0ZSkgPT4ge1xuICAgICAgICBzd2l0Y2ggKHN0YXRlKSB7XG4gICAgICAgICAgICBjYXNlICdjb25uZWN0ZWQnOlxuICAgICAgICAgICAgICAgIHJldHVybiAnYm9yZGVyLWdyZWVuLTUwMC8zMCBiZy1ncmVlbi01MCBkYXJrOmJnLWdyZWVuLTkwMC8yMCc7XG4gICAgICAgICAgICBjYXNlICdmYWlsZWQnOlxuICAgICAgICAgICAgICAgIHJldHVybiAnYm9yZGVyLXJlZC01MDAvMzAgYmctcmVkLTUwIGRhcms6YmctcmVkLTkwMC8yMCc7XG4gICAgICAgICAgICBjYXNlICdjaGVja2luZyc6XG4gICAgICAgICAgICAgICAgcmV0dXJuICdib3JkZXItYmx1ZS01MDAvMzAgYmctYmx1ZS01MCBkYXJrOmJnLWJsdWUtOTAwLzIwJztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuICdib3JkZXItZ3JheS0zMDAgZGFyazpib3JkZXItZ3JheS02MDAgYmctZ3JheS01MCBkYXJrOmJnLWdyYXktODAwJztcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3Qgc2VydmljZXMgPSBbXG4gICAgICAgIHsga2V5OiAnaW50ZXJuZXQnLCBsYWJlbDogJ0ludGVybmV0JywgaWNvbjogX2pzeChHbG9iZSwgeyBjbGFzc05hbWU6IFwidy00IGgtNFwiIH0pLCBzdGF0dXM6IHN0YXR1cy5pbnRlcm5ldCB9LFxuICAgICAgICB7IGtleTogJ2dyYXBoJywgbGFiZWw6ICdNaWNyb3NvZnQgR3JhcGgnLCBpY29uOiBfanN4KENsb3VkLCB7IGNsYXNzTmFtZTogXCJ3LTQgaC00XCIgfSksIHN0YXR1czogc3RhdHVzLmdyYXBoIH0sXG4gICAgICAgIHsga2V5OiAnYXp1cmUnLCBsYWJlbDogJ0F6dXJlIEFEJywgaWNvbjogX2pzeChTaGllbGQsIHsgY2xhc3NOYW1lOiBcInctNCBoLTRcIiB9KSwgc3RhdHVzOiBzdGF0dXMuYXp1cmUgfSxcbiAgICBdO1xuICAgIHJldHVybiAoX2pzeHMoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwiYmctd2hpdGUgZGFyazpiZy1ncmF5LTgwMCByb3VuZGVkLXhsIGJvcmRlciBib3JkZXItZ3JheS0yMDAgZGFyazpib3JkZXItZ3JheS03MDAgcC02IHNoYWRvdy1zbVwiLCBjaGlsZHJlbjogW19qc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiBtYi00XCIsIGNoaWxkcmVuOiBbX2pzeHMoXCJoM1wiLCB7IGNsYXNzTmFtZTogXCJ0ZXh0LWxnIGZvbnQtc2VtaWJvbGQgdGV4dC1ncmF5LTkwMCBkYXJrOnRleHQtd2hpdGUgZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTJcIiwgY2hpbGRyZW46IFtfanN4KFdpZmksIHsgY2xhc3NOYW1lOiBcInctNSBoLTUgdGV4dC1ibHVlLTUwMFwiIH0pLCBcIkNvbm5lY3Rpdml0eSBTdGF0dXNcIl0gfSksIF9qc3goQnV0dG9uLCB7IHZhcmlhbnQ6IFwiZ2hvc3RcIiwgc2l6ZTogXCJzbVwiLCBvbkNsaWNrOiBvblJlZnJlc2gsIGxvYWRpbmc6IGlzUmVmcmVzaGluZywgaWNvbjogX2pzeChSZWZyZXNoQ3csIHsgY2xhc3NOYW1lOiBcInctNCBoLTRcIiB9KSwgY2hpbGRyZW46IFwiUmVmcmVzaFwiIH0pXSB9KSwgX2pzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJncmlkIGdyaWQtY29scy0zIGdhcC00XCIsIGNoaWxkcmVuOiBzZXJ2aWNlcy5tYXAoKHNlcnZpY2UpID0+IChfanN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogYFxyXG4gICAgICAgICAgICAgIHAtNCByb3VuZGVkLWxnIGJvcmRlci0yIHRyYW5zaXRpb24tYWxsIGR1cmF0aW9uLTMwMFxyXG4gICAgICAgICAgICAgICR7Z2V0U3RhdHVzQ29sb3Ioc2VydmljZS5zdGF0dXMpfVxyXG4gICAgICAgICAgICBgLCBjaGlsZHJlbjogW19qc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiBtYi0yXCIsIGNoaWxkcmVuOiBbX2pzeChcInNwYW5cIiwgeyBjbGFzc05hbWU6IFwidGV4dC1ncmF5LTYwMCBkYXJrOnRleHQtZ3JheS00MDBcIiwgY2hpbGRyZW46IHNlcnZpY2UuaWNvbiB9KSwgZ2V0U3RhdHVzSWNvbihzZXJ2aWNlLnN0YXR1cyldIH0pLCBfanN4KFwicFwiLCB7IGNsYXNzTmFtZTogXCJ0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS05MDAgZGFyazp0ZXh0LXdoaXRlXCIsIGNoaWxkcmVuOiBzZXJ2aWNlLmxhYmVsIH0pLCBfanN4KFwicFwiLCB7IGNsYXNzTmFtZTogXCJ0ZXh0LXhzIHRleHQtZ3JheS01MDAgZGFyazp0ZXh0LWdyYXktNDAwIGNhcGl0YWxpemUgbXQtMVwiLCBjaGlsZHJlbjogc2VydmljZS5zdGF0dXMgPT09ICd1bmtub3duJyA/ICdOb3QgY2hlY2tlZCcgOiBzZXJ2aWNlLnN0YXR1cyB9KV0gfSwgc2VydmljZS5rZXkpKSkgfSldIH0pKTtcbn07XG4vKipcbiAqIFBlcm1pc3Npb24gY2FyZCB3aXRoIGhvdmVyIGVmZmVjdHNcbiAqL1xuY29uc3QgUGVybWlzc2lvbkNhcmQgPSAoeyBwZXJtaXNzaW9uLCBpbmRleCB9KSA9PiAoX2pzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJcXHJcXG4gICAgICBncm91cCBwLTQgcm91bmRlZC1sZyBib3JkZXIgYm9yZGVyLWdyYXktMjAwIGRhcms6Ym9yZGVyLWdyYXktNzAwXFxyXFxuICAgICAgYmctZ3JhZGllbnQtdG8tYnIgZnJvbS13aGl0ZSB0by1ncmF5LTUwIGRhcms6ZnJvbS1ncmF5LTgwMCBkYXJrOnRvLWdyYXktOTAwXFxyXFxuICAgICAgaG92ZXI6Ym9yZGVyLWJsdWUtMzAwIGRhcms6aG92ZXI6Ym9yZGVyLWJsdWUtNjAwXFxyXFxuICAgICAgaG92ZXI6c2hhZG93LWxnIGhvdmVyOnNoYWRvdy1ibHVlLTUwMC8xMFxcclxcbiAgICAgIHRyYW5zaXRpb24tYWxsIGR1cmF0aW9uLTMwMCB0cmFuc2Zvcm0gaG92ZXI6LXRyYW5zbGF0ZS15LTFcXHJcXG4gICAgXCIsIHN0eWxlOiB7IGFuaW1hdGlvbkRlbGF5OiBgJHtpbmRleCAqIDEwMH1tc2AgfSwgY2hpbGRyZW46IF9qc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImZsZXggaXRlbXMtc3RhcnQgZ2FwLTNcIiwgY2hpbGRyZW46IFtfanN4KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInAtMiByb3VuZGVkLWxnIGJnLWJsdWUtMTAwIGRhcms6YmctYmx1ZS05MDAvMzAgdGV4dC1ibHVlLTYwMCBkYXJrOnRleHQtYmx1ZS00MDAgZ3JvdXAtaG92ZXI6c2NhbGUtMTEwIHRyYW5zaXRpb24tdHJhbnNmb3JtXCIsIGNoaWxkcmVuOiBwZXJtaXNzaW9uLmljb24gfSksIF9qc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImZsZXgtMVwiLCBjaGlsZHJlbjogW19qc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImZsZXggaXRlbXMtY2VudGVyIGdhcC0yXCIsIGNoaWxkcmVuOiBbX2pzeChcInBcIiwgeyBjbGFzc05hbWU6IFwiZm9udC1tZWRpdW0gdGV4dC1ncmF5LTkwMCBkYXJrOnRleHQtd2hpdGVcIiwgY2hpbGRyZW46IHBlcm1pc3Npb24ubmFtZSB9KSwgX2pzeChcInNwYW5cIiwgeyBjbGFzc05hbWU6IFwicHgtMiBweS0wLjUgdGV4dC14cyBmb250LW1lZGl1bSBiZy1wdXJwbGUtMTAwIGRhcms6YmctcHVycGxlLTkwMC8zMCB0ZXh0LXB1cnBsZS03MDAgZGFyazp0ZXh0LXB1cnBsZS0zMDAgcm91bmRlZC1mdWxsXCIsIGNoaWxkcmVuOiBwZXJtaXNzaW9uLnNjb3BlIH0pXSB9KSwgX2pzeChcInBcIiwgeyBjbGFzc05hbWU6IFwidGV4dC1zbSB0ZXh0LWdyYXktNjAwIGRhcms6dGV4dC1ncmF5LTQwMCBtdC0xXCIsIGNoaWxkcmVuOiBwZXJtaXNzaW9uLmRlc2NyaXB0aW9uIH0pXSB9KV0gfSkgfSkpO1xuLyoqXG4gKiBQcm9ncmVzcyBzdGVwIHZpc3VhbGl6YXRpb25cbiAqL1xuY29uc3QgUHJvZ3Jlc3NTdGVwQ2FyZCA9ICh7IHN0ZXBzLCBjdXJyZW50U3RlcEluZGV4IH0pID0+IChfanN4KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInNwYWNlLXktM1wiLCBjaGlsZHJlbjogc3RlcHMubWFwKChzdGVwLCBpbmRleCkgPT4gKF9qc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBgXHJcbiAgICAgICAgICBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtNCBwLTQgcm91bmRlZC1sZyB0cmFuc2l0aW9uLWFsbCBkdXJhdGlvbi0zMDBcclxuICAgICAgICAgICR7c3RlcC5zdGF0dXMgPT09ICdpbl9wcm9ncmVzcydcbiAgICAgICAgICAgID8gJ2JnLWJsdWUtNTAgZGFyazpiZy1ibHVlLTkwMC8yMCBib3JkZXItMiBib3JkZXItYmx1ZS0zMDAgZGFyazpib3JkZXItYmx1ZS03MDAnXG4gICAgICAgICAgICA6IHN0ZXAuc3RhdHVzID09PSAnY29tcGxldGVkJ1xuICAgICAgICAgICAgICAgID8gJ2JnLWdyZWVuLTUwIGRhcms6YmctZ3JlZW4tOTAwLzIwIGJvcmRlciBib3JkZXItZ3JlZW4tMjAwIGRhcms6Ym9yZGVyLWdyZWVuLTgwMCdcbiAgICAgICAgICAgICAgICA6IHN0ZXAuc3RhdHVzID09PSAnZXJyb3InXG4gICAgICAgICAgICAgICAgICAgID8gJ2JnLXJlZC01MCBkYXJrOmJnLXJlZC05MDAvMjAgYm9yZGVyIGJvcmRlci1yZWQtMjAwIGRhcms6Ym9yZGVyLXJlZC04MDAnXG4gICAgICAgICAgICAgICAgICAgIDogJ2JnLWdyYXktNTAgZGFyazpiZy1ncmF5LTgwMCBib3JkZXIgYm9yZGVyLWdyYXktMjAwIGRhcms6Ym9yZGVyLWdyYXktNzAwJ31cclxuICAgICAgICBgLCBjaGlsZHJlbjogW19qc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IGBcclxuICAgICAgICAgICAgdy0xMCBoLTEwIHJvdW5kZWQtZnVsbCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBmbGV4LXNocmluay0wXHJcbiAgICAgICAgICAgICR7c3RlcC5zdGF0dXMgPT09ICdjb21wbGV0ZWQnXG4gICAgICAgICAgICAgICAgICAgID8gJ2JnLWdyZWVuLTUwMCB0ZXh0LXdoaXRlJ1xuICAgICAgICAgICAgICAgICAgICA6IHN0ZXAuc3RhdHVzID09PSAnaW5fcHJvZ3Jlc3MnXG4gICAgICAgICAgICAgICAgICAgICAgICA/ICdiZy1ibHVlLTUwMCB0ZXh0LXdoaXRlJ1xuICAgICAgICAgICAgICAgICAgICAgICAgOiBzdGVwLnN0YXR1cyA9PT0gJ2Vycm9yJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gJ2JnLXJlZC01MDAgdGV4dC13aGl0ZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICdiZy1ncmF5LTMwMCBkYXJrOmJnLWdyYXktNjAwIHRleHQtZ3JheS02MDAgZGFyazp0ZXh0LWdyYXktMzAwJ31cclxuICAgICAgICAgIGAsIGNoaWxkcmVuOiBzdGVwLnN0YXR1cyA9PT0gJ2NvbXBsZXRlZCcgPyAoX2pzeChDaGVjaywgeyBjbGFzc05hbWU6IFwidy01IGgtNVwiIH0pKSA6IHN0ZXAuc3RhdHVzID09PSAnaW5fcHJvZ3Jlc3MnID8gKF9qc3goTG9hZGluZ1NwaW5uZXIsIHsgc2l6ZTogXCJzbVwiIH0pKSA6IHN0ZXAuc3RhdHVzID09PSAnZXJyb3InID8gKF9qc3goWCwgeyBjbGFzc05hbWU6IFwidy01IGgtNVwiIH0pKSA6IChfanN4KFwic3BhblwiLCB7IGNsYXNzTmFtZTogXCJ0ZXh0LXNtIGZvbnQtYm9sZFwiLCBjaGlsZHJlbjogaW5kZXggKyAxIH0pKSB9KSwgX2pzeHMoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwiZmxleC0xXCIsIGNoaWxkcmVuOiBbX2pzeChcInBcIiwgeyBjbGFzc05hbWU6IGBcclxuICAgICAgICAgICAgICBmb250LW1lZGl1bVxyXG4gICAgICAgICAgICAgICR7c3RlcC5zdGF0dXMgPT09ICdjb21wbGV0ZWQnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAndGV4dC1ncmVlbi03MDAgZGFyazp0ZXh0LWdyZWVuLTMwMCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHN0ZXAuc3RhdHVzID09PSAnaW5fcHJvZ3Jlc3MnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gJ3RleHQtYmx1ZS03MDAgZGFyazp0ZXh0LWJsdWUtMzAwJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHN0ZXAuc3RhdHVzID09PSAnZXJyb3InXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICd0ZXh0LXJlZC03MDAgZGFyazp0ZXh0LXJlZC0zMDAnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICd0ZXh0LWdyYXktNjAwIGRhcms6dGV4dC1ncmF5LTQwMCd9XHJcbiAgICAgICAgICAgIGAsIGNoaWxkcmVuOiBzdGVwLmxhYmVsIH0pLCBzdGVwLm1lc3NhZ2UgJiYgKF9qc3goXCJwXCIsIHsgY2xhc3NOYW1lOiBcInRleHQtc20gdGV4dC1ncmF5LTUwMCBkYXJrOnRleHQtZ3JheS00MDAgbXQtMC41XCIsIGNoaWxkcmVuOiBzdGVwLm1lc3NhZ2UgfSkpXSB9KSwgX2pzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJ3LTI0IHRleHQtcmlnaHRcIiwgY2hpbGRyZW46IF9qc3hzKFwic3BhblwiLCB7IGNsYXNzTmFtZTogYFxyXG4gICAgICAgICAgICAgIHRleHQtc20gZm9udC1tZWRpdW1cclxuICAgICAgICAgICAgICAke3N0ZXAuc3RhdHVzID09PSAnY29tcGxldGVkJ1xuICAgICAgICAgICAgICAgICAgICAgICAgPyAndGV4dC1ncmVlbi02MDAgZGFyazp0ZXh0LWdyZWVuLTQwMCdcbiAgICAgICAgICAgICAgICAgICAgICAgIDogc3RlcC5zdGF0dXMgPT09ICdpbl9wcm9ncmVzcydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICd0ZXh0LWJsdWUtNjAwIGRhcms6dGV4dC1ibHVlLTQwMCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICd0ZXh0LWdyYXktNDAwJ31cclxuICAgICAgICAgICAgYCwgY2hpbGRyZW46IFtzdGVwLnBlcmNlbnRhZ2UsIFwiJVwiXSB9KSB9KV0gfSwgc3RlcC5pZCkpKSB9KSk7XG4vKipcbiAqIENyZWRlbnRpYWwgZGlzcGxheSB3aXRoIHNlY3VyZSBtYXNraW5nXG4gKi9cbmNvbnN0IENyZWRlbnRpYWxEaXNwbGF5ID0gKHsgY3JlZGVudGlhbHMsIHNob3dEZXRhaWxzLCBvblRvZ2dsZURldGFpbHMsIG9uQ29weSB9KSA9PiB7XG4gICAgY29uc3QgbWFza1ZhbHVlID0gKHZhbHVlLCBzaG93Rmlyc3QgPSA0LCBzaG93TGFzdCA9IDQpID0+IHtcbiAgICAgICAgaWYgKCF2YWx1ZSB8fCB2YWx1ZS5sZW5ndGggPD0gc2hvd0ZpcnN0ICsgc2hvd0xhc3QgKyA0KVxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICByZXR1cm4gYCR7dmFsdWUuc2xpY2UoMCwgc2hvd0ZpcnN0KX0keycqJy5yZXBlYXQoOCl9JHt2YWx1ZS5zbGljZSgtc2hvd0xhc3QpfWA7XG4gICAgfTtcbiAgICBjb25zdCBmaWVsZHMgPSBbXG4gICAgICAgIHsgbGFiZWw6ICdUZW5hbnQgSUQnLCB2YWx1ZTogY3JlZGVudGlhbHMudGVuYW50SWQgfSxcbiAgICAgICAgeyBsYWJlbDogJ0NsaWVudCBJRCcsIHZhbHVlOiBjcmVkZW50aWFscy5jbGllbnRJZCB9LFxuICAgICAgICB7IGxhYmVsOiAnRG9tYWluJywgdmFsdWU6IGNyZWRlbnRpYWxzLmRvbWFpbiB9LFxuICAgIF07XG4gICAgcmV0dXJuIChfanN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJzcGFjZS15LTRcIiwgY2hpbGRyZW46IFtfanN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW5cIiwgY2hpbGRyZW46IFtfanN4KFwiaDRcIiwgeyBjbGFzc05hbWU6IFwiZm9udC1tZWRpdW0gdGV4dC1ncmF5LTkwMCBkYXJrOnRleHQtd2hpdGVcIiwgY2hpbGRyZW46IFwiQ3JlZGVudGlhbCBEZXRhaWxzXCIgfSksIF9qc3goQnV0dG9uLCB7IHZhcmlhbnQ6IFwiZ2hvc3RcIiwgc2l6ZTogXCJzbVwiLCBvbkNsaWNrOiBvblRvZ2dsZURldGFpbHMsIGljb246IHNob3dEZXRhaWxzID8gX2pzeChFeWVPZmYsIHsgY2xhc3NOYW1lOiBcInctNCBoLTRcIiB9KSA6IF9qc3goRXllLCB7IGNsYXNzTmFtZTogXCJ3LTQgaC00XCIgfSksIGNoaWxkcmVuOiBzaG93RGV0YWlscyA/ICdIaWRlJyA6ICdTaG93JyB9KV0gfSksIF9qc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwic3BhY2UteS0zXCIsIGNoaWxkcmVuOiBmaWVsZHMubWFwKChmaWVsZCkgPT4gKF9qc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImZsZXggaXRlbXMtY2VudGVyIGdhcC0zXCIsIGNoaWxkcmVuOiBbX2pzeHMoXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiBcInRleHQtc20gdGV4dC1ncmF5LTUwMCBkYXJrOnRleHQtZ3JheS00MDAgdy0yNFwiLCBjaGlsZHJlbjogW2ZpZWxkLmxhYmVsLCBcIjpcIl0gfSksIF9qc3goXCJjb2RlXCIsIHsgY2xhc3NOYW1lOiBcImZsZXgtMSBweC0zIHB5LTIgYmctZ3JheS0xMDAgZGFyazpiZy1ncmF5LTcwMCByb3VuZGVkLWxnIHRleHQtc20gZm9udC1tb25vIHRleHQtZ3JheS04MDAgZGFyazp0ZXh0LWdyYXktMjAwXCIsIGNoaWxkcmVuOiBzaG93RGV0YWlscyA/IGZpZWxkLnZhbHVlIDogbWFza1ZhbHVlKGZpZWxkLnZhbHVlKSB9KSwgX2pzeChCdXR0b24sIHsgdmFyaWFudDogXCJnaG9zdFwiLCBzaXplOiBcInNtXCIsIG9uQ2xpY2s6ICgpID0+IG9uQ29weShmaWVsZC52YWx1ZSksIGljb246IF9qc3goQ29weSwgeyBjbGFzc05hbWU6IFwidy00IGgtNFwiIH0pIH0pXSB9LCBmaWVsZC5sYWJlbCkpKSB9KSwgX2pzeHMoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgdGV4dC1zbSB0ZXh0LWdyYXktNTAwIGRhcms6dGV4dC1ncmF5LTQwMFwiLCBjaGlsZHJlbjogW19qc3goQ2xvY2ssIHsgY2xhc3NOYW1lOiBcInctNCBoLTRcIiB9KSwgX2pzeHMoXCJzcGFuXCIsIHsgY2hpbGRyZW46IFtcIkNyZWF0ZWQ6IFwiLCBjcmVkZW50aWFscy5jcmVhdGVkXSB9KSwgY3JlZGVudGlhbHMuZXhwaXJlc0F0ICYmIChfanN4cyhfRnJhZ21lbnQsIHsgY2hpbGRyZW46IFtfanN4KFwic3BhblwiLCB7IGNsYXNzTmFtZTogXCJteC0yXCIsIGNoaWxkcmVuOiBcIlxcdTIwMjJcIiB9KSwgX2pzeHMoXCJzcGFuXCIsIHsgY2hpbGRyZW46IFtcIkV4cGlyZXM6IFwiLCBjcmVkZW50aWFscy5leHBpcmVzQXRdIH0pXSB9KSldIH0pXSB9KSk7XG59O1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gQ29uZmlybWF0aW9uIERpYWxvZyBDb21wb25lbnRcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbmNvbnN0IENvbmZpcm1hdGlvbkRpYWxvZyA9ICh7IGlzT3Blbiwgb25DbG9zZSwgb25Db25maXJtLCBjb21wYW55TmFtZSwgc2hvd1dpbmRvdywgYXV0b0luc3RhbGxNb2R1bGVzLCBza2lwQXp1cmVSb2xlcywgc2VjcmV0VmFsaWRpdHlZZWFycywgfSkgPT4ge1xuICAgIGlmICghaXNPcGVuKVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICByZXR1cm4gKF9qc3goTW9kYWwsIHsgaXNPcGVuOiBpc09wZW4sIG9uQ2xvc2U6IG9uQ2xvc2UsIHRpdGxlOiBcIkNvbmZpcm0gQXBwIFJlZ2lzdHJhdGlvblwiLCBzaXplOiBcIm1kXCIsIGNoaWxkcmVuOiBfanN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJzcGFjZS15LTZcIiwgY2hpbGRyZW46IFtfanN4KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImJnLWJsdWUtNTAgZGFyazpiZy1ibHVlLTkwMC8yMCBib3JkZXIgYm9yZGVyLWJsdWUtMjAwIGRhcms6Ym9yZGVyLWJsdWUtODAwIHJvdW5kZWQtbGcgcC00XCIsIGNoaWxkcmVuOiBfanN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJmbGV4IGl0ZW1zLXN0YXJ0IGdhcC0zXCIsIGNoaWxkcmVuOiBbX2pzeChJbmZvLCB7IGNsYXNzTmFtZTogXCJ3LTUgaC01IHRleHQtYmx1ZS01MDAgbXQtMC41IGZsZXgtc2hyaW5rLTBcIiB9KSwgX2pzeHMoXCJkaXZcIiwgeyBjaGlsZHJlbjogW19qc3goXCJwXCIsIHsgY2xhc3NOYW1lOiBcImZvbnQtbWVkaXVtIHRleHQtYmx1ZS04MDAgZGFyazp0ZXh0LWJsdWUtMjAwXCIsIGNoaWxkcmVuOiBcIlJldmlldyBZb3VyIFNldHRpbmdzXCIgfSksIF9qc3goXCJwXCIsIHsgY2xhc3NOYW1lOiBcInRleHQtc20gdGV4dC1ibHVlLTcwMCBkYXJrOnRleHQtYmx1ZS0zMDAgbXQtMVwiLCBjaGlsZHJlbjogXCJQbGVhc2UgY29uZmlybSB0aGUgZm9sbG93aW5nIHNldHRpbmdzIGJlZm9yZSBwcm9jZWVkaW5nLiBBIGJyb3dzZXIgd2luZG93IHdpbGwgb3BlbiBmb3IgQXp1cmUgYXV0aGVudGljYXRpb24uXCIgfSldIH0pXSB9KSB9KSwgX2pzeHMoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwiYmctd2hpdGUgZGFyazpiZy1ncmF5LTgwMCByb3VuZGVkLWxnIGJvcmRlciBib3JkZXItZ3JheS0yMDAgZGFyazpib3JkZXItZ3JheS03MDAgb3ZlcmZsb3ctaGlkZGVuXCIsIGNoaWxkcmVuOiBbX2pzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJweC00IHB5LTMgYmctZ3JheS01MCBkYXJrOmJnLWdyYXktNzUwIGJvcmRlci1iIGJvcmRlci1ncmF5LTIwMCBkYXJrOmJvcmRlci1ncmF5LTcwMFwiLCBjaGlsZHJlbjogX2pzeHMoXCJoM1wiLCB7IGNsYXNzTmFtZTogXCJmb250LW1lZGl1bSB0ZXh0LWdyYXktOTAwIGRhcms6dGV4dC13aGl0ZSBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiLCBjaGlsZHJlbjogW19qc3goQnVpbGRpbmcyLCB7IGNsYXNzTmFtZTogXCJ3LTQgaC00IHRleHQtYmx1ZS01MDBcIiB9KSwgXCJDb25maWd1cmF0aW9uIFN1bW1hcnlcIl0gfSkgfSksIF9qc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImRpdmlkZS15IGRpdmlkZS1ncmF5LTIwMCBkYXJrOmRpdmlkZS1ncmF5LTcwMFwiLCBjaGlsZHJlbjogW19qc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInB4LTQgcHktMyBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW5cIiwgY2hpbGRyZW46IFtfanN4KFwic3BhblwiLCB7IGNsYXNzTmFtZTogXCJ0ZXh0LXNtIHRleHQtZ3JheS02MDAgZGFyazp0ZXh0LWdyYXktNDAwXCIsIGNoaWxkcmVuOiBcIkNvbXBhbnkgTmFtZVwiIH0pLCBfanN4KFwic3BhblwiLCB7IGNsYXNzTmFtZTogXCJmb250LW1lZGl1bSB0ZXh0LWdyYXktOTAwIGRhcms6dGV4dC13aGl0ZVwiLCBjaGlsZHJlbjogY29tcGFueU5hbWUgfSldIH0pLCBfanN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJweC00IHB5LTMgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuXCIsIGNoaWxkcmVuOiBbX2pzeChcInNwYW5cIiwgeyBjbGFzc05hbWU6IFwidGV4dC1zbSB0ZXh0LWdyYXktNjAwIGRhcms6dGV4dC1ncmF5LTQwMFwiLCBjaGlsZHJlbjogXCJDcmVkZW50aWFscyBQYXRoXCIgfSksIF9qc3hzKFwiY29kZVwiLCB7IGNsYXNzTmFtZTogXCJ0ZXh0LXNtIGZvbnQtbW9ubyB0ZXh0LWdyYXktOTAwIGRhcms6dGV4dC13aGl0ZSBiZy1ncmF5LTEwMCBkYXJrOmJnLWdyYXktNzAwIHB4LTIgcHktMSByb3VuZGVkXCIsIGNoaWxkcmVuOiBbXCJDOlxcXFxEaXNjb3ZlcnlEYXRhXFxcXFwiLCBjb21wYW55TmFtZSwgXCJcXFxcQ3JlZGVudGlhbHNcIl0gfSldIH0pLCBfanN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJweC00IHB5LTMgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuXCIsIGNoaWxkcmVuOiBbX2pzeChcInNwYW5cIiwgeyBjbGFzc05hbWU6IFwidGV4dC1zbSB0ZXh0LWdyYXktNjAwIGRhcms6dGV4dC1ncmF5LTQwMFwiLCBjaGlsZHJlbjogXCJTZWNyZXQgVmFsaWRpdHlcIiB9KSwgX2pzeHMoXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiBcImZvbnQtbWVkaXVtIHRleHQtZ3JheS05MDAgZGFyazp0ZXh0LXdoaXRlXCIsIGNoaWxkcmVuOiBbc2VjcmV0VmFsaWRpdHlZZWFycywgXCIgeWVhclwiLCBzZWNyZXRWYWxpZGl0eVllYXJzICE9PSAxID8gJ3MnIDogJyddIH0pXSB9KV0gfSldIH0pLCBfanN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJiZy13aGl0ZSBkYXJrOmJnLWdyYXktODAwIHJvdW5kZWQtbGcgYm9yZGVyIGJvcmRlci1ncmF5LTIwMCBkYXJrOmJvcmRlci1ncmF5LTcwMCBvdmVyZmxvdy1oaWRkZW5cIiwgY2hpbGRyZW46IFtfanN4KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInB4LTQgcHktMyBiZy1ncmF5LTUwIGRhcms6YmctZ3JheS03NTAgYm9yZGVyLWIgYm9yZGVyLWdyYXktMjAwIGRhcms6Ym9yZGVyLWdyYXktNzAwXCIsIGNoaWxkcmVuOiBfanN4cyhcImgzXCIsIHsgY2xhc3NOYW1lOiBcImZvbnQtbWVkaXVtIHRleHQtZ3JheS05MDAgZGFyazp0ZXh0LXdoaXRlIGZsZXggaXRlbXMtY2VudGVyIGdhcC0yXCIsIGNoaWxkcmVuOiBbX2pzeChTaGllbGQsIHsgY2xhc3NOYW1lOiBcInctNCBoLTQgdGV4dC1ncmVlbi01MDBcIiB9KSwgXCJPcHRpb25zXCJdIH0pIH0pLCBfanN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJwLTQgc3BhY2UteS0zXCIsIGNoaWxkcmVuOiBbX2pzeHMoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTNcIiwgY2hpbGRyZW46IFtzaG93V2luZG93ID8gKF9qc3goQ2hlY2tDaXJjbGUsIHsgY2xhc3NOYW1lOiBcInctNSBoLTUgdGV4dC1ncmVlbi01MDBcIiB9KSkgOiAoX2pzeChYLCB7IGNsYXNzTmFtZTogXCJ3LTUgaC01IHRleHQtZ3JheS00MDBcIiB9KSksIF9qc3goXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiBgdGV4dC1zbSAke3Nob3dXaW5kb3cgPyAndGV4dC1ncmF5LTkwMCBkYXJrOnRleHQtd2hpdGUnIDogJ3RleHQtZ3JheS01MDAgZGFyazp0ZXh0LWdyYXktNDAwJ31gLCBjaGlsZHJlbjogXCJTaG93IFBvd2VyU2hlbGwgV2luZG93XCIgfSldIH0pLCBfanN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtM1wiLCBjaGlsZHJlbjogW2F1dG9JbnN0YWxsTW9kdWxlcyA/IChfanN4KENoZWNrQ2lyY2xlLCB7IGNsYXNzTmFtZTogXCJ3LTUgaC01IHRleHQtZ3JlZW4tNTAwXCIgfSkpIDogKF9qc3goWCwgeyBjbGFzc05hbWU6IFwidy01IGgtNSB0ZXh0LWdyYXktNDAwXCIgfSkpLCBfanN4KFwic3BhblwiLCB7IGNsYXNzTmFtZTogYHRleHQtc20gJHthdXRvSW5zdGFsbE1vZHVsZXMgPyAndGV4dC1ncmF5LTkwMCBkYXJrOnRleHQtd2hpdGUnIDogJ3RleHQtZ3JheS01MDAgZGFyazp0ZXh0LWdyYXktNDAwJ31gLCBjaGlsZHJlbjogXCJBdXRvLUluc3RhbGwgUmVxdWlyZWQgTW9kdWxlc1wiIH0pXSB9KSwgX2pzeHMoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTNcIiwgY2hpbGRyZW46IFtza2lwQXp1cmVSb2xlcyA/IChfanN4KENoZWNrQ2lyY2xlLCB7IGNsYXNzTmFtZTogXCJ3LTUgaC01IHRleHQtZ3JlZW4tNTAwXCIgfSkpIDogKF9qc3goWCwgeyBjbGFzc05hbWU6IFwidy01IGgtNSB0ZXh0LWdyYXktNDAwXCIgfSkpLCBfanN4KFwic3BhblwiLCB7IGNsYXNzTmFtZTogYHRleHQtc20gJHtza2lwQXp1cmVSb2xlcyA/ICd0ZXh0LWdyYXktOTAwIGRhcms6dGV4dC13aGl0ZScgOiAndGV4dC1ncmF5LTUwMCBkYXJrOnRleHQtZ3JheS00MDAnfWAsIGNoaWxkcmVuOiBcIlNraXAgQXp1cmUgUm9sZSBBc3NpZ25tZW50c1wiIH0pXSB9KV0gfSldIH0pLCBfanN4KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImJnLXllbGxvdy01MCBkYXJrOmJnLXllbGxvdy05MDAvMjAgYm9yZGVyIGJvcmRlci15ZWxsb3ctMjAwIGRhcms6Ym9yZGVyLXllbGxvdy04MDAgcm91bmRlZC1sZyBwLTRcIiwgY2hpbGRyZW46IF9qc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImZsZXggaXRlbXMtc3RhcnQgZ2FwLTNcIiwgY2hpbGRyZW46IFtfanN4KEFsZXJ0VHJpYW5nbGUsIHsgY2xhc3NOYW1lOiBcInctNSBoLTUgdGV4dC15ZWxsb3ctNTAwIG10LTAuNSBmbGV4LXNocmluay0wXCIgfSksIF9qc3hzKFwiZGl2XCIsIHsgY2hpbGRyZW46IFtfanN4KFwicFwiLCB7IGNsYXNzTmFtZTogXCJmb250LW1lZGl1bSB0ZXh0LXllbGxvdy04MDAgZGFyazp0ZXh0LXllbGxvdy0yMDBcIiwgY2hpbGRyZW46IFwiR2xvYmFsIEFkbWluIFJlcXVpcmVkXCIgfSksIF9qc3hzKFwicFwiLCB7IGNsYXNzTmFtZTogXCJ0ZXh0LXNtIHRleHQteWVsbG93LTcwMCBkYXJrOnRleHQteWVsbG93LTMwMCBtdC0xXCIsIGNoaWxkcmVuOiBbXCJBZnRlciBjbGlja2luZyBcXFwiQ29uZmlybSAmIExhdW5jaFxcXCIsIGEgYnJvd3NlciB3aW5kb3cgd2lsbCBvcGVuIGZvciBNaWNyb3NvZnQgYXV0aGVudGljYXRpb24uIFlvdSBtdXN0IHNpZ24gaW4gd2l0aCBhIFwiLCBfanN4KFwic3Ryb25nXCIsIHsgY2hpbGRyZW46IFwiR2xvYmFsIEFkbWluaXN0cmF0b3JcIiB9KSwgXCIgYWNjb3VudCB0byBjcmVhdGUgdGhlIGFwcCByZWdpc3RyYXRpb24uXCJdIH0pXSB9KV0gfSkgfSksIF9qc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImZsZXgganVzdGlmeS1lbmQgZ2FwLTMgcHQtNCBib3JkZXItdCBib3JkZXItZ3JheS0yMDAgZGFyazpib3JkZXItZ3JheS03MDBcIiwgY2hpbGRyZW46IFtfanN4KEJ1dHRvbiwgeyB2YXJpYW50OiBcInNlY29uZGFyeVwiLCBvbkNsaWNrOiBvbkNsb3NlLCBjaGlsZHJlbjogXCJHbyBCYWNrXCIgfSksIF9qc3goQnV0dG9uLCB7IHZhcmlhbnQ6IFwicHJpbWFyeVwiLCBvbkNsaWNrOiBvbkNvbmZpcm0sIGljb246IF9qc3goUGxheSwgeyBjbGFzc05hbWU6IFwidy00IGgtNFwiIH0pLCBjaGlsZHJlbjogXCJDb25maXJtICYgTGF1bmNoXCIgfSldIH0pXSB9KSB9KSk7XG59O1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gTWFpbiBDb21wb25lbnRcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbmNvbnN0IFNldHVwQ29tcGFueVZpZXcgPSAoKSA9PiB7XG4gICAgLy8gQXBwIHJlZ2lzdHJhdGlvbiBob29rXG4gICAgY29uc3QgeyBzdGF0ZTogYXBwUmVnU3RhdGUsIGxhdW5jaEFwcFJlZ2lzdHJhdGlvbiwgY2hlY2tFeGlzdGluZ0NyZWRlbnRpYWxzLCBpbXBvcnRFeGlzdGluZ0NyZWRlbnRpYWxzLCBzdG9wTW9uaXRvcmluZywgcmVzZXQ6IHJlc2V0QXBwUmVnaXN0cmF0aW9uIH0gPSB1c2VBcHBSZWdpc3RyYXRpb24oKTtcbiAgICAvLyBXaXphcmQgc3RhdGVcbiAgICBjb25zdCBbY3VycmVudFN0ZXAsIHNldEN1cnJlbnRTdGVwXSA9IHVzZVN0YXRlKDApO1xuICAgIGNvbnN0IFtjb21wbGV0ZWRTdGVwcywgc2V0Q29tcGxldGVkU3RlcHNdID0gdXNlU3RhdGUobmV3IFNldCgpKTtcbiAgICAvLyBDb25maXJtYXRpb24gZGlhbG9nIHN0YXRlXG4gICAgY29uc3QgW3Nob3dDb25maXJtYXRpb24sIHNldFNob3dDb25maXJtYXRpb25dID0gdXNlU3RhdGUoZmFsc2UpO1xuICAgIC8vIEZvcm0gc3RhdGVcbiAgICBjb25zdCBbY29tcGFueU5hbWUsIHNldENvbXBhbnlOYW1lXSA9IHVzZVN0YXRlKCcnKTtcbiAgICBjb25zdCBbdGVuYW50SWQsIHNldFRlbmFudElkXSA9IHVzZVN0YXRlKCcnKTtcbiAgICBjb25zdCBbc2hvd1dpbmRvdywgc2V0U2hvd1dpbmRvd10gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgICBjb25zdCBbYXV0b0luc3RhbGxNb2R1bGVzLCBzZXRBdXRvSW5zdGFsbE1vZHVsZXNdID0gdXNlU3RhdGUodHJ1ZSk7XG4gICAgY29uc3QgW3NlY3JldFZhbGlkaXR5WWVhcnMsIHNldFNlY3JldFZhbGlkaXR5WWVhcnNdID0gdXNlU3RhdGUoMik7XG4gICAgY29uc3QgW3NraXBBenVyZVJvbGVzLCBzZXRTa2lwQXp1cmVSb2xlc10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gICAgLy8gQ29ubmVjdGl2aXR5IHN0YXRlXG4gICAgY29uc3QgW2Nvbm5lY3Rpdml0eSwgc2V0Q29ubmVjdGl2aXR5XSA9IHVzZVN0YXRlKHtcbiAgICAgICAgaW50ZXJuZXQ6ICd1bmtub3duJyxcbiAgICAgICAgZ3JhcGg6ICd1bmtub3duJyxcbiAgICAgICAgYXp1cmU6ICd1bmtub3duJyxcbiAgICB9KTtcbiAgICBjb25zdCBbaXNDaGVja2luZ0Nvbm5lY3Rpdml0eSwgc2V0SXNDaGVja2luZ0Nvbm5lY3Rpdml0eV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gICAgLy8gRXhpc3RpbmcgY3JlZGVudGlhbHMgY2hlY2tcbiAgICBjb25zdCBbaGFzRXhpc3RpbmdDcmVkZW50aWFscywgc2V0SGFzRXhpc3RpbmdDcmVkZW50aWFsc10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gICAgLy8gUHJvZ3Jlc3Mgc3RlcHMgLSBub3cgZHJpdmVuIGJ5IGFwcFJlZ1N0YXRlXG4gICAgY29uc3QgcHJvZ3Jlc3NTdGVwcyA9IHVzZU1lbW8oKCkgPT4ge1xuICAgICAgICBpZiAoYXBwUmVnU3RhdGUuc3VjY2Vzcykge1xuICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICB7IGlkOiAnbGF1bmNoJywgbGFiZWw6ICdMYXVuY2hpbmcgUG93ZXJTaGVsbCBTY3JpcHQnLCBzdGF0dXM6ICdjb21wbGV0ZWQnLCBwZXJjZW50YWdlOiAyNSwgbWVzc2FnZTogJ1NjcmlwdCBsYXVuY2hlZCcgfSxcbiAgICAgICAgICAgICAgICB7IGlkOiAncmVnaXN0ZXInLCBsYWJlbDogJ0NyZWF0aW5nIEFwcCBSZWdpc3RyYXRpb24nLCBzdGF0dXM6ICdjb21wbGV0ZWQnLCBwZXJjZW50YWdlOiA1MCwgbWVzc2FnZTogJ0FwcCByZWdpc3RlcmVkJyB9LFxuICAgICAgICAgICAgICAgIHsgaWQ6ICdwZXJtaXNzaW9ucycsIGxhYmVsOiAnQ29uZmlndXJpbmcgUGVybWlzc2lvbnMnLCBzdGF0dXM6ICdjb21wbGV0ZWQnLCBwZXJjZW50YWdlOiA3NSwgbWVzc2FnZTogJ1Blcm1pc3Npb25zIGdyYW50ZWQnIH0sXG4gICAgICAgICAgICAgICAgeyBpZDogJ3N0b3JlJywgbGFiZWw6ICdTdG9yaW5nIENyZWRlbnRpYWxzJywgc3RhdHVzOiAnY29tcGxldGVkJywgcGVyY2VudGFnZTogMTAwLCBtZXNzYWdlOiAnQ3JlZGVudGlhbHMgc2F2ZWQnIH0sXG4gICAgICAgICAgICBdO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhcHBSZWdTdGF0ZS5lcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICB7IGlkOiAnbGF1bmNoJywgbGFiZWw6ICdMYXVuY2hpbmcgUG93ZXJTaGVsbCBTY3JpcHQnLCBzdGF0dXM6IGFwcFJlZ1N0YXRlLmlzUnVubmluZyB8fCBhcHBSZWdTdGF0ZS5pc01vbml0b3JpbmcgPyAnY29tcGxldGVkJyA6ICdlcnJvcicsIHBlcmNlbnRhZ2U6IDI1IH0sXG4gICAgICAgICAgICAgICAgeyBpZDogJ3JlZ2lzdGVyJywgbGFiZWw6ICdDcmVhdGluZyBBcHAgUmVnaXN0cmF0aW9uJywgc3RhdHVzOiAncGVuZGluZycsIHBlcmNlbnRhZ2U6IDUwIH0sXG4gICAgICAgICAgICAgICAgeyBpZDogJ3Blcm1pc3Npb25zJywgbGFiZWw6ICdDb25maWd1cmluZyBQZXJtaXNzaW9ucycsIHN0YXR1czogJ3BlbmRpbmcnLCBwZXJjZW50YWdlOiA3NSB9LFxuICAgICAgICAgICAgICAgIHsgaWQ6ICdzdG9yZScsIGxhYmVsOiAnU3RvcmluZyBDcmVkZW50aWFscycsIHN0YXR1czogJ3BlbmRpbmcnLCBwZXJjZW50YWdlOiAxMDAgfSxcbiAgICAgICAgICAgIF07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGFwcFJlZ1N0YXRlLmlzTW9uaXRvcmluZykge1xuICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICB7IGlkOiAnbGF1bmNoJywgbGFiZWw6ICdMYXVuY2hpbmcgUG93ZXJTaGVsbCBTY3JpcHQnLCBzdGF0dXM6ICdjb21wbGV0ZWQnLCBwZXJjZW50YWdlOiAyNSwgbWVzc2FnZTogJ1NjcmlwdCBsYXVuY2hlZCcgfSxcbiAgICAgICAgICAgICAgICB7IGlkOiAncmVnaXN0ZXInLCBsYWJlbDogJ0NyZWF0aW5nIEFwcCBSZWdpc3RyYXRpb24nLCBzdGF0dXM6ICdpbl9wcm9ncmVzcycsIHBlcmNlbnRhZ2U6IDUwLCBtZXNzYWdlOiBhcHBSZWdTdGF0ZS5wcm9ncmVzcyB9LFxuICAgICAgICAgICAgICAgIHsgaWQ6ICdwZXJtaXNzaW9ucycsIGxhYmVsOiAnQ29uZmlndXJpbmcgUGVybWlzc2lvbnMnLCBzdGF0dXM6ICdwZW5kaW5nJywgcGVyY2VudGFnZTogNzUgfSxcbiAgICAgICAgICAgICAgICB7IGlkOiAnc3RvcmUnLCBsYWJlbDogJ1N0b3JpbmcgQ3JlZGVudGlhbHMnLCBzdGF0dXM6ICdwZW5kaW5nJywgcGVyY2VudGFnZTogMTAwIH0sXG4gICAgICAgICAgICBdO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhcHBSZWdTdGF0ZS5pc1J1bm5pbmcpIHtcbiAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgICAgeyBpZDogJ2xhdW5jaCcsIGxhYmVsOiAnTGF1bmNoaW5nIFBvd2VyU2hlbGwgU2NyaXB0Jywgc3RhdHVzOiAnaW5fcHJvZ3Jlc3MnLCBwZXJjZW50YWdlOiAyNSwgbWVzc2FnZTogYXBwUmVnU3RhdGUucHJvZ3Jlc3MgfSxcbiAgICAgICAgICAgICAgICB7IGlkOiAncmVnaXN0ZXInLCBsYWJlbDogJ0NyZWF0aW5nIEFwcCBSZWdpc3RyYXRpb24nLCBzdGF0dXM6ICdwZW5kaW5nJywgcGVyY2VudGFnZTogNTAgfSxcbiAgICAgICAgICAgICAgICB7IGlkOiAncGVybWlzc2lvbnMnLCBsYWJlbDogJ0NvbmZpZ3VyaW5nIFBlcm1pc3Npb25zJywgc3RhdHVzOiAncGVuZGluZycsIHBlcmNlbnRhZ2U6IDc1IH0sXG4gICAgICAgICAgICAgICAgeyBpZDogJ3N0b3JlJywgbGFiZWw6ICdTdG9yaW5nIENyZWRlbnRpYWxzJywgc3RhdHVzOiAncGVuZGluZycsIHBlcmNlbnRhZ2U6IDEwMCB9LFxuICAgICAgICAgICAgXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgeyBpZDogJ2xhdW5jaCcsIGxhYmVsOiAnTGF1bmNoaW5nIFBvd2VyU2hlbGwgU2NyaXB0Jywgc3RhdHVzOiAncGVuZGluZycsIHBlcmNlbnRhZ2U6IDI1IH0sXG4gICAgICAgICAgICB7IGlkOiAncmVnaXN0ZXInLCBsYWJlbDogJ0NyZWF0aW5nIEFwcCBSZWdpc3RyYXRpb24nLCBzdGF0dXM6ICdwZW5kaW5nJywgcGVyY2VudGFnZTogNTAgfSxcbiAgICAgICAgICAgIHsgaWQ6ICdwZXJtaXNzaW9ucycsIGxhYmVsOiAnQ29uZmlndXJpbmcgUGVybWlzc2lvbnMnLCBzdGF0dXM6ICdwZW5kaW5nJywgcGVyY2VudGFnZTogNzUgfSxcbiAgICAgICAgICAgIHsgaWQ6ICdzdG9yZScsIGxhYmVsOiAnU3RvcmluZyBDcmVkZW50aWFscycsIHN0YXR1czogJ3BlbmRpbmcnLCBwZXJjZW50YWdlOiAxMDAgfSxcbiAgICAgICAgXTtcbiAgICB9LCBbYXBwUmVnU3RhdGVdKTtcbiAgICAvLyBDcmVkZW50aWFsIHN0YXRlXG4gICAgY29uc3QgW2NyZWRlbnRpYWxzLCBzZXRDcmVkZW50aWFsc10gPSB1c2VTdGF0ZShudWxsKTtcbiAgICBjb25zdCBbc2hvd0NyZWRlbnRpYWxzLCBzZXRTaG93Q3JlZGVudGlhbHNdID0gdXNlU3RhdGUoZmFsc2UpO1xuICAgIC8vIERlcml2ZWQgc3RhdGUgZnJvbSBob29rXG4gICAgY29uc3QgaXNSdW5uaW5nID0gYXBwUmVnU3RhdGUuaXNSdW5uaW5nIHx8IGFwcFJlZ1N0YXRlLmlzTW9uaXRvcmluZztcbiAgICBjb25zdCBlcnJvciA9IGFwcFJlZ1N0YXRlLmVycm9yO1xuICAgIGNvbnN0IHN1Y2Nlc3MgPSBhcHBSZWdTdGF0ZS5zdWNjZXNzO1xuICAgIGNvbnN0IHByb2dyZXNzID0gYXBwUmVnU3RhdGUuc3VjY2VzcyA/IDEwMCA6IGFwcFJlZ1N0YXRlLmlzTW9uaXRvcmluZyA/IDUwIDogYXBwUmVnU3RhdGUuaXNSdW5uaW5nID8gMjUgOiAwO1xuICAgIC8vIFdpemFyZCBzdGVwcyBkZWZpbml0aW9uXG4gICAgY29uc3Qgd2l6YXJkU3RlcHMgPSB1c2VNZW1vKCgpID0+IFtcbiAgICAgICAge1xuICAgICAgICAgICAgaWQ6ICd3ZWxjb21lJyxcbiAgICAgICAgICAgIHRpdGxlOiAnV2VsY29tZScsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogJ0dldCBzdGFydGVkIHdpdGggQXp1cmUgaW50ZWdyYXRpb24nLFxuICAgICAgICAgICAgaWNvbjogX2pzeChTcGFya2xlcywgeyBjbGFzc05hbWU6IFwidy02IGgtNlwiIH0pLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBpZDogJ2Nvbm5lY3Rpdml0eScsXG4gICAgICAgICAgICB0aXRsZTogJ0Nvbm5lY3Rpdml0eScsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogJ0NoZWNrIGNsb3VkIHNlcnZpY2UgY29ubmVjdGlvbnMnLFxuICAgICAgICAgICAgaWNvbjogX2pzeChHbG9iZSwgeyBjbGFzc05hbWU6IFwidy02IGgtNlwiIH0pLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBpZDogJ2NvbXBhbnknLFxuICAgICAgICAgICAgdGl0bGU6ICdDb21wYW55JyxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnRW50ZXIgb3JnYW5pemF0aW9uIGRldGFpbHMnLFxuICAgICAgICAgICAgaWNvbjogX2pzeChCdWlsZGluZzIsIHsgY2xhc3NOYW1lOiBcInctNiBoLTZcIiB9KSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgaWQ6ICdwZXJtaXNzaW9ucycsXG4gICAgICAgICAgICB0aXRsZTogJ1Blcm1pc3Npb25zJyxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnUmV2aWV3IHJlcXVpcmVkIGFjY2VzcycsXG4gICAgICAgICAgICBpY29uOiBfanN4KFNoaWVsZCwgeyBjbGFzc05hbWU6IFwidy02IGgtNlwiIH0pLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBpZDogJ3NldHVwJyxcbiAgICAgICAgICAgIHRpdGxlOiAnU2V0dXAnLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246ICdDcmVhdGUgYXBwIHJlZ2lzdHJhdGlvbicsXG4gICAgICAgICAgICBpY29uOiBfanN4KFphcCwgeyBjbGFzc05hbWU6IFwidy02IGgtNlwiIH0pLFxuICAgICAgICB9LFxuICAgIF0sIFtdKTtcbiAgICAvLyBDaGVjayBjb25uZWN0aXZpdHlcbiAgICBjb25zdCBjaGVja0Nvbm5lY3Rpdml0eSA9IHVzZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgc2V0SXNDaGVja2luZ0Nvbm5lY3Rpdml0eSh0cnVlKTtcbiAgICAgICAgc2V0Q29ubmVjdGl2aXR5KHsgaW50ZXJuZXQ6ICdjaGVja2luZycsIGdyYXBoOiAnY2hlY2tpbmcnLCBhenVyZTogJ2NoZWNraW5nJyB9KTtcbiAgICAgICAgLy8gQ2hlY2sgaW50ZXJuZXRcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IG9ubGluZSA9IG5hdmlnYXRvci5vbkxpbmU7XG4gICAgICAgICAgICBzZXRDb25uZWN0aXZpdHkoKHByZXYpID0+ICh7IC4uLnByZXYsIGludGVybmV0OiBvbmxpbmUgPyAnY29ubmVjdGVkJyA6ICdmYWlsZWQnIH0pKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCB7XG4gICAgICAgICAgICBzZXRDb25uZWN0aXZpdHkoKHByZXYpID0+ICh7IC4uLnByZXYsIGludGVybmV0OiAnZmFpbGVkJyB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ2hlY2sgR3JhcGggQVBJIChzaW11bGF0ZWQgZm9yIG5vdylcbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgNTAwKSk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBJbiByZWFsIGltcGxlbWVudGF0aW9uLCB1c2UgZmV0Y2ggdG8gZ3JhcGgubWljcm9zb2Z0LmNvbVxuICAgICAgICAgICAgc2V0Q29ubmVjdGl2aXR5KChwcmV2KSA9PiAoeyAuLi5wcmV2LCBncmFwaDogJ2Nvbm5lY3RlZCcgfSkpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIHtcbiAgICAgICAgICAgIHNldENvbm5lY3Rpdml0eSgocHJldikgPT4gKHsgLi4ucHJldiwgZ3JhcGg6ICdmYWlsZWQnIH0pKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBDaGVjayBBenVyZSBBRCAoc2ltdWxhdGVkIGZvciBub3cpXG4gICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDUwMCkpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgc2V0Q29ubmVjdGl2aXR5KChwcmV2KSA9PiAoeyAuLi5wcmV2LCBhenVyZTogJ2Nvbm5lY3RlZCcgfSkpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIHtcbiAgICAgICAgICAgIHNldENvbm5lY3Rpdml0eSgocHJldikgPT4gKHsgLi4ucHJldiwgYXp1cmU6ICdmYWlsZWQnIH0pKTtcbiAgICAgICAgfVxuICAgICAgICBzZXRJc0NoZWNraW5nQ29ubmVjdGl2aXR5KGZhbHNlKTtcbiAgICB9LCBbXSk7XG4gICAgLy8gVmFsaWRhdGUgdGVuYW50IElEIGZvcm1hdFxuICAgIGNvbnN0IHZhbGlkYXRlVGVuYW50SWQgPSB1c2VDYWxsYmFjaygoaWQpID0+IHtcbiAgICAgICAgaWYgKCFpZClcbiAgICAgICAgICAgIHJldHVybiB0cnVlOyAvLyBFbXB0eSBpcyB2YWxpZCAob3B0aW9uYWwgZmllbGQpXG4gICAgICAgIGNvbnN0IGd1aWRSZWdleCA9IC9eWzAtOWEtZl17OH0tWzAtOWEtZl17NH0tWzAtOWEtZl17NH0tWzAtOWEtZl17NH0tWzAtOWEtZl17MTJ9JC9pO1xuICAgICAgICBjb25zdCBkb21haW5SZWdleCA9IC9eW2EtekEtWjAtOV1bYS16QS1aMC05LV0qXFwub25taWNyb3NvZnRcXC5jb20kL2k7XG4gICAgICAgIHJldHVybiBndWlkUmVnZXgudGVzdChpZCkgfHwgZG9tYWluUmVnZXgudGVzdChpZCk7XG4gICAgfSwgW10pO1xuICAgIC8vIENvcHkgdG8gY2xpcGJvYXJkXG4gICAgY29uc3QgY29weVRvQ2xpcGJvYXJkID0gdXNlQ2FsbGJhY2soYXN5bmMgKHRleHQpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IG5hdmlnYXRvci5jbGlwYm9hcmQud3JpdGVUZXh0KHRleHQpO1xuICAgICAgICAgICAgLy8gQ291bGQgYWRkIGEgdG9hc3Qgbm90aWZpY2F0aW9uIGhlcmVcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gY29weTonLCBlcnIpO1xuICAgICAgICB9XG4gICAgfSwgW10pO1xuICAgIC8vIE5hdmlnYXRlIHdpemFyZFxuICAgIGNvbnN0IG5leHRTdGVwID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgICAgICBpZiAoY3VycmVudFN0ZXAgPCB3aXphcmRTdGVwcy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICBzZXRDb21wbGV0ZWRTdGVwcygocHJldikgPT4gbmV3IFNldChbLi4ucHJldiwgY3VycmVudFN0ZXBdKSk7XG4gICAgICAgICAgICBzZXRDdXJyZW50U3RlcCgocHJldikgPT4gcHJldiArIDEpO1xuICAgICAgICB9XG4gICAgfSwgW2N1cnJlbnRTdGVwLCB3aXphcmRTdGVwcy5sZW5ndGhdKTtcbiAgICBjb25zdCBwcmV2U3RlcCA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICAgICAgaWYgKGN1cnJlbnRTdGVwID4gMCkge1xuICAgICAgICAgICAgc2V0Q3VycmVudFN0ZXAoKHByZXYpID0+IHByZXYgLSAxKTtcbiAgICAgICAgfVxuICAgIH0sIFtjdXJyZW50U3RlcF0pO1xuICAgIC8vIENoZWNrIGZvciBleGlzdGluZyBjcmVkZW50aWFscyB3aGVuIGNvbXBhbnkgbmFtZSBjaGFuZ2VzXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgaWYgKGNvbXBhbnlOYW1lLnRyaW0oKSkge1xuICAgICAgICAgICAgY2hlY2tFeGlzdGluZ0NyZWRlbnRpYWxzKGNvbXBhbnlOYW1lLnRyaW0oKSlcbiAgICAgICAgICAgICAgICAudGhlbihzZXRIYXNFeGlzdGluZ0NyZWRlbnRpYWxzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHNldEhhc0V4aXN0aW5nQ3JlZGVudGlhbHMoZmFsc2UpO1xuICAgICAgICB9XG4gICAgfSwgW2NvbXBhbnlOYW1lLCBjaGVja0V4aXN0aW5nQ3JlZGVudGlhbHNdKTtcbiAgICAvLyBTaG93IGNvbmZpcm1hdGlvbiBkaWFsb2cgYmVmb3JlIHN0YXJ0aW5nXG4gICAgY29uc3Qgc2hvd0NvbmZpcm1EaWFsb2cgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgICAgIGlmICghY29tcGFueU5hbWUudHJpbSgpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgc2V0U2hvd0NvbmZpcm1hdGlvbih0cnVlKTtcbiAgICB9LCBbY29tcGFueU5hbWVdKTtcbiAgICAvLyBBY3R1YWxseSBsYXVuY2ggdGhlIHNldHVwIGFmdGVyIGNvbmZpcm1hdGlvblxuICAgIGNvbnN0IGNvbmZpcm1BbmRMYXVuY2ggPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgICAgIHNldFNob3dDb25maXJtYXRpb24oZmFsc2UpO1xuICAgICAgICAvLyBMYXVuY2ggdGhlIHJlYWwgUG93ZXJTaGVsbCBzY3JpcHQgdmlhIHRoZSBob29rXG4gICAgICAgIGxhdW5jaEFwcFJlZ2lzdHJhdGlvbih7XG4gICAgICAgICAgICBjb21wYW55TmFtZTogY29tcGFueU5hbWUudHJpbSgpLFxuICAgICAgICAgICAgc2hvd1dpbmRvdyxcbiAgICAgICAgICAgIGF1dG9JbnN0YWxsTW9kdWxlcyxcbiAgICAgICAgICAgIHNlY3JldFZhbGlkaXR5WWVhcnMsXG4gICAgICAgICAgICBza2lwQXp1cmVSb2xlc1xuICAgICAgICB9KTtcbiAgICB9LCBbY29tcGFueU5hbWUsIHNob3dXaW5kb3csIGF1dG9JbnN0YWxsTW9kdWxlcywgc2VjcmV0VmFsaWRpdHlZZWFycywgc2tpcEF6dXJlUm9sZXMsIGxhdW5jaEFwcFJlZ2lzdHJhdGlvbl0pO1xuICAgIC8vIEhhbmRsZSBpbXBvcnQgZXhpc3RpbmcgY3JlZGVudGlhbHNcbiAgICBjb25zdCBoYW5kbGVJbXBvcnRFeGlzdGluZyA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICAgICAgaWYgKGNvbXBhbnlOYW1lLnRyaW0oKSkge1xuICAgICAgICAgICAgaW1wb3J0RXhpc3RpbmdDcmVkZW50aWFscyhjb21wYW55TmFtZS50cmltKCkpO1xuICAgICAgICB9XG4gICAgfSwgW2NvbXBhbnlOYW1lLCBpbXBvcnRFeGlzdGluZ0NyZWRlbnRpYWxzXSk7XG4gICAgLy8gQ2FuY2VsL3N0b3AgdGhlIHByb2Nlc3NcbiAgICBjb25zdCBoYW5kbGVDYW5jZWwgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgICAgIHN0b3BNb25pdG9yaW5nKCk7XG4gICAgfSwgW3N0b3BNb25pdG9yaW5nXSk7XG4gICAgLy8gUmVzZXQgZm9ybVxuICAgIGNvbnN0IHJlc2V0Rm9ybSA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICAgICAgc2V0Q3VycmVudFN0ZXAoMCk7XG4gICAgICAgIHNldENvbXBsZXRlZFN0ZXBzKG5ldyBTZXQoKSk7XG4gICAgICAgIHNldENvbXBhbnlOYW1lKCcnKTtcbiAgICAgICAgc2V0VGVuYW50SWQoJycpO1xuICAgICAgICBzZXRTaG93V2luZG93KHRydWUpO1xuICAgICAgICBzZXRBdXRvSW5zdGFsbE1vZHVsZXModHJ1ZSk7XG4gICAgICAgIHNldFNlY3JldFZhbGlkaXR5WWVhcnMoMik7XG4gICAgICAgIHNldFNraXBBenVyZVJvbGVzKGZhbHNlKTtcbiAgICAgICAgc2V0Q3JlZGVudGlhbHMobnVsbCk7XG4gICAgICAgIHNldEhhc0V4aXN0aW5nQ3JlZGVudGlhbHMoZmFsc2UpO1xuICAgICAgICByZXNldEFwcFJlZ2lzdHJhdGlvbigpO1xuICAgIH0sIFtyZXNldEFwcFJlZ2lzdHJhdGlvbl0pO1xuICAgIC8vIENoZWNrIGNvbm5lY3Rpdml0eSBvbiBtb3VudFxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGNoZWNrQ29ubmVjdGl2aXR5KCk7XG4gICAgfSwgW2NoZWNrQ29ubmVjdGl2aXR5XSk7XG4gICAgLy8gQ2FuIHByb2NlZWQgY2hlY2tcbiAgICBjb25zdCBjYW5Qcm9jZWVkID0gdXNlTWVtbygoKSA9PiB7XG4gICAgICAgIHN3aXRjaCAoY3VycmVudFN0ZXApIHtcbiAgICAgICAgICAgIGNhc2UgMDogLy8gV2VsY29tZVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgY2FzZSAxOiAvLyBDb25uZWN0aXZpdHlcbiAgICAgICAgICAgICAgICByZXR1cm4gY29ubmVjdGl2aXR5LmludGVybmV0ID09PSAnY29ubmVjdGVkJztcbiAgICAgICAgICAgIGNhc2UgMjogLy8gQ29tcGFueVxuICAgICAgICAgICAgICAgIHJldHVybiBjb21wYW55TmFtZS50cmltKCkubGVuZ3RoID4gMCAmJiB2YWxpZGF0ZVRlbmFudElkKHRlbmFudElkKTtcbiAgICAgICAgICAgIGNhc2UgMzogLy8gUGVybWlzc2lvbnNcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIGNhc2UgNDogLy8gU2V0dXBcbiAgICAgICAgICAgICAgICByZXR1cm4gIWlzUnVubmluZztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfSwgW2N1cnJlbnRTdGVwLCBjb25uZWN0aXZpdHksIGNvbXBhbnlOYW1lLCB0ZW5hbnRJZCwgdmFsaWRhdGVUZW5hbnRJZCwgaXNSdW5uaW5nXSk7XG4gICAgLy8gUmVuZGVyIHN0ZXAgY29udGVudFxuICAgIGNvbnN0IHJlbmRlclN0ZXBDb250ZW50ID0gKCkgPT4ge1xuICAgICAgICBzd2l0Y2ggKGN1cnJlbnRTdGVwKSB7XG4gICAgICAgICAgICBjYXNlIDA6IC8vIFdlbGNvbWVcbiAgICAgICAgICAgICAgICByZXR1cm4gKF9qc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInRleHQtY2VudGVyIHB5LThcIiwgY2hpbGRyZW46IFtfanN4KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInctMjQgaC0yNCBteC1hdXRvIG1iLTYgcm91bmRlZC1mdWxsIGJnLWdyYWRpZW50LXRvLWJyIGZyb20tYmx1ZS01MDAgdG8tcHVycGxlLTYwMCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBzaGFkb3ctbGcgc2hhZG93LWJsdWUtNTAwLzMwXCIsIGNoaWxkcmVuOiBfanN4KENsb3VkLCB7IGNsYXNzTmFtZTogXCJ3LTEyIGgtMTIgdGV4dC13aGl0ZVwiIH0pIH0pLCBfanN4KFwiaDJcIiwgeyBjbGFzc05hbWU6IFwidGV4dC0zeGwgZm9udC1ib2xkIHRleHQtZ3JheS05MDAgZGFyazp0ZXh0LXdoaXRlIG1iLTRcIiwgY2hpbGRyZW46IFwiV2VsY29tZSB0byBBenVyZSBTZXR1cFwiIH0pLCBfanN4cyhcInBcIiwgeyBjbGFzc05hbWU6IFwidGV4dC1sZyB0ZXh0LWdyYXktNjAwIGRhcms6dGV4dC1ncmF5LTQwMCBtYXgtdy0yeGwgbXgtYXV0byBtYi04XCIsIGNoaWxkcmVuOiBbXCJUaGlzIHdpemFyZCB3aWxsIGd1aWRlIHlvdSB0aHJvdWdoIGNyZWF0aW5nIGFuIEF6dXJlIEFwcCBSZWdpc3RyYXRpb24gZm9yIHRoZSBNJkEgRGlzY292ZXJ5IFN1aXRlLiBZb3UnbGwgbmVlZCBcIiwgX2pzeChcInN0cm9uZ1wiLCB7IGNoaWxkcmVuOiBcIkdsb2JhbCBBZG1pbmlzdHJhdG9yXCIgfSksIFwiIG9yIFwiLCBfanN4KFwic3Ryb25nXCIsIHsgY2hpbGRyZW46IFwiQXBwbGljYXRpb24gQWRtaW5pc3RyYXRvclwiIH0pLCBcIiBwZXJtaXNzaW9ucyBpbiBBenVyZSBBRC5cIl0gfSksIF9qc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwiZ3JpZCBncmlkLWNvbHMtMyBnYXAtNiBtYXgtdy0zeGwgbXgtYXV0byBtdC04XCIsIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgaWNvbjogX2pzeChTaGllbGQsIHsgY2xhc3NOYW1lOiBcInctOCBoLThcIiB9KSwgbGFiZWw6ICdTZWN1cmUnLCBkZXNjOiAnQUVTLTI1NiBlbmNyeXB0ZWQgY3JlZGVudGlhbHMnIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgaWNvbjogX2pzeChaYXAsIHsgY2xhc3NOYW1lOiBcInctOCBoLThcIiB9KSwgbGFiZWw6ICdGYXN0JywgZGVzYzogJ0F1dG9tYXRlZCBzZXR1cCBpbiBtaW51dGVzJyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGljb246IF9qc3goTG9jaywgeyBjbGFzc05hbWU6IFwidy04IGgtOFwiIH0pLCBsYWJlbDogJ0NvbXBsaWFudCcsIGRlc2M6ICdHRFBSL0NDUEEgcmVhZHknIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXS5tYXAoKGl0ZW0sIGkpID0+IChfanN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJwLTYgcm91bmRlZC14bCBiZy1ncmFkaWVudC10by1iciBmcm9tLWdyYXktNTAgdG8tZ3JheS0xMDAgZGFyazpmcm9tLWdyYXktODAwIGRhcms6dG8tZ3JheS05MDAgYm9yZGVyIGJvcmRlci1ncmF5LTIwMCBkYXJrOmJvcmRlci1ncmF5LTcwMFwiLCBjaGlsZHJlbjogW19qc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwidy0xNiBoLTE2IG14LWF1dG8gbWItNCByb3VuZGVkLWZ1bGwgYmctYmx1ZS0xMDAgZGFyazpiZy1ibHVlLTkwMC8zMCB0ZXh0LWJsdWUtNjAwIGRhcms6dGV4dC1ibHVlLTQwMCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlclwiLCBjaGlsZHJlbjogaXRlbS5pY29uIH0pLCBfanN4KFwiaDNcIiwgeyBjbGFzc05hbWU6IFwiZm9udC1zZW1pYm9sZCB0ZXh0LWdyYXktOTAwIGRhcms6dGV4dC13aGl0ZSBtYi0xXCIsIGNoaWxkcmVuOiBpdGVtLmxhYmVsIH0pLCBfanN4KFwicFwiLCB7IGNsYXNzTmFtZTogXCJ0ZXh0LXNtIHRleHQtZ3JheS02MDAgZGFyazp0ZXh0LWdyYXktNDAwXCIsIGNoaWxkcmVuOiBpdGVtLmRlc2MgfSldIH0sIGkpKSkgfSldIH0pKTtcbiAgICAgICAgICAgIGNhc2UgMTogLy8gQ29ubmVjdGl2aXR5XG4gICAgICAgICAgICAgICAgcmV0dXJuIChfanN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJtYXgtdy0zeGwgbXgtYXV0b1wiLCBjaGlsZHJlbjogW19qc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInRleHQtY2VudGVyIG1iLThcIiwgY2hpbGRyZW46IFtfanN4KFwiaDJcIiwgeyBjbGFzc05hbWU6IFwidGV4dC0yeGwgZm9udC1ib2xkIHRleHQtZ3JheS05MDAgZGFyazp0ZXh0LXdoaXRlIG1iLTJcIiwgY2hpbGRyZW46IFwiQ2hlY2sgQ29ubmVjdGl2aXR5XCIgfSksIF9qc3goXCJwXCIsIHsgY2xhc3NOYW1lOiBcInRleHQtZ3JheS02MDAgZGFyazp0ZXh0LWdyYXktNDAwXCIsIGNoaWxkcmVuOiBcIkVuc3VyZSBhbGwgcmVxdWlyZWQgY2xvdWQgc2VydmljZXMgYXJlIGFjY2Vzc2libGUgYmVmb3JlIHByb2NlZWRpbmcuXCIgfSldIH0pLCBfanN4KENvbm5lY3Rpdml0eUNhcmQsIHsgc3RhdHVzOiBjb25uZWN0aXZpdHksIG9uUmVmcmVzaDogY2hlY2tDb25uZWN0aXZpdHksIGlzUmVmcmVzaGluZzogaXNDaGVja2luZ0Nvbm5lY3Rpdml0eSB9KSwgY29ubmVjdGl2aXR5LmludGVybmV0ID09PSAnZmFpbGVkJyAmJiAoX2pzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJtdC02IHAtNCByb3VuZGVkLWxnIGJnLXJlZC01MCBkYXJrOmJnLXJlZC05MDAvMjAgYm9yZGVyIGJvcmRlci1yZWQtMjAwIGRhcms6Ym9yZGVyLXJlZC04MDBcIiwgY2hpbGRyZW46IF9qc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImZsZXggaXRlbXMtc3RhcnQgZ2FwLTNcIiwgY2hpbGRyZW46IFtfanN4KEFsZXJ0VHJpYW5nbGUsIHsgY2xhc3NOYW1lOiBcInctNSBoLTUgdGV4dC1yZWQtNTAwIG10LTAuNVwiIH0pLCBfanN4cyhcImRpdlwiLCB7IGNoaWxkcmVuOiBbX2pzeChcInBcIiwgeyBjbGFzc05hbWU6IFwiZm9udC1tZWRpdW0gdGV4dC1yZWQtODAwIGRhcms6dGV4dC1yZWQtMjAwXCIsIGNoaWxkcmVuOiBcIk5vIEludGVybmV0IENvbm5lY3Rpb25cIiB9KSwgX2pzeChcInBcIiwgeyBjbGFzc05hbWU6IFwidGV4dC1zbSB0ZXh0LXJlZC03MDAgZGFyazp0ZXh0LXJlZC0zMDAgbXQtMVwiLCBjaGlsZHJlbjogXCJQbGVhc2UgY2hlY2sgeW91ciBuZXR3b3JrIGNvbm5lY3Rpb24gYW5kIHRyeSBhZ2Fpbi5cIiB9KV0gfSldIH0pIH0pKV0gfSkpO1xuICAgICAgICAgICAgY2FzZSAyOiAvLyBDb21wYW55XG4gICAgICAgICAgICAgICAgcmV0dXJuIChfanN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJtYXgtdy0yeGwgbXgtYXV0b1wiLCBjaGlsZHJlbjogW19qc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInRleHQtY2VudGVyIG1iLThcIiwgY2hpbGRyZW46IFtfanN4KFwiaDJcIiwgeyBjbGFzc05hbWU6IFwidGV4dC0yeGwgZm9udC1ib2xkIHRleHQtZ3JheS05MDAgZGFyazp0ZXh0LXdoaXRlIG1iLTJcIiwgY2hpbGRyZW46IFwiQ29tcGFueSBJbmZvcm1hdGlvblwiIH0pLCBfanN4KFwicFwiLCB7IGNsYXNzTmFtZTogXCJ0ZXh0LWdyYXktNjAwIGRhcms6dGV4dC1ncmF5LTQwMFwiLCBjaGlsZHJlbjogXCJFbnRlciB5b3VyIG9yZ2FuaXphdGlvbiBkZXRhaWxzIGZvciB0aGUgYXBwIHJlZ2lzdHJhdGlvbi5cIiB9KV0gfSksIF9qc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInNwYWNlLXktNiBiZy13aGl0ZSBkYXJrOmJnLWdyYXktODAwIHJvdW5kZWQteGwgYm9yZGVyIGJvcmRlci1ncmF5LTIwMCBkYXJrOmJvcmRlci1ncmF5LTcwMCBwLTZcIiwgY2hpbGRyZW46IFtfanN4KElucHV0LCB7IGxhYmVsOiBcIkNvbXBhbnkgTmFtZVwiLCB2YWx1ZTogY29tcGFueU5hbWUsIG9uQ2hhbmdlOiAoZSkgPT4gc2V0Q29tcGFueU5hbWUoZS50YXJnZXQudmFsdWUpLCBwbGFjZWhvbGRlcjogXCJFbnRlciBjb21wYW55IG5hbWVcIiwgcmVxdWlyZWQ6IHRydWUsIGZ1bGxXaWR0aDogdHJ1ZSwgc3RhcnRJY29uOiBfanN4KEJ1aWxkaW5nMiwgeyBjbGFzc05hbWU6IFwidy00IGgtNFwiIH0pLCBoZWxwZXJUZXh0OiBcIlVzZWQgdG8gb3JnYW5pemUgY3JlZGVudGlhbHMgaW4gQzpcXFxcRGlzY292ZXJ5RGF0YVxcXFxbQ29tcGFueU5hbWVdXCIsIFwiZGF0YS1jeVwiOiBcImNvbXBhbnktbmFtZS1pbnB1dFwiIH0pLCBfanN4KElucHV0LCB7IGxhYmVsOiBcIlRlbmFudCBJRFwiLCB2YWx1ZTogdGVuYW50SWQsIG9uQ2hhbmdlOiAoZSkgPT4gc2V0VGVuYW50SWQoZS50YXJnZXQudmFsdWUpLCBwbGFjZWhvbGRlcjogXCJ4eHh4eHh4eC14eHh4LXh4eHgteHh4eC14eHh4eHh4eHh4eHggb3IgZG9tYWluLm9ubWljcm9zb2Z0LmNvbVwiLCBmdWxsV2lkdGg6IHRydWUsIHN0YXJ0SWNvbjogX2pzeChHbG9iZSwgeyBjbGFzc05hbWU6IFwidy00IGgtNFwiIH0pLCBlcnJvcjogdGVuYW50SWQgJiYgIXZhbGlkYXRlVGVuYW50SWQodGVuYW50SWQpID8gJ0ludmFsaWQgZm9ybWF0JyA6IHVuZGVmaW5lZCwgaGVscGVyVGV4dDogXCJMZWF2ZSBibGFuayB0byBzZWxlY3QgdGVuYW50IGR1cmluZyBhdXRoZW50aWNhdGlvblwiLCBcImRhdGEtY3lcIjogXCJ0ZW5hbnQtaWQtaW5wdXRcIiB9KSwgX2pzeHMoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwicHQtNCBib3JkZXItdCBib3JkZXItZ3JheS0yMDAgZGFyazpib3JkZXItZ3JheS03MDBcIiwgY2hpbGRyZW46IFtfanN4KFwiaDRcIiwgeyBjbGFzc05hbWU6IFwidGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWdyYXktOTAwIGRhcms6dGV4dC13aGl0ZSBtYi00XCIsIGNoaWxkcmVuOiBcIk9wdGlvbnNcIiB9KSwgX2pzeHMoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwic3BhY2UteS00XCIsIGNoaWxkcmVuOiBbX2pzeChDaGVja2JveCwgeyBsYWJlbDogXCJTaG93IFBvd2VyU2hlbGwgV2luZG93XCIsIGNoZWNrZWQ6IHNob3dXaW5kb3csIG9uQ2hhbmdlOiBzZXRTaG93V2luZG93LCBkZXNjcmlwdGlvbjogXCJSZWNvbW1lbmRlZCBmb3IgZmlyc3QtdGltZSBzZXR1cCB0byBzZWUgYXV0aGVudGljYXRpb24gcHJvbXB0c1wiIH0pLCBfanN4KENoZWNrYm94LCB7IGxhYmVsOiBcIkF1dG8tSW5zdGFsbCBSZXF1aXJlZCBNb2R1bGVzXCIsIGNoZWNrZWQ6IGF1dG9JbnN0YWxsTW9kdWxlcywgb25DaGFuZ2U6IHNldEF1dG9JbnN0YWxsTW9kdWxlcywgZGVzY3JpcHRpb246IFwiQXV0b21hdGljYWxseSBpbnN0YWxsIE1pY3Jvc29mdC5HcmFwaCBhbmQgcmVxdWlyZWQgUG93ZXJTaGVsbCBtb2R1bGVzXCIgfSksIF9qc3goQ2hlY2tib3gsIHsgbGFiZWw6IFwiU2tpcCBBenVyZSBSb2xlIEFzc2lnbm1lbnRzXCIsIGNoZWNrZWQ6IHNraXBBenVyZVJvbGVzLCBvbkNoYW5nZTogc2V0U2tpcEF6dXJlUm9sZXMsIGRlc2NyaXB0aW9uOiBcIkZvciBsaW1pdGVkIGFkbWluIGFjY2VzcyAtIHNraXAgYXNzaWduaW5nIEF6dXJlIEFEIHJvbGVzXCIgfSksIF9qc3hzKFwiZGl2XCIsIHsgY2hpbGRyZW46IFtfanN4KFwibGFiZWxcIiwgeyBjbGFzc05hbWU6IFwiYmxvY2sgdGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWdyYXktNzAwIGRhcms6dGV4dC1ncmF5LTMwMCBtYi0yXCIsIGNoaWxkcmVuOiBcIkNsaWVudCBTZWNyZXQgVmFsaWRpdHkgKFllYXJzKVwiIH0pLCBfanN4KFwiaW5wdXRcIiwgeyB0eXBlOiBcIm51bWJlclwiLCBtaW46IFwiMVwiLCBtYXg6IFwiMTBcIiwgdmFsdWU6IHNlY3JldFZhbGlkaXR5WWVhcnMsIG9uQ2hhbmdlOiAoZSkgPT4gc2V0U2VjcmV0VmFsaWRpdHlZZWFycyhwYXJzZUludChlLnRhcmdldC52YWx1ZSkgfHwgMiksIGNsYXNzTmFtZTogXCJ3LTMyIHB4LTQgcHktMiBib3JkZXIgYm9yZGVyLWdyYXktMzAwIGRhcms6Ym9yZGVyLWdyYXktNjAwIHJvdW5kZWQtbGcgYmctd2hpdGUgZGFyazpiZy1ncmF5LTcwMCB0ZXh0LWdyYXktOTAwIGRhcms6dGV4dC13aGl0ZSBmb2N1czpyaW5nLTIgZm9jdXM6cmluZy1ibHVlLTUwMCBmb2N1czpib3JkZXItdHJhbnNwYXJlbnRcIiB9KSwgX2pzeChcInBcIiwgeyBjbGFzc05hbWU6IFwibXQtMSB0ZXh0LXhzIHRleHQtZ3JheS01MDAgZGFyazp0ZXh0LWdyYXktNDAwXCIsIGNoaWxkcmVuOiBcIk1pY3Jvc29mdCByZWNvbW1lbmRzIG1heGltdW0gMiB5ZWFyc1wiIH0pXSB9KV0gfSldIH0pXSB9KV0gfSkpO1xuICAgICAgICAgICAgY2FzZSAzOiAvLyBQZXJtaXNzaW9uc1xuICAgICAgICAgICAgICAgIHJldHVybiAoX2pzeHMoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwibWF4LXctM3hsIG14LWF1dG9cIiwgY2hpbGRyZW46IFtfanN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJ0ZXh0LWNlbnRlciBtYi04XCIsIGNoaWxkcmVuOiBbX2pzeChcImgyXCIsIHsgY2xhc3NOYW1lOiBcInRleHQtMnhsIGZvbnQtYm9sZCB0ZXh0LWdyYXktOTAwIGRhcms6dGV4dC13aGl0ZSBtYi0yXCIsIGNoaWxkcmVuOiBcIlJlcXVpcmVkIFBlcm1pc3Npb25zXCIgfSksIF9qc3goXCJwXCIsIHsgY2xhc3NOYW1lOiBcInRleHQtZ3JheS02MDAgZGFyazp0ZXh0LWdyYXktNDAwXCIsIGNoaWxkcmVuOiBcIlRoZSBmb2xsb3dpbmcgTWljcm9zb2Z0IEdyYXBoIEFQSSBwZXJtaXNzaW9ucyB3aWxsIGJlIHJlcXVlc3RlZC5cIiB9KV0gfSksIF9qc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwiZ3JpZCBncmlkLWNvbHMtMiBnYXAtNCBtYi02XCIsIGNoaWxkcmVuOiBSRVFVSVJFRF9QRVJNSVNTSU9OUy5tYXAoKHBlcm1pc3Npb24sIGluZGV4KSA9PiAoX2pzeChQZXJtaXNzaW9uQ2FyZCwgeyBwZXJtaXNzaW9uOiBwZXJtaXNzaW9uLCBpbmRleDogaW5kZXggfSwgcGVybWlzc2lvbi5uYW1lKSkpIH0pLCBfanN4KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInAtNCByb3VuZGVkLWxnIGJnLWJsdWUtNTAgZGFyazpiZy1ibHVlLTkwMC8yMCBib3JkZXIgYm9yZGVyLWJsdWUtMjAwIGRhcms6Ym9yZGVyLWJsdWUtODAwXCIsIGNoaWxkcmVuOiBfanN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJmbGV4IGl0ZW1zLXN0YXJ0IGdhcC0zXCIsIGNoaWxkcmVuOiBbX2pzeChJbmZvLCB7IGNsYXNzTmFtZTogXCJ3LTUgaC01IHRleHQtYmx1ZS01MDAgbXQtMC41IGZsZXgtc2hyaW5rLTBcIiB9KSwgX2pzeHMoXCJkaXZcIiwgeyBjaGlsZHJlbjogW19qc3goXCJwXCIsIHsgY2xhc3NOYW1lOiBcImZvbnQtbWVkaXVtIHRleHQtYmx1ZS04MDAgZGFyazp0ZXh0LWJsdWUtMjAwXCIsIGNoaWxkcmVuOiBcIkFkbWluaXN0cmF0b3IgQ29uc2VudCBSZXF1aXJlZFwiIH0pLCBfanN4KFwicFwiLCB7IGNsYXNzTmFtZTogXCJ0ZXh0LXNtIHRleHQtYmx1ZS03MDAgZGFyazp0ZXh0LWJsdWUtMzAwIG10LTFcIiwgY2hpbGRyZW46IFwiVGhlc2UgcGVybWlzc2lvbnMgcmVxdWlyZSBhZG1pbiBjb25zZW50LiBZb3UnbGwgYmUgcHJvbXB0ZWQgdG8gc2lnbiBpbiB3aXRoIGFuIGFkbWluaXN0cmF0b3IgYWNjb3VudCBkdXJpbmcgdGhlIHNldHVwIHByb2Nlc3MuXCIgfSldIH0pXSB9KSB9KV0gfSkpO1xuICAgICAgICAgICAgY2FzZSA0OiAvLyBTZXR1cFxuICAgICAgICAgICAgICAgIHJldHVybiAoX2pzeHMoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwibWF4LXctM3hsIG14LWF1dG9cIiwgY2hpbGRyZW46IFtfanN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJ0ZXh0LWNlbnRlciBtYi04XCIsIGNoaWxkcmVuOiBbX2pzeChcImgyXCIsIHsgY2xhc3NOYW1lOiBcInRleHQtMnhsIGZvbnQtYm9sZCB0ZXh0LWdyYXktOTAwIGRhcms6dGV4dC13aGl0ZSBtYi0yXCIsIGNoaWxkcmVuOiBzdWNjZXNzID8gJ1NldHVwIENvbXBsZXRlIScgOiAnQ3JlYXRlIEFwcCBSZWdpc3RyYXRpb24nIH0pLCBfanN4KFwicFwiLCB7IGNsYXNzTmFtZTogXCJ0ZXh0LWdyYXktNjAwIGRhcms6dGV4dC1ncmF5LTQwMFwiLCBjaGlsZHJlbjogc3VjY2Vzc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gJ1lvdXIgQXp1cmUgQXBwIFJlZ2lzdHJhdGlvbiBoYXMgYmVlbiBjcmVhdGVkIHN1Y2Nlc3NmdWxseSBhbmQgY3JlZGVudGlhbHMgaGF2ZSBiZWVuIGltcG9ydGVkLidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICdSZWFkeSB0byBjcmVhdGUgdGhlIEF6dXJlIEFwcCBSZWdpc3RyYXRpb24gZm9yICcgKyBjb21wYW55TmFtZSB9KV0gfSksIGhhc0V4aXN0aW5nQ3JlZGVudGlhbHMgJiYgIXN1Y2Nlc3MgJiYgIWlzUnVubmluZyAmJiAoX2pzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJtYi02IHAtNCByb3VuZGVkLWxnIGJnLXllbGxvdy01MCBkYXJrOmJnLXllbGxvdy05MDAvMjAgYm9yZGVyIGJvcmRlci15ZWxsb3ctMjAwIGRhcms6Ym9yZGVyLXllbGxvdy04MDBcIiwgY2hpbGRyZW46IF9qc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImZsZXggaXRlbXMtc3RhcnQgZ2FwLTNcIiwgY2hpbGRyZW46IFtfanN4KEFsZXJ0VHJpYW5nbGUsIHsgY2xhc3NOYW1lOiBcInctNSBoLTUgdGV4dC15ZWxsb3ctNTAwIG10LTAuNVwiIH0pLCBfanN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJmbGV4LTFcIiwgY2hpbGRyZW46IFtfanN4KFwicFwiLCB7IGNsYXNzTmFtZTogXCJmb250LW1lZGl1bSB0ZXh0LXllbGxvdy04MDAgZGFyazp0ZXh0LXllbGxvdy0yMDBcIiwgY2hpbGRyZW46IFwiRXhpc3RpbmcgQ3JlZGVudGlhbHMgRm91bmRcIiB9KSwgX2pzeHMoXCJwXCIsIHsgY2xhc3NOYW1lOiBcInRleHQtc20gdGV4dC15ZWxsb3ctNzAwIGRhcms6dGV4dC15ZWxsb3ctMzAwIG10LTFcIiwgY2hpbGRyZW46IFtcIkFwcCByZWdpc3RyYXRpb24gY3JlZGVudGlhbHMgYWxyZWFkeSBleGlzdCBmb3IgXFxcIlwiLCBjb21wYW55TmFtZSwgXCJcXFwiLiBZb3UgY2FuIGltcG9ydCB0aGVtIG9yIGNyZWF0ZSBuZXcgb25lcy5cIl0gfSksIF9qc3goQnV0dG9uLCB7IHZhcmlhbnQ6IFwic2Vjb25kYXJ5XCIsIHNpemU6IFwic21cIiwgb25DbGljazogaGFuZGxlSW1wb3J0RXhpc3RpbmcsIGNsYXNzTmFtZTogXCJtdC0yXCIsIGNoaWxkcmVuOiBcIkltcG9ydCBFeGlzdGluZyBDcmVkZW50aWFsc1wiIH0pXSB9KV0gfSkgfSkpLCBlcnJvciAmJiAoX2pzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJtYi02IHAtNCByb3VuZGVkLWxnIGJnLXJlZC01MCBkYXJrOmJnLXJlZC05MDAvMjAgYm9yZGVyIGJvcmRlci1yZWQtMjAwIGRhcms6Ym9yZGVyLXJlZC04MDBcIiwgY2hpbGRyZW46IF9qc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImZsZXggaXRlbXMtc3RhcnQgZ2FwLTNcIiwgY2hpbGRyZW46IFtfanN4KEFsZXJ0Q2lyY2xlLCB7IGNsYXNzTmFtZTogXCJ3LTUgaC01IHRleHQtcmVkLTUwMCBtdC0wLjVcIiB9KSwgX2pzeHMoXCJkaXZcIiwgeyBjaGlsZHJlbjogW19qc3goXCJwXCIsIHsgY2xhc3NOYW1lOiBcImZvbnQtbWVkaXVtIHRleHQtcmVkLTgwMCBkYXJrOnRleHQtcmVkLTIwMFwiLCBjaGlsZHJlbjogXCJFcnJvclwiIH0pLCBfanN4KFwicFwiLCB7IGNsYXNzTmFtZTogXCJ0ZXh0LXNtIHRleHQtcmVkLTcwMCBkYXJrOnRleHQtcmVkLTMwMCBtdC0xXCIsIGNoaWxkcmVuOiBlcnJvciB9KSwgX2pzeChCdXR0b24sIHsgdmFyaWFudDogXCJzZWNvbmRhcnlcIiwgc2l6ZTogXCJzbVwiLCBvbkNsaWNrOiByZXNldEFwcFJlZ2lzdHJhdGlvbiwgY2xhc3NOYW1lOiBcIm10LTJcIiwgY2hpbGRyZW46IFwiVHJ5IEFnYWluXCIgfSldIH0pXSB9KSB9KSksIHN1Y2Nlc3MgPyAoX2pzeHMoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwic3BhY2UteS02XCIsIGNoaWxkcmVuOiBbX2pzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJwLTYgcm91bmRlZC14bCBiZy1ncmVlbi01MCBkYXJrOmJnLWdyZWVuLTkwMC8yMCBib3JkZXIgYm9yZGVyLWdyZWVuLTIwMCBkYXJrOmJvcmRlci1ncmVlbi04MDBcIiwgY2hpbGRyZW46IF9qc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImZsZXggaXRlbXMtY2VudGVyIGdhcC0zIG1iLTRcIiwgY2hpbGRyZW46IFtfanN4KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInctMTIgaC0xMiByb3VuZGVkLWZ1bGwgYmctZ3JlZW4tNTAwIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyXCIsIGNoaWxkcmVuOiBfanN4KENoZWNrQ2lyY2xlLCB7IGNsYXNzTmFtZTogXCJ3LTYgaC02IHRleHQtd2hpdGVcIiB9KSB9KSwgX2pzeHMoXCJkaXZcIiwgeyBjaGlsZHJlbjogW19qc3goXCJoM1wiLCB7IGNsYXNzTmFtZTogXCJmb250LXNlbWlib2xkIHRleHQtZ3JlZW4tODAwIGRhcms6dGV4dC1ncmVlbi0yMDBcIiwgY2hpbGRyZW46IFwiQXBwIFJlZ2lzdHJhdGlvbiBDb21wbGV0ZVwiIH0pLCBfanN4KFwicFwiLCB7IGNsYXNzTmFtZTogXCJ0ZXh0LXNtIHRleHQtZ3JlZW4tNzAwIGRhcms6dGV4dC1ncmVlbi0zMDBcIiwgY2hpbGRyZW46IFwiQ3JlZGVudGlhbHMgaGF2ZSBiZWVuIHNlY3VyZWx5IHN0b3JlZCBhbmQgaW1wb3J0ZWQgaW50byB5b3VyIHByb2ZpbGUuXCIgfSldIH0pXSB9KSB9KSwgX2pzeChQcm9ncmVzc1N0ZXBDYXJkLCB7IHN0ZXBzOiBwcm9ncmVzc1N0ZXBzLCBjdXJyZW50U3RlcEluZGV4OiAzIH0pLCBfanN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJmbGV4IGp1c3RpZnktY2VudGVyIGdhcC00IG10LThcIiwgY2hpbGRyZW46IFtfanN4KEJ1dHRvbiwgeyB2YXJpYW50OiBcInNlY29uZGFyeVwiLCBvbkNsaWNrOiByZXNldEZvcm0sIGljb246IF9qc3goUmVmcmVzaEN3LCB7IGNsYXNzTmFtZTogXCJ3LTQgaC00XCIgfSksIGNoaWxkcmVuOiBcIkNyZWF0ZSBBbm90aGVyXCIgfSksIF9qc3goQnV0dG9uLCB7IHZhcmlhbnQ6IFwicHJpbWFyeVwiLCBpY29uOiBfanN4KEV4dGVybmFsTGluaywgeyBjbGFzc05hbWU6IFwidy00IGgtNFwiIH0pLCBvbkNsaWNrOiAoKSA9PiB3aW5kb3cub3BlbignaHR0cHM6Ly9wb3J0YWwuYXp1cmUuY29tLyNibGFkZS9NaWNyb3NvZnRfQUFEX0lBTS9BY3RpdmVEaXJlY3RvcnlNZW51QmxhZGUvUmVnaXN0ZXJlZEFwcHMnKSwgY2hpbGRyZW46IFwiVmlldyBpbiBBenVyZSBQb3J0YWxcIiB9KV0gfSldIH0pKSA6IChfanN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJzcGFjZS15LTZcIiwgY2hpbGRyZW46IFtfanN4KFByb2dyZXNzU3RlcENhcmQsIHsgc3RlcHM6IHByb2dyZXNzU3RlcHMsIGN1cnJlbnRTdGVwSW5kZXg6IGlzUnVubmluZyA/IDEgOiAwIH0pLCBpc1J1bm5pbmcgJiYgKF9qc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcIm10LTZcIiwgY2hpbGRyZW46IFtfanN4KFByb2dyZXNzQmFyLCB7IHZhbHVlOiBwcm9ncmVzcywgbWF4OiAxMDAsIHZhcmlhbnQ6IFwiaW5mb1wiLCBzaXplOiBcImxnXCIsIGFuaW1hdGVkOiB0cnVlLCBzdHJpcGVkOiB0cnVlIH0pLCBfanN4KFwicFwiLCB7IGNsYXNzTmFtZTogXCJ0ZXh0LWNlbnRlciB0ZXh0LXNtIHRleHQtZ3JheS02MDAgZGFyazp0ZXh0LWdyYXktNDAwIG10LTJcIiwgY2hpbGRyZW46IGFwcFJlZ1N0YXRlLnByb2dyZXNzIHx8ICdQcm9jZXNzaW5nLi4uJyB9KV0gfSkpLCBfanN4KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImZsZXgganVzdGlmeS1jZW50ZXIgZ2FwLTQgbXQtOFwiLCBjaGlsZHJlbjogaXNSdW5uaW5nID8gKF9qc3goQnV0dG9uLCB7IHZhcmlhbnQ6IFwiZGFuZ2VyXCIsIHNpemU6IFwibGdcIiwgb25DbGljazogaGFuZGxlQ2FuY2VsLCBpY29uOiBfanN4KFN0b3BDaXJjbGUsIHsgY2xhc3NOYW1lOiBcInctNSBoLTVcIiB9KSwgY2xhc3NOYW1lOiBcInB4LThcIiwgY2hpbGRyZW46IFwiQ2FuY2VsXCIgfSkpIDogIWVycm9yICYmIChfanN4KEJ1dHRvbiwgeyB2YXJpYW50OiBcInByaW1hcnlcIiwgc2l6ZTogXCJsZ1wiLCBvbkNsaWNrOiBzaG93Q29uZmlybURpYWxvZywgaWNvbjogX2pzeChQbGF5LCB7IGNsYXNzTmFtZTogXCJ3LTUgaC01XCIgfSksIGNsYXNzTmFtZTogXCJweC04XCIsIGNoaWxkcmVuOiBcIlN0YXJ0IEFwcCBSZWdpc3RyYXRpb25cIiB9KSkgfSldIH0pKV0gfSkpO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIChfanN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJoLWZ1bGwgZmxleCBmbGV4LWNvbCBiZy1ncmFkaWVudC10by1iciBmcm9tLWdyYXktNTAgdG8tZ3JheS0xMDAgZGFyazpmcm9tLWdyYXktOTAwIGRhcms6dG8tZ3JheS05NTBcIiwgXCJkYXRhLWN5XCI6IFwic2V0dXAtY29tcGFueS12aWV3XCIsIFwiZGF0YS10ZXN0aWRcIjogXCJzZXR1cC1jb21wYW55LXZpZXdcIiwgY2hpbGRyZW46IFtfanN4KENvbmZpcm1hdGlvbkRpYWxvZywgeyBpc09wZW46IHNob3dDb25maXJtYXRpb24sIG9uQ2xvc2U6ICgpID0+IHNldFNob3dDb25maXJtYXRpb24oZmFsc2UpLCBvbkNvbmZpcm06IGNvbmZpcm1BbmRMYXVuY2gsIGNvbXBhbnlOYW1lOiBjb21wYW55TmFtZSwgc2hvd1dpbmRvdzogc2hvd1dpbmRvdywgYXV0b0luc3RhbGxNb2R1bGVzOiBhdXRvSW5zdGFsbE1vZHVsZXMsIHNraXBBenVyZVJvbGVzOiBza2lwQXp1cmVSb2xlcywgc2VjcmV0VmFsaWRpdHlZZWFyczogc2VjcmV0VmFsaWRpdHlZZWFycyB9KSwgX2pzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJiZy13aGl0ZSBkYXJrOmJnLWdyYXktODAwIGJvcmRlci1iIGJvcmRlci1ncmF5LTIwMCBkYXJrOmJvcmRlci1ncmF5LTcwMCBweC02IHB5LTQgc2hhZG93LXNtXCIsIGNoaWxkcmVuOiBfanN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gbWF4LXctNnhsIG14LWF1dG9cIiwgY2hpbGRyZW46IFtfanN4cyhcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtM1wiLCBjaGlsZHJlbjogW19qc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwicC0yIGJnLWdyYWRpZW50LXRvLWJyIGZyb20tYmx1ZS01MDAgdG8tcHVycGxlLTYwMCByb3VuZGVkLXhsIHNoYWRvdy1sZyBzaGFkb3ctYmx1ZS01MDAvMjBcIiwgY2hpbGRyZW46IF9qc3goQnVpbGRpbmcyLCB7IGNsYXNzTmFtZTogXCJ3LTYgaC02IHRleHQtd2hpdGVcIiB9KSB9KSwgX2pzeHMoXCJkaXZcIiwgeyBjaGlsZHJlbjogW19qc3goXCJoMVwiLCB7IGNsYXNzTmFtZTogXCJ0ZXh0LXhsIGZvbnQtYm9sZCB0ZXh0LWdyYXktOTAwIGRhcms6dGV4dC13aGl0ZVwiLCBjaGlsZHJlbjogXCJDb21wYW55IFNldHVwXCIgfSksIF9qc3goXCJwXCIsIHsgY2xhc3NOYW1lOiBcInRleHQtc20gdGV4dC1ncmF5LTYwMCBkYXJrOnRleHQtZ3JheS00MDBcIiwgY2hpbGRyZW46IFwiQXp1cmUgQXBwIFJlZ2lzdHJhdGlvbiBXaXphcmRcIiB9KV0gfSldIH0pLCBfanN4KEJ1dHRvbiwgeyB2YXJpYW50OiBcInNlY29uZGFyeVwiLCBvbkNsaWNrOiByZXNldEZvcm0sIGljb246IF9qc3goUmVmcmVzaEN3LCB7IGNsYXNzTmFtZTogXCJ3LTQgaC00XCIgfSksIGNoaWxkcmVuOiBcIlJlc2V0XCIgfSldIH0pIH0pLCBfanN4KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImZsZXgtMSBvdmVyZmxvdy1hdXRvIHB5LThcIiwgY2hpbGRyZW46IF9qc3hzKFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcIm1heC13LTZ4bCBteC1hdXRvIHB4LTZcIiwgY2hpbGRyZW46IFtfanN4KFN0ZXBJbmRpY2F0b3IsIHsgc3RlcHM6IHdpemFyZFN0ZXBzLCBjdXJyZW50U3RlcDogY3VycmVudFN0ZXAsIGNvbXBsZXRlZFN0ZXBzOiBjb21wbGV0ZWRTdGVwcyB9KSwgX2pzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJtaW4taC1bNTAwcHhdXCIsIGNoaWxkcmVuOiByZW5kZXJTdGVwQ29udGVudCgpIH0pLCAhc3VjY2VzcyAmJiAoX2pzeHMoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIG10LTggcHQtNiBib3JkZXItdCBib3JkZXItZ3JheS0yMDAgZGFyazpib3JkZXItZ3JheS03MDBcIiwgY2hpbGRyZW46IFtfanN4KEJ1dHRvbiwgeyB2YXJpYW50OiBcInNlY29uZGFyeVwiLCBvbkNsaWNrOiBwcmV2U3RlcCwgZGlzYWJsZWQ6IGN1cnJlbnRTdGVwID09PSAwIHx8IGlzUnVubmluZywgaWNvbjogX2pzeChDaGV2cm9uTGVmdCwgeyBjbGFzc05hbWU6IFwidy00IGgtNFwiIH0pLCBjaGlsZHJlbjogXCJQcmV2aW91c1wiIH0pLCBfanN4KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImZsZXggaXRlbXMtY2VudGVyIGdhcC0yXCIsIGNoaWxkcmVuOiB3aXphcmRTdGVwcy5tYXAoKF8sIGluZGV4KSA9PiAoX2pzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogYFxyXG4gICAgICAgICAgICAgICAgICAgICAgdy0yIGgtMiByb3VuZGVkLWZ1bGwgdHJhbnNpdGlvbi1hbGxcclxuICAgICAgICAgICAgICAgICAgICAgICR7aW5kZXggPT09IGN1cnJlbnRTdGVwID8gJ3ctOCBiZy1ibHVlLTUwMCcgOiAnYmctZ3JheS0zMDAgZGFyazpiZy1ncmF5LTYwMCd9XHJcbiAgICAgICAgICAgICAgICAgICAgYCB9LCBpbmRleCkpKSB9KSwgY3VycmVudFN0ZXAgPCB3aXphcmRTdGVwcy5sZW5ndGggLSAxID8gKF9qc3goQnV0dG9uLCB7IHZhcmlhbnQ6IFwicHJpbWFyeVwiLCBvbkNsaWNrOiBuZXh0U3RlcCwgZGlzYWJsZWQ6ICFjYW5Qcm9jZWVkLCBpY29uOiBfanN4KENoZXZyb25SaWdodCwgeyBjbGFzc05hbWU6IFwidy00IGgtNFwiIH0pLCBpY29uUG9zaXRpb246IFwidHJhaWxpbmdcIiwgY2hpbGRyZW46IFwiQ29udGludWVcIiB9KSkgOiAoX2pzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJ3LTI0XCIgfSkpXSB9KSldIH0pIH0pXSB9KSk7XG59O1xuZXhwb3J0IGRlZmF1bHQgU2V0dXBDb21wYW55VmlldztcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==